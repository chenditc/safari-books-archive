<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/site-reliability-engineering/9781491929117/ch02.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491929117"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch02.html"
  data-epub-title="Site Reliability Engineering" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/site-reliability-engineering/9781491929117/ch02.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491929117" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch02.html" data-epub-title="Site Reliability Engineering" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491929117"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>2. The Production Environment at Google, from the Viewpoint of an SRE - Site Reliability Engineering</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/c1c7ad294784.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content p.byline{text-align:left;margin:-33px auto 35px;font-style:italic;font-weight:bold}#sbo-rt-content div.preface p+p.byline{margin:1em 0 0}#sbo-rt-content div.preface p.byline+p.byline{margin:0}#sbo-rt-content div.sect1>p.byline{margin:-.25em 0 1em}#sbo-rt-content div.sect1>p.byline+p.byline{margin-top:-1em}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content aside[data-type="sidebar"] p.byline{font-family:sans-serif;font-size:90%;font-weight:bold;font-style:italic;text-align:center;text-indent:0;margin:5px auto 6px;page-break-after:avoid}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"] h2,#sbo-rt-content section[data-type="titlepage"] p.subtitle{font-size:1em;font-weight:normal;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"],#sbo-rt-content section[data-type="titlepage"] p.author{font-size:1em;font-family:serif,"DejaVuSerif";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content section[data-type="titlepage"] p.edition{font-size:1em;font-family:serif,"DejaVuSerif";font-weight:normal;text-align:center;text-transform:uppercase;margin-top:2em}#sbo-rt-content section[data-type="titlepage"]:after{content:url(css_assets/titlepage_footer_ebook.png);position:absolute;bottom:0;max-width:100%}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div[data-type="footnotes"]{font-size:85%;border-top:2px solid black;padding-left:1.5em;margin-top:1.5em}#sbo-rt-content p[data-type="footnote"]{margin-top:-.5em}#sbo-rt-content p[data-type="footnote"] sup{left:-1em;top:1.2em;position:relative;display:block}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}#sbo-rt-content span.roman_text{font-style:normal !important}
    </style><link rel="canonical" href="/library/view/site-reliability-engineering/9781491929117/ch02.html"><meta name="description" content=" Chapter 2. The Production Environment at Google, from the Viewpoint of an SRE Written by JC van Winkel Edited by Betsy Beyer Google datacenters are very different from most conventional ... "><meta property="og:title" content="2. The Production Environment at Google, from the Viewpoint of an SRE"><meta itemprop="isPartOf" content="/library/view/site-reliability-engineering/9781491929117/"><meta itemprop="name" content="2. The Production Environment at Google, from the Viewpoint of an SRE"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/ch02.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491929117/"><meta property="og:description" itemprop="description" content=" Chapter 2. The Production Environment at Google, from the Viewpoint of an SRE Written by JC van Winkel Edited by Betsy Beyer Google datacenters are very different from most conventional ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491929124"><meta property="og:book:author" itemprop="author" content="Niall Richard Murphy"><meta property="og:book:author" itemprop="author" content="Jennifer Petoff"><meta property="og:book:author" itemprop="author" content="Chris Jones"><meta property="og:book:author" itemprop="author" content="Betsy Beyer"><meta property="og:book:tag" itemprop="about" content="Engineering"><meta property="og:book:tag" itemprop="about" content="Networking"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--></head>


<body class="reading sidenav nav-collapsed  js-show-related scalefonts" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Site Reliability Engineering
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491929117/chapter/ch02.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/ch02.html&amp;text=Site%20Reliability%20Engineering&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/ch02.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/ch02.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%202.%20The%20Production%20Environment%20at%20Google%2C%20from%20the%20Viewpoint%20of%20an%20SRE&amp;body=https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/ch02.html%0D%0Afrom%20Site%20Reliability%20Engineering%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/library/view/site-reliability-engineering/9781491929117/ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Introduction</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/library/view/site-reliability-engineering/9781491929117/part02.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">II. Principles</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 2. The Production Environment at Google, from the Viewpoint of an SRE"><div class="chapter" id="chapter_production-environment">
<h1><span class="label">Chapter 2. </span>The Production Environment at Google, from the Viewpoint of an SRE</h1>


<p class="byline">Written by JC van Winkel</p>

<p class="byline">Edited by Betsy Beyer</p>

<p><a data-type="indexterm" data-primary="production environment" data-see="Google production environment" id="idm140203538924848"></a>Google datacenters are very different from most conventional
datacenters and small-scale server farms. These differences present
both extra problems and opportunities. This chapter discusses the
challenges and opportunities that characterize Google datacenters and
introduces terminology that is used throughout the book.</p>






<section data-type="sect1" data-pdf-bookmark="Hardware"><div class="sect1" id="idm140203538923264">
<h1>Hardware</h1>

<p><a data-type="indexterm" data-primary="Google production environment" data-secondary="hardware" id="idm140203538922128"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="machines" id="idm140203538921168"></a><a data-type="indexterm" data-primary="hardware" data-secondary="terminology used for" id="idm140203538920208"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="servers" id="idm140203538919264"></a>Most of Google’s compute resources are in Google-designed datacenters with
proprietary power distribution, cooling, networking, and compute hardware
(see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Bar13">[Bar13]</a>). Unlike
“standard” colocation datacenters, the compute hardware in a Google-designed
datacenter is the same across the board.<sup><a data-type="noteref" id="idm140203538917056-marker" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538917056">1</a></sup> To eliminate the confusion between server hardware and server
software, we use the following terminology throughout the book:</p>
<dl>
<dt>Machine</dt>
<dd>
<p><a data-type="indexterm" data-primary="machines" data-secondary="defined" id="idm140203538914224"></a>A piece of hardware (or perhaps a VM)</p>
</dd>
<dt>Server</dt>
<dd>
<p><a data-type="indexterm" data-primary="servers" data-secondary="defined" id="idm140203538911920"></a>A piece of software that implements a service</p>
</dd>
</dl>

<p><a data-type="indexterm" data-primary="Borg" id="borg2"></a><a data-type="indexterm" data-primary="resources" data-secondary="allocation of" id="idm140203538909232"></a>Machines can run any server, so we don’t dedicate specific machines to
specific server programs. There’s no specific machine that runs our
mail server, for example. Instead, resource allocation is handled by
our cluster operating system, <em>Borg</em>.</p>

<p>We realize this use of the word <em>server</em> is unusual. The common use of
the word conflates “binary that accepts network connection” with
<em>machine</em>, but differentiating between the two is important when
talking about computing at Google. Once you get used to our usage of
<em>server</em>, it becomes more apparent why it makes sense to use this
specialized terminology, not just within Google but also in the rest
of this book.</p>

<p><a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#fig_production-environment_topology">Figure&nbsp;2-1</a> <a data-type="indexterm" data-primary="Google production environment" data-secondary="datacenter topology" id="idm140203538904192"></a><a data-type="indexterm" data-primary="datacenters" data-secondary="topology of" id="idm140203538903232"></a><a data-type="indexterm" data-primary="rows" id="idm140203538902288"></a><a data-type="indexterm" data-primary="clusters" data-secondary="defined" id="idm140203538901616"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="racks" id="idm140203538900672"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="rows" id="idm140203538899712"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="clusters" id="idm140203538898752"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="datacenters" id="idm140203538897792"></a><a data-type="indexterm" data-primary="campuses" id="idm140203538896832"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="campuses" id="idm140203538896160"></a>illustrates the topology
of a Google datacenter:</p>

<ul>
<li>
<p>Tens of machines are placed in a <em>rack</em>.</p>
</li>
<li>
<p>Racks stand in a <em>row</em>.</p>
</li>
<li>
<p>One or more rows form a <em>cluster</em>.</p>
</li>
<li>
<p>Usually a <em>datacenter</em> building houses multiple clusters.</p>
</li>
<li>
<p>Multiple datacenter buildings that are located close together form
a <em>campus</em>.</p>
</li>
</ul>

<figure><div id="fig_production-environment_topology" class="figure">
<img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/srle_0201.png" alt="Example Google datacenter campus topology." width="960" height="521">
<h6><span class="label">Figure 2-1. </span>Example Google datacenter campus topology</h6>
</div></figure>

<p><a data-type="indexterm" data-primary="Clos network fabric" id="idm140203538660368"></a><a data-type="indexterm" data-primary="Jupiter network fabric" id="idm140203538659696"></a>Machines within a given datacenter need to be able to talk with each
other, so we created a very fast virtual switch with tens of thousands
of ports. We accomplished this by connecting hundreds of Google-built
switches in a Clos network fabric <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Clos53">[Clos53]</a> named <em>Jupiter</em> <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Sin15">[Sin15]</a>.
In its largest configuration, Jupiter supports 1.3 Pbps bisection
bandwidth among servers.</p>

<p><a data-type="indexterm" data-primary="B4 network" id="idm140203538656160"></a><a data-type="indexterm" data-primary="datacenters" data-secondary="backbone network for" id="idm140203538655488"></a>Datacenters are connected to each other with our globe-spanning
backbone network <em>B4</em> <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Jai13">[Jai13]</a>. B4 is a software-defined networking
architecture (and uses the OpenFlow open-standard communications
protocol). It supplies massive bandwidth to a modest number of sites,
and uses elastic bandwidth allocation to maximize average bandwidth
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Kum15">[Kum15]</a>.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="System Software That “Organizes” the Hardware"><div class="sect1" id="idm140203538651760">
<h1>System Software That “Organizes” the Hardware</h1>

<p><a data-type="indexterm" data-primary="Google production environment" data-secondary="system software" id="GPEsys2"></a><a data-type="indexterm" data-primary="hardware" data-secondary="software that “organizes”" id="Hsoft2"></a><a data-type="indexterm" data-primary="hardware" data-secondary="managing failures" id="idm140203538648128"></a><a data-type="indexterm" data-primary="system software" data-secondary="managing failures with" id="idm140203538647184"></a>Our hardware must be controlled and administered by software that can
handle massive scale. Hardware failures are one notable problem
that we manage with software. Given the large number of hardware
components in a cluster, hardware failures occur quite frequently. In
a single cluster in a typical year, thousands of machines fail and
thousands of hard disks break; when multiplied by the number of
clusters we operate globally, these numbers become somewhat
breathtaking. Therefore, we want to abstract such problems away from
users, and the teams running our services similarly don’t want to be
bothered by hardware failures. Each datacenter campus has teams
dedicated to maintaining the hardware and datacenter infrastructure.</p>








<section data-type="sect2" data-pdf-bookmark="Managing Machines"><div class="sect2" id="idm140203538645200">
<h2>Managing Machines</h2>

<p><em>Borg</em>, <a data-type="indexterm" data-primary="system software" data-secondary="managing machines" id="idm140203538643616"></a><a data-type="indexterm" data-primary="Apache Mesos" id="idm140203538642672"></a><a data-type="indexterm" data-primary="machines" data-secondary="managing with software" id="idm140203538642000"></a>illustrated in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#fig_production-environment_borg">Figure&nbsp;2-2</a>, is a distributed cluster operating system <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Ver15">[Ver15]</a>, similar to
Apache Mesos.<sup><a data-type="noteref" id="idm140203538639168-marker" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538639168">2</a></sup> Borg manages its jobs at the cluster level.</p>

<figure><div id="fig_production-environment_borg" class="figure">
<img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/srle_0202.png" alt="High-level Borg cluster architecture." width="1251" height="784">
<h6><span class="label">Figure 2-2. </span>High-level Borg cluster architecture</h6>
</div></figure>

<p><a data-type="indexterm" data-primary="jobs" id="idm140203538633216"></a><a data-type="indexterm" data-primary="tasks" data-secondary="defined" id="idm140203538632544"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="jobs" id="idm140203538631600"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="tasks" id="idm140203538630640"></a>Borg is responsible for running users’ <em>jobs</em>, which can either be
indefinitely running servers or batch processes like a MapReduce
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Dea04">[Dea04]</a>. Jobs can consist of more than one (and sometimes
thousands) of identical <em>tasks</em>, both for reasons of reliability and
because a single process can’t usually handle all cluster
traffic. When Borg starts a job, it finds machines for the tasks and
tells the machines to start the server program. Borg then continually
monitors these tasks. If a task malfunctions, it is killed and
restarted, possibly on a different machine.</p>

<p><a data-type="indexterm" data-primary="Borg Naming Service (BNS)" id="idm140203538627216"></a>Because tasks are fluidly allocated over machines, we can’t simply rely on IP addresses and port numbers to refer to the tasks. We solve this problem with an extra level of indirection:
when starting a job, Borg allocates a name and index number to each
task using the <em>Borg Naming Service</em> (BNS). Rather than
using the IP address and port number, other processes connect to Borg
tasks via the BNS name, which is translated to an IP address and
port number by BNS. For example, the BNS path might be a string such as
<code>/bns/&lt;<em>cluster</em>&gt;/&lt;<em>user</em>&gt;/&lt;<em>job name</em>&gt;/&lt;<em>task number</em>&gt;</code>, which would resolve
to <code>&lt;<em>IP address</em>&gt;:&lt;<em>port</em>&gt;</code>.</p>

<p><a data-type="indexterm" data-primary="resources" data-secondary="allocation of" id="idm140203538621568"></a>Borg is also responsible for the allocation of resources to
jobs. Every job needs to specify its required resources (e.g., 3 CPU
cores, 2 GiB of RAM). Using the list of requirements for all jobs, Borg
can binpack the tasks over the machines in an optimal way that also
accounts for failure domains (for example: Borg won’t run all of a
job’s tasks on the same rack, as doing so means that the top of rack
switch is a single point of failure for that job).</p>

<p>If a task tries to
use more resources than it requested, Borg kills the task and
restarts it (as a slowly crashlooping task is usually preferable to a
task that hasn’t been restarted at all).<a data-type="indexterm" data-primary="" data-startref="borg2" id="idm140203538619392"></a></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Storage"><div class="sect2" id="idm140203538618128">
<h2>Storage</h2>

<p><a data-type="indexterm" data-primary="system software" data-secondary="storage" id="idm140203538616992"></a><a data-type="indexterm" data-primary="Lustre" id="idm140203538616048"></a><a data-type="indexterm" data-primary="Hadoop Distributed File System (HDFS)" id="idm140203538615376"></a><a data-type="indexterm" data-primary="storage stack" id="idm140203538614688"></a>Tasks can use the local disk on machines as a scratch pad, but we have
several cluster storage options for permanent storage (and even
scratch space will eventually move to the cluster storage model).  These are
comparable to Lustre and the Hadoop Distributed File System (HDFS),
which are both open source cluster filesystems.</p>

<p>The storage layer is responsible for offering users easy and reliable
access to the storage available for a cluster. As shown in
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#fig_production-environment_storage-stack">Figure&nbsp;2-3</a>, storage has many layers:</p>
<ol>
<li>
<p><a data-type="indexterm" data-primary="D storage layer" id="idm140203538611248"></a>The lowest layer is called <em>D</em> (for <em>disk</em>, although D uses both
spinning disks and flash storage). D is a fileserver running on
almost all machines in a cluster. However, users who want to access
their data don’t want to have to remember which machine is storing
their data, which is where the next layer comes into play.</p>
</li>
<li>
<p><a data-type="indexterm" data-primary="Colossus" id="idm140203538608496"></a>A layer on top of D called <em>Colossus</em> creates a cluster-wide
filesystem that offers usual filesystem semantics, as well as
replication and encryption. Colossus is the successor to GFS, the Google File System <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Ghe03">[Ghe03]</a>.</p>
</li>
<li>
<p>There are several database-like services built on top of Colossus:</p>
<ol>
<li>
<p><a data-type="indexterm" data-primary="Bigtable" id="idm140203538604480"></a>Bigtable <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Cha06">[Cha06]</a> is a NoSQL database system that can handle
databases that are petabytes in size. A Bigtable is a sparse,
distributed, persistent multidimensional sorted map that is indexed
by row key, column key, and timestamp; each value in the map is
an uninterpreted array of bytes. Bigtable supports
eventually consistent, cross-datacenter replication.</p>
</li>
<li>
<p><a data-type="indexterm" data-primary="Spanner" id="idm140203538601760"></a>Spanner <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Cor12">[Cor12]</a> offers an SQL-like interface for users that
require real consistency across the world.</p>
</li>
<li>
<p><a data-type="indexterm" data-primary="Blobstore" id="idm140203538599392"></a>Several other database systems, such as <em>Blobstore</em>, are
available. Each of these options comes with its own set of trade-offs
(see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch26.html#chapter_data-integrity">Chapter&nbsp;26</a>).</p>
</li>

</ol>
</li>

</ol>

<figure><div id="fig_production-environment_storage-stack" class="figure">
<img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/srle_0203.png" alt="Portions of the Google storage stack." width="898" height="901">
<h6><span class="label">Figure 2-3. </span>Portions of the Google storage stack</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Networking"><div class="sect2" id="idm140203538594288">
<h2>Networking</h2>

<p><a data-type="indexterm" data-primary="networking" id="idm140203538593152"></a>Google’s network hardware is controlled in several ways. As discussed
earlier, we use an OpenFlow-based software-defined network. Instead of
using “smart” routing hardware, we rely on less expensive
“dumb” switching components in combination with a central (duplicated)
controller that precomputes best paths across the network.  Therefore,
we’re able to move compute-expensive routing decisions away from the
routers and use simple switching hardware.</p>

<p><a data-type="indexterm" data-primary="Bandwidth Enforcer (BwE)" id="idm140203538591584"></a>Network bandwidth needs to be allocated wisely. Just as Borg limits
the compute resources that a task can use, the Bandwidth Enforcer (BwE)
manages the available bandwidth to maximize the average available bandwidth. Optimizing bandwidth isn’t just about cost:
centralized traffic engineering has been shown to solve a number of
problems that are traditionally extremely difficult to solve through a
combination of distributed routing and traffic engineering <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Kum15">[Kum15]</a>.</p>

<p><a data-type="indexterm" data-primary="Global Software Load Balancer (GSLB)" id="idm140203538589168"></a>Some services have jobs running in multiple clusters, which are
distributed across the world. In order to minimize latency for
globally distributed services, we want to direct users to the closest
datacenter with available capacity. Our <em>Global Software Load Balancer</em>
(GSLB) performs load balancing on three levels:</p>

<ul>
<li>
<p>Geographic load balancing for DNS requests (for example, to
<em>www.google.com</em>), described in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch19.html#chapter_load-balance-frontend">Chapter&nbsp;19</a></p>
</li>
<li>
<p>Load balancing at a user service level (for example, YouTube or
Google Maps)</p>
</li>
<li>
<p>Load balancing at the Remote Procedure Call (RPC) level, described in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch20.html#chapter_load-balance-datacenter">Chapter&nbsp;20</a></p>
</li>
</ul>

<p>Service owners specify a symbolic name for a service, a list of BNS
addresses of servers, and the capacity available at each of the locations (typically measured
in queries per second). GSLB then directs
traffic to the BNS addresses.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Other System Software"><div class="sect1" id="idm140203538581584">
<h1>Other System Software</h1>

<p>Several other components in a datacenter are also important.</p>








<section data-type="sect2" data-pdf-bookmark="Lock Service"><div class="sect2" id="idm140203538580160">
<h2>Lock Service</h2>

<p><a data-type="indexterm" data-primary="Chubby lock service" id="idm140203538579024"></a><a data-type="indexterm" data-primary="lock services" id="idm140203538578352"></a>The <em>Chubby</em> <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Bur06">[Bur06]</a> lock service provides a filesystem-like API
for maintaining locks. Chubby handles these locks across
datacenter locations. It uses the Paxos protocol for asynchronous
Consensus (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch23.html#chapter_distributed-consensus">Chapter&nbsp;23</a>).</p>

<p>Chubby also plays an important role in master election. When a service
has five replicas of a job running for reliability purposes but only
one replica may perform actual work, Chubby is used to select <em>which</em>
replica may proceed.</p>

<p>Data that must be consistent is well suited to storage in Chubby. For
this reason, BNS uses Chubby to store mapping between BNS paths and
<code>IP address:port</code> pairs.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Monitoring and Alerting"><div class="sect2" id="idm140203538572800">
<h2>Monitoring and Alerting</h2>

<p><a data-type="indexterm" data-primary="Borgmon" data-secondary="alerting" id="idm140203538571664"></a><a data-type="indexterm" data-primary="monitoring distributed systems" data-secondary="software for" id="idm140203538570720"></a><a data-type="indexterm" data-primary="alerts" data-secondary="software for" data-seealso="Borgmon; time-series monitoring" id="idm140203538569760"></a>We want to make sure that all services are running as
required. Therefore, we run many instances of our <em>Borgmon</em> monitoring
program (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch10.html#chapter_borgmon">Chapter&nbsp;10</a>). Borgmon regularly “scrapes” metrics from monitored servers.
These metrics can be used instantaneously for alerting and
also stored for use in historic overviews (e.g., graphs).  We can use
monitoring in several ways:</p>

<ul class="pagebreak-before">
<li>
<p>Set up alerting for acute problems.</p>
</li>
<li>
<p>Compare behavior: did a software update make the server faster?</p>
</li>
<li>
<p>Examine how resource consumption behavior evolves over time, which
is essential for capacity planning.<a data-type="indexterm" data-primary="" data-startref="GPEsys2" id="idm140203538563616"></a><a data-type="indexterm" data-primary="" data-startref="Hsoft2" id="idm140203538562672"></a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Our Software Infrastructure"><div class="sect1" id="idm140203538560928">
<h1>Our Software Infrastructure</h1>

<p><a data-type="indexterm" data-primary="Google production environment" data-secondary="software infrastructure" id="idm140203538559776"></a>Our software architecture is designed to make the most efficient use
of our hardware infrastructure. Our code is heavily multithreaded, so
one task can easily use many cores. To facilitate dashboards,
monitoring, and debugging, every server has an HTTP server that
provides diagnostics and statistics for a given task.</p>

<p><a data-type="indexterm" data-primary="Remote Procedure Call (RPC)" id="idm140203538558064"></a><a data-type="indexterm" data-primary="Stubby" id="idm140203538557376"></a>All of Google’s services communicate using a Remote Procedure Call
(RPC) infrastructure named <em>Stubby</em>; an open source version, gRPC, is
available.<sup><a data-type="noteref" id="idm140203538555984-marker" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538555984">3</a></sup>
Often, an RPC call is made even when a call to a subroutine in the
local program needs to be performed. This makes it easier to refactor
the call into a different server if more modularity is needed, or when
a server’s codebase grows. GSLB can load balance RPCs in the same way
it load balances externally visible services.</p>

<p><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="frontend/backend" id="idm140203538553552"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="clients" id="idm140203538552592"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="servers" id="idm140203538551632"></a><a data-type="indexterm" data-primary="clients" id="idm140203538550672"></a><a data-type="indexterm" data-primary="servers" data-secondary="vs. clients" data-secondary-sortas="clients" id="idm140203538550000"></a><a data-type="indexterm" data-primary="backend servers" id="idm140203538548784"></a>A server receives RPC requests from its <em>frontend</em> and sends RPCs to
its <em>backend</em>. In traditional terms, the frontend is called the client
and the backend is called the server.</p>

<p><a data-type="indexterm" data-primary="protocol buffers (protobufs)" id="idm140203538546656"></a><a data-type="indexterm" data-primary="terminology (Google-specific)" data-secondary="protocol buffers (protobufs)" id="idm140203538545968"></a>Data is transferred to and from an RPC using <em>protocol
buffers</em>,<sup><a data-type="noteref" id="idm140203538544352-marker" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538544352">4</a></sup>
often abbreviated to “protobufs,” which are similar to Apache’s
Thrift. Protocol buffers have many advantages over XML for serializing
structured data: they are simpler to use, 3 to 10 times smaller, 20 to
100 times faster, and less ambiguous.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Our Development Environment"><div class="sect1" id="idm140203538541776">
<h1>Our Development Environment</h1>

<p><a data-type="indexterm" data-primary="Google production environment" data-secondary="development environment" id="idm140203538540624"></a><a data-type="indexterm" data-primary="development environment" id="idm140203538871152"></a>Development velocity is very important to Google, so we’ve built a
complete development environment to make use of our infrastructure
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Mor12b">[Mor12b]</a>.</p>

<p>Apart from a few groups that have their own open source repositories
(e.g., Android and Chrome), Google Software Engineers work from a
single shared repository <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Pot16">[Pot16]</a>. This has a few important practical
implications for our workflows:</p>

<ul>
<li>
<p><a data-type="indexterm" data-primary="changelists (CLs)" id="idm140203538867104"></a>If engineers encounter a problem in a component outside of their
project, they can fix the problem, send the proposed changes
(“changelist,” or <em>CL</em>) to the owner for review, and submit the CL
to the mainline.</p>
</li>
<li>
<p>Changes to source code in an engineer’s own project require a
review. All software is reviewed before being submitted.</p>
</li>
</ul>

<p>When software is built, the build request is sent to build servers in
a datacenter. Even large builds are executed quickly, as many build
servers can compile in parallel. This infrastructure is also used for
continuous testing. Each time a CL is submitted, tests run on all
software that may depend on that CL, either directly or indirectly. If
the framework determines that the change likely broke other parts in
the system, it notifies the owner of the submitted change. Some
projects use a push-on-green system, where a new version is
automatically pushed to production after passing tests.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Shakespeare: A Sample Service"><div class="sect1" id="xref_production-environment_shakespeare">
<h1>Shakespeare: A Sample Service</h1>

<p><a data-type="indexterm" data-primary="Google production environment" data-secondary="Shakespeare search service" id="GPEshake2"></a><a data-type="indexterm" data-primary="Shakespeare search service, example" data-secondary="applying SRE to" id="Shake2"></a>To provide a model of how a service would hypothetically be deployed
in the Google production environment, let’s look at an example service
that interacts with multiple Google technologies. Suppose we want to
offer a service that lets you determine where a given word is used
throughout all of Shakespeare’s works.</p>

<p>We can divide this system into two parts:</p>

<ul>
<li>
<p>A batch component that reads all of Shakespeare’s texts,
creates an index, and writes the index into a Bigtable. This job
need only run once, or perhaps very infrequently (as you
never know if a new text might be discovered!).</p>
</li>
<li>
<p>An application frontend that handles end-user requests. This job is
always up, as users in all time zones will want to search in
Shakespeare’s books.</p>
</li>
</ul>

<p>The batch component is a MapReduce comprising three phases.</p>

<p>The mapping phase reads Shakespeare’s texts and splits them into
   individual words. This is faster if performed in parallel by
   multiple workers.</p>

<p>The shuffle phase sorts the tuples by word.</p>

<p>In the reduce phase, a tuple of (<em>word</em>, <em>list of locations</em>) is created.</p>

<p>Each tuple is written to a row in a Bigtable, using the word as the key.</p>








<section data-type="sect2" class="pagebreak-before" data-pdf-bookmark="Life of a Request"><div class="sect2" id="idm140203538852208">
<h2>Life of a Request</h2>

<p><a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#fig_production-environment_life-of-a-request">Figure&nbsp;2-4</a> <a data-type="indexterm" data-primary="user requests" data-secondary="servicing of" id="idm140203538849936"></a><a data-type="indexterm" data-primary="traffic analysis" id="traffic2"></a>shows how a user’s
request is serviced: first, the user points their browser to
<em>shakespeare.google.com</em>. To obtain the corresponding IP address, the
user’s device resolves the address with its DNS server (1). This
request ultimately ends up at Google’s DNS server, which talks to
GSLB. As GSLB keeps track of traffic load among frontend servers
across regions, it picks which server IP address to send to this user.</p>

<figure><div id="fig_production-environment_life-of-a-request" class="figure">
<img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/srle_0204.png" alt="Life of a request." width="953" height="699">
<h6><span class="label">Figure 2-4. </span>The life of a request</h6>
</div></figure>

<p><a data-type="indexterm" data-primary="GFE (Google Frontend)" id="idm140203538844880"></a>The browser connects to the HTTP server on this IP. This server (named
the Google Frontend, or GFE) is a reverse proxy that terminates the
TCP connection (2). The GFE looks up which service is required (web
search, maps, or—in this case—Shakespeare). Again using GSLB, the
server finds an available Shakespeare frontend server, and sends that
server an RPC containing the HTML request (3).</p>

<p>The Shakespeare server analyzes the HTML request and constructs a
protobuf containing the word to look up. The Shakespeare frontend
server now needs to contact the Shakespeare backend server: the
frontend server contacts GSLB to obtain the BNS address of a suitable
and unloaded backend server (4). That Shakespeare backend server now
contacts a Bigtable server to obtain the requested data (5).</p>

<p>The answer is written to the reply protobuf and returned to the
Shakespeare backend server. The backend hands a protobuf containing
the results to the Shakespeare <span class="keep-together">frontend</span> server, which assembles the
HTML and returns the answer to the user.</p>

<p>This entire chain of events is executed in the blink of an eye—just a
few hundred milliseconds! Because many moving parts are involved, there
are many potential points of failure; in particular, a failing GSLB
would wreak havoc. However, Google’s policies of rigorous testing and
careful rollout, in addition to our proactive error recovery methods
such as graceful degradation, allow us to deliver the reliable service
that our users have come to expect. After all, people regularly use
<em>www.google.com</em> to check if their Internet connection is set up
correctly.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Job and Data Organization"><div class="sect2" id="xref_production-environment_job-and-data-organization">
<h2>Job and Data Organization</h2>

<p><a data-type="indexterm" data-primary="user requests" data-secondary="job and data organization" id="idm140203538838432"></a><a data-type="indexterm" data-primary="N + 2 configuration" id="idm140203538837472"></a>Load testing determined that our backend server can handle about 100
queries per second (QPS). Trials performed with a limited set of users
lead us to expect a peak load of about 3,470 QPS, so we need at least
35 tasks. However, the following considerations mean that we need at
least 37 tasks in the job, or <img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/eq_1.png" alt="upper N plus 2" width="70" height="21">:</p>

<ul>
<li>
<p>During updates, one task at a time will be unavailable, leaving 36
tasks.</p>
</li>
<li>
<p>A machine failure might occur during a task update, leaving only 35
tasks, just enough to serve peak load.<sup><a data-type="noteref" id="idm140203538833648-marker" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538833648">5</a></sup></p>
</li>
</ul>

<p><a data-type="indexterm" data-primary="user requests" data-secondary="traffic analysis" id="idm140203538832256"></a>A closer examination of user traffic shows our peak usage is
distributed globally: 1,430 QPS from North America, 290 from South
America, 1,400 from Europe and Africa, and 350 from Asia and
Australia. Instead of locating all backends at one site, we
distribute them across the USA, South America, Europe, and
Asia. Allowing for <img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/eq_2.png" alt="upper N plus 2" width="70" height="21"> redundancy per region means that we end up
with 17 tasks in the USA, 16 in Europe, and 6 in Asia. However, we
decide to use 4 tasks (instead of 5) in South America, to lower the
overhead of <img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/eq_3.png" alt="upper N plus 2" width="70" height="21"> to <img src="https://www.safaribooksonline.com/library/view/site-reliability-engineering/9781491929117/assets/eq_4.png" alt="upper N plus 1" width="67" height="22">. In this case,
we’re willing to tolerate a small risk of higher latency in exchange
for lower hardware costs: if GSLB redirects traffic from one continent
to another when our South American datacenter is over capacity, we can
save 20% of the resources we’d spend on hardware.  In the larger
regions, we’ll spread tasks across two or three clusters for extra
resiliency.</p>

<p>Because the backends need to contact the Bigtable holding the data, we need
to also design this storage element strategically. A backend in Asia
contacting a Bigtable in the USA adds a significant amount of latency,
so we replicate the Bigtable in each region. Bigtable replication
helps us in two ways: it provides resilience should a <span class="keep-together">Bigtable</span> server
fail, and it lowers data-access latency. While Bigtable only offers
eventual consistency, it isn’t a major problem because we don’t need to
update the contents often.<a data-type="indexterm" data-primary="" data-startref="traffic2" id="idm140203538826496"></a></p>

<p>We’ve introduced a lot of terminology here; while you don’t need to
remember it all, it’s useful for framing many of the
other systems we’ll refer to later.<a data-type="indexterm" data-primary="" data-startref="GPEshake2" id="idm140203538824960"></a><a data-type="indexterm" data-primary="" data-startref="Shake2" id="idm140203538824016"></a></p>
</div></section>





</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm140203538917056"><sup><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538917056-marker">1</a></sup> Well, <em>roughly</em> the same. Mostly. Except for the stuff that is different. Some datacenters end up with multiple generations of compute hardware, and sometimes we augment datacenters after they are built. But for the most part, our datacenter hardware is homogeneous.</p><p data-type="footnote" id="idm140203538639168"><sup><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538639168-marker">2</a></sup> Some readers may be more familiar with Borg’s descendant, Kubernetes—an open source Container Cluster orchestration framework started by Google in 2014; see <a href="http://kubernetes.io/"><em class="hyperlink">http://kubernetes.io</em></a> and <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Bur16">[Bur16]</a>. For more details on the similarities between Borg and Apache Mesos, see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/bibliography01.html#Ver15">[Ver15]</a>.</p><p data-type="footnote" id="idm140203538555984"><sup><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538555984-marker">3</a></sup> See <a href="http://grpc.io/"><em class="hyperlink">http://grpc.io</em></a>.</p><p data-type="footnote" id="idm140203538544352"><sup><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538544352-marker">4</a></sup> Protocol buffers are a language-neutral, platform-neutral extensible mechanism for serializing structured data. For more details, see <a href="https://developers.google.com/protocol-buffers/"><em class="hyperlink">https://developers.google.com/protocol-buffers/</em></a>.</p><p data-type="footnote" id="idm140203538833648"><sup><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#idm140203538833648-marker">5</a></sup> We assume the probability of two simultaneous task failures in our environment is low enough to be negligible.  Single points of failure, such as top-of-rack switches or power distribution, may make this assumption invalid in other environments.</p></div></div></section></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/library/view/site-reliability-engineering/9781491929117/ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Introduction</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/library/view/site-reliability-engineering/9781491929117/part02.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">II. Principles</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491929117/chapter/ch02.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
  <div class="js-related-container related"></div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
    


  

<div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/site-reliability-engineering/9781491929117/ch02.html#">Reset</a>
</div>
</div></body></html>