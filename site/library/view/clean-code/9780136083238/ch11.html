<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/clean-code/9780136083238/ch11.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9780136083238"
  data-publishers="Prentice Hall"



  data-htmlfile-name="ch11.html"
  data-epub-title="Clean Code" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/clean-code/9780136083238/ch11.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9780136083238" data-publishers="Prentice Hall" data-htmlfile-name="ch11.html" data-epub-title="Clean Code" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9780136083238"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>11. Systems - Clean Code</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book"></style><link rel="canonical" href="/Library/view/clean-code/9780136083238/ch11.html"><meta name="description" content="Chapter&nbsp;11.&nbsp;Systems <authorgroup>by Dr. Kevin Dean Wampler</authorgroup> &nbsp; “Complexity kills. It sucks the life out of developers, it makes products difficult to plan, build, and test.” &nbsp; &nbsp; --Ray Ozzie, CTO ... "><meta property="og:title" content="11. Systems"><meta itemprop="isPartOf" content="/library/view/clean-code/9780136083238/"><meta itemprop="name" content="11. Systems"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/clean-code/9780136083238/ch11.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9780136083238/"><meta property="og:description" itemprop="description" content="Chapter&nbsp;11.&nbsp;Systems <authorgroup>by Dr. Kevin Dean Wampler</authorgroup> &nbsp; “Complexity kills. It sucks the life out of developers, it makes products difficult to plan, build, and test.” &nbsp; &nbsp; --Ray Ozzie, CTO ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Prentice Hall"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9780136083238"><meta property="og:book:author" itemprop="author" content="Robert C. Martin"><meta property="og:book:tag" itemprop="about" content="Agile"><meta property="og:book:tag" itemprop="about" content="Core Programming"><meta property="og:book:tag" itemprop="about" content="Lean"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Clean Code
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9780136083238/chapter/ch11.html" data-for-analytics="9780136083238:ch11.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/clean-code/9780136083238/ch11.html&amp;text=Clean%20Code&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/clean-code/9780136083238/ch11.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/clean-code/9780136083238/ch11.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%2011.%20Systems&amp;body=https://www.safaribooksonline.com/library/view/clean-code/9780136083238/ch11.html%0D%0Afrom%20Clean%20Code%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/Library/view/clean-code/9780136083238/ch10.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">10. Classes</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/Library/view/clean-code/9780136083238/ch12.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">12. Emergence</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="ch11"></a>Chapter&nbsp;11.&nbsp;Systems</h1></div></div></div><span style="color: red">&lt;authorgroup&gt;by Dr. Kevin Dean Wampler&lt;/authorgroup&gt;</span><div class="mediaobject"><a id="f153fig01"></a><img src="https://www.safaribooksonline.com/library/view/clean-code/9780136083238/graphics/11_1fig_martin.jpg" width="350" alt="Systems" height="446" data-mfp-src="/library/view/clean-code/9780136083238/graphics/11_1fig_martin.jpg"></div><div class="blockquote"><table border="0" class="blockquote" summary="Block quote"><tbody><tr><td valign="top">&nbsp;</td><td valign="top"><p><span class="italic">“Complexity kills. It sucks the life out of developers, it makes products difficult to plan, build, and test.”</span></p></td><td valign="top">&nbsp;</td></tr><tr><td valign="top">&nbsp;</td><td colspan="2" align="right" valign="top">--<span class="attribution">Ray Ozzie, CTO, Microsoft Corporation</span></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec1"></a>How Would You Build a City?</h1></div></div></div><p><a id="iddle1297" class="indexterm"></a><a id="iddle1343" class="indexterm"></a><a id="iddle1771" class="indexterm"></a><a id="iddle2088" class="indexterm"></a><a id="iddle2198" class="indexterm"></a><a id="iddle2243" class="indexterm"></a><a id="iddle2388" class="indexterm"></a>Could you manage all the details yourself? Probably not. Even managing an existing city is too much for one person. Yet, cities work (most of the time). They work because cities have teams of people who manage particular parts of the city, the water systems, power systems, traffic, law enforcement, building codes, and so forth. Some of those people are responsible for the <span class="emphasis"><em>big picture</em></span>, while others focus on the details.</p><p>Cities also work because they have evolved appropriate levels of abstraction and modularity that make it possible for individuals and the “components” they manage to work effectively, even without understanding the big picture.</p><p>Although software teams are often organized like that too, the systems they work on often don’t have the same separation of concerns and levels of abstraction. Clean code helps us achieve this at the lower levels of abstraction. In this chapter let us consider how to stay clean at higher levels of abstraction, the <span class="emphasis"><em>system</em></span> level.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec2"></a>Separate Constructing a System from Using It</h1></div></div></div><p>First, consider that <span class="emphasis"><em>construction</em></span> is a very different process from <span class="emphasis"><em>use</em></span>. As I write this, there is a new hotel under construction that I see out my window in Chicago. Today it is a bare concrete box with a construction crane and elevator bolted to the outside. The busy people there all wear hard hats and work clothes. In a year or so the hotel will be finished. The crane and elevator will be gone. The building will be clean, encased in glass window walls and attractive paint. The people working and staying there will look a lot different too.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic">Software systems should separate the startup process, when the application objects are constructed and the dependencies are “wired” together, from the runtime logic that takes over after startup.</span></p></blockquote></div><p>The startup process is a <span class="emphasis"><em>concern</em></span> that any application must address. It is the first <span class="emphasis"><em>concern</em></span> that we will examine in this chapter. The <span class="emphasis"><em>separation of concerns</em></span> is one of the oldest and most important design techniques in our craft.</p><p>Unfortunately, most applications don’t separate this concern. The code for the startup process is ad hoc and it is mixed in with the runtime logic. Here is a typical example:</p><div class="informalexample"><pre class="programlisting">public Service getService() {
  if (service == null)
    service = new MyServiceImpl(...); // Good enough default for most cases?
  return service;
}</pre></div><p>This is the LAZY INITIALIZATION/EVALUATION idiom, and it has several merits. We don’t incur the overhead of construction unless we actually use the object, and our startup times can be faster as a result. We also ensure that <code class="literal">null</code> is never returned.</p><p><a id="iddle1340" class="indexterm"></a><a id="iddle1354" class="indexterm"></a><a id="iddle1543" class="indexterm"></a><a id="iddle1627" class="indexterm"></a><a id="iddle1809" class="indexterm"></a><a id="iddle1841" class="indexterm"></a><a id="iddle2131" class="indexterm"></a><a id="iddle2153" class="indexterm"></a><a id="iddle2272" class="indexterm"></a><a id="iddle2285" class="indexterm"></a>However, we now have a hard-coded dependency on <code class="literal">MyServiceImpl</code> and everything its constructor requires (which I have elided). We can’t compile without resolving these dependencies, even if we never actually use an object of this type at runtime!</p><p>Testing can be a problem. If <code class="literal">MyServiceImpl</code> is a heavyweight object, we will need to make sure that an appropriate T<span class="smaller">EST</span> D<span class="smaller">OUBLE</span><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn01" class="footnote" id="ch11fn01"><sup class="footnote">[1]</sup></a> or M<span class="smaller">OCK</span> O<span class="smaller">BJECT</span> gets assigned to the service field before this method is called during unit testing. Because we have construction logic mixed in with normal runtime processing, we should test all execution paths (for example, the <code class="literal">null</code> test and its block). Having both of these responsibilities means that the method is doing more than one thing, so we are breaking the <span class="emphasis"><em>Single Responsibility Principle</em></span> in a small way.</p><p>Perhaps worst of all, we do not know whether <code class="literal">MyServiceImpl</code> is the right object in all cases. I implied as much in the comment. Why does the class with this method have to know the global context? Can we <span class="emphasis"><em>ever</em></span> really know the right object to use here? Is it even possible for one type to be right for all possible contexts?</p><p>One occurrence of <span class="smaller">LAZY-INITIALIZATION</span> isn’t a serious problem, of course. However, there are normally many instances of little setup idioms like this in applications. Hence, the global setup <span class="emphasis"><em>strategy</em></span> (if there is one) is <span class="emphasis"><em>scattered</em></span> across the application, with little modularity and often significant duplication.</p><p>If we are <span class="emphasis"><em>diligent</em></span> about building well-formed and robust systems, we should never let little, <span class="emphasis"><em>convenient</em></span> idioms lead to modularity breakdown. The startup process of object construction and wiring is no exception. We should modularize this process separately from the normal runtime logic and we should make sure that we have a global, consistent strategy for resolving our major dependencies.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lev2sec1"></a>Separation of Main</h2></div></div></div><p>One way to separate construction from use is simply to move all aspects of construction to <code class="literal">main</code>, or modules called by <code class="literal">main</code>, and to design the rest of the system assuming that all objects have been constructed and wired up appropriately. (See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fig01">Figure 11-1</a>.)</p><div class="figure-float" style="float: left;"><div class="figure"><a id="ch11fig01"></a><div class="figure-contents"><div class="mediaobject"><img src="https://www.safaribooksonline.com/library/view/clean-code/9780136083238/graphics/11_2fig_martin.gif" height="178" alt="Separating construction in main()" width="360" data-mfp-src="/library/view/clean-code/9780136083238/graphics/11_2fig_martin.gif"></div></div><p class="title"><strong>Figure&nbsp;11-1.&nbsp;Separating construction in <code class="literal">main()</code></strong></p></div></div><p>The flow of control is easy to follow. The <code class="literal">main</code> function builds the objects necessary for the system, then passes them to the application, which simply uses them. Notice the direction of the dependency arrows crossing the barrier between <code class="literal">main</code> and the application. They all go one direction, pointing away from main. This means that the application has no knowledge of <code class="literal">main</code> or of the construction process. It simply expects that everything has been built properly.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lev2sec2"></a>Factories</h2></div></div></div><p>Sometimes, of course, we need to make the application responsible for <span class="emphasis"><em>when</em></span> an object gets created. For example, in an order processing system the application must create the <a id="iddle1009" class="indexterm"></a><a id="iddle1049" class="indexterm"></a><a id="iddle1341" class="indexterm"></a><a id="iddle1342" class="indexterm"></a><a id="iddle1363" class="indexterm"></a><a id="iddle1409" class="indexterm"></a><a id="iddle1810" class="indexterm"></a><code class="literal">LineItem</code> instances to add to an <code class="literal">Order</code>. In this case we can use the A<span class="smaller">BSTRACT</span> F<span class="smaller">ACTORY</span><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn02" class="footnote" id="ch11fn02"><sup class="footnote">[2]</sup></a> pattern to give the application control of <span class="emphasis"><em>when</em></span> to build the <code class="literal">LineItems</code>, but keep the details of that construction separate from the application code. (See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fig02">Figure 11-2</a>.)</p><div class="figure-float" style="float: left;"><div class="figure"><a id="ch11fig02"></a><div class="figure-contents"><div class="mediaobject"><img src="https://www.safaribooksonline.com/library/view/clean-code/9780136083238/graphics/11_3fig_martin.gif" height="248" alt="Separation construction with factory" width="500" data-mfp-src="/library/view/clean-code/9780136083238/graphics/11_3fig_martin.gif"></div></div><p class="title"><strong>Figure&nbsp;11-2.&nbsp;Separation construction with factory</strong></p></div></div><p>Again notice that all the dependencies point from <code class="literal">main</code> toward the <code class="literal">OrderProcessing</code> application. This means that the application is decoupled from the details of how to build a <code class="literal">LineItem</code>. That capability is held in the <code class="literal">LineItemFactoryImplementation</code>, which is on the <code class="literal">main</code> side of the line. And yet the application is in complete control of when the <code class="literal">LineItem</code> instances get built and can even provide application-specific constructor arguments.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lev2sec3"></a>Dependency Injection</h2></div></div></div><p><a id="iddle1344" class="indexterm"></a><a id="iddle1416" class="indexterm"></a><a id="iddle1421" class="indexterm"></a><a id="iddle1441" class="indexterm"></a><a id="iddle1722" class="indexterm"></a><a id="iddle1754" class="indexterm"></a><a id="iddle1772" class="indexterm"></a><a id="iddle1941" class="indexterm"></a><a id="iddle2090" class="indexterm"></a><a id="iddle2130" class="indexterm"></a><a id="iddle2158" class="indexterm"></a><a id="iddle2187" class="indexterm"></a>A powerful mechanism for separating construction from use is <span class="emphasis"><em>Dependency Injection</em></span> (DI), the application of <span class="emphasis"><em>Inversion of Control</em></span> (IoC) to dependency management.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn03" class="footnote" id="ch11fn03"><sup class="footnote">[3]</sup></a> Inversion of Control moves secondary responsibilities from an object to other objects that are dedicated to the purpose, thereby supporting the <span class="emphasis"><em>Single Responsibility Principle.</em></span> In the context of dependency management, an object should not take responsibility for instantiating dependencies itself. Instead, it should pass this responsibility to another “authoritative” mechanism, thereby inverting the control. Because setup is a global concern, this authoritative mechanism will usually be either the “main” routine or a special-purpose <span class="emphasis"><em>container.</em></span></p><p>JNDI lookups are a “partial” implementation of DI, where an object asks a directory server to provide a “service” matching a particular name.</p><div class="informalexample"><pre class="programlisting">MyService myService = (MyService)(jndiContext.lookup("NameOfMyService"));</pre></div><p>The invoking object doesn’t control what kind of object is actually returned (as long it implements the appropriate interface, of course), but the invoking object still actively resolves the dependency.</p><p>True Dependency Injection goes one step further. The class takes no direct steps to resolve its dependencies; it is completely passive. Instead, it provides setter methods or constructor arguments (or both) that are used to <span class="emphasis"><em>inject</em></span> the dependencies. During the construction process, the DI container instantiates the required objects (usually on demand) and uses the constructor arguments or setter methods provided to wire together the dependencies. Which dependent objects are actually used is specified through a configuration file or programmatically in a special-purpose construction module.</p><p>The Spring Framework provides the best known DI container for Java.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn04" class="footnote" id="ch11fn04"><sup class="footnote">[4]</sup></a> You define which objects to wire together in an XML configuration file, then you ask for particular objects by name in Java code. We will look at an example shortly.</p><p>But what about the virtues of <span class="smaller">LAZY-INITIALIZATION</span>? This idiom is still sometimes useful with DI. First, most DI containers won’t construct an object until needed. Second, many of these containers provide mechanisms for invoking factories or for constructing proxies, which could be used for <span class="smaller">LAZY-EVALUATION</span> and similar <span class="emphasis"><em>optimizations</em></span>.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn05" class="footnote" id="ch11fn05"><sup class="footnote">[5]</sup></a></p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec3"></a>Scaling Up</h1></div></div></div><p>Cities grow from towns, which grow from settlements. At first the roads are narrow and practically nonexistent, then they are paved, then widened over time. Small buildings and <a id="iddle1489" class="indexterm"></a><a id="iddle1711" class="indexterm"></a><a id="iddle2171" class="indexterm"></a><a id="iddle2206" class="indexterm"></a>empty plots are filled with larger buildings, some of which will eventually be replaced with skyscrapers.</p><p>At first there are no services like power, water, sewage, and the Internet (gasp!). These services are also added as the population and building densities increase.</p><p>This growth is not without pain. How many times have you driven, bumper to bumper through a road “improvement” project and asked yourself, “Why didn’t they build it wide enough the first time!?”</p><p>But it couldn’t have happened any other way. Who can justify the expense of a six-lane highway through the middle of a small town that anticipates growth? Who would <span class="emphasis"><em>want</em></span> such a road through their town?</p><p>It is a myth that we can get systems “right the first time.” Instead, we should implement only today’s <span class="emphasis"><em>stories</em></span>, then refactor and expand the system to implement new stories tomorrow. This is the essence of iterative and incremental agility. Test-driven development, refactoring, and the clean code they produce make this work at the code level.</p><p>But what about at the system level? Doesn’t the system architecture require preplanning? Certainly, <span class="emphasis"><em>it</em></span> can’t grow incrementally from simple to complex, can it?</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic">Software systems are unique compared to physical systems. Their architectures can grow incrementally, <span class="strong"><strong>if</strong></span> we maintain the proper separation of concerns.</span></p></blockquote></div><p>The ephemeral nature of software systems makes this possible, as we will see. Let us first consider a counterexample of an architecture that doesn’t separate concerns adequately.</p><p>The original EJB1 and EJB2 architectures did not separate concerns appropriately and thereby imposed unnecessary barriers to organic growth. Consider an <span class="emphasis"><em>Entity Bean</em></span> for a persistent <code class="literal">Bank</code> class. An entity bean is an in-memory representation of relational data, in other words, a table row.</p><p>First, you had to define a local (in process) or remote (separate JVM) interface, which clients would use. <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11ex01">Listing 11-1</a> shows a possible local interface:</p><div class="example"><a id="ch11ex01"></a><p class="title"><strong>Example&nbsp;11-1.&nbsp;<code class="literal">An EJB2 local interface for a Bank EJB</code></strong></p><div class="example-contents"><pre class="programlisting">package com.example.banking;
import java.util.Collections;
import javax.ejb.*;

public interface BankLocal extends java.ejb.EJBLocalObject {
  String getStreetAddr1() throws EJBException;
  String getStreetAddr2() throws EJBException;
  String getCity() throws EJBException;
  String getState() throws EJBException;
  String getZipCode() throws EJBException;
  void setStreetAddr1(String street1) throws EJBException;
  void setStreetAddr2(String street2) throws EJBException;
  void setCity(String city) throws EJBException;
  void setState(String state) throws EJBException;
  void setZipCode(String zip) throws EJBException;
  Collection getAccounts() throws EJBException;
  void setAccounts(Collection accounts) throws EJBException;
  void addAccount(AccountDTO accountDTO) throws EJBException;
}</pre></div></div><p>I have shown several attributes for the <code class="literal">Bank</code>’s address and a collection of accounts that the bank owns, each of which would have its data handled by a separate <code class="literal">Account</code> EJB. <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11ex02">Listing 11-2</a> shows the corresponding implementation class for the <code class="literal">Bank</code> bean.</p><div class="example"><a id="ch11ex02"></a><p class="title"><strong>Example&nbsp;11-2.&nbsp;<code class="literal">The corresponding EJB2 Entity Bean Implementation</code></strong></p><div class="example-contents"><pre class="programlisting">package com.example.banking;
import java.util.Collections;
import javax.ejb.*;

public abstract class Bank implements javax.ejb.EntityBean {
  // Business logic...
  public abstract String getStreetAddr1();
  public abstract String getStreetAddr2();
  public abstract String getCity();
  public abstract String getState();
  public abstract String getZipCode();
  public abstract void setStreetAddr1(String street1);
  public abstract void setStreetAddr2(String street2);
  public abstract void setCity(String city);
  public abstract void setState(String state);
  public abstract void setZipCode(String zip);
  public abstract Collection getAccounts();
  public abstract void setAccounts(Collection accounts);
  public void addAccount(AccountDTO accountDTO) {
    InitialContext context = new InitialContext();
    AccountHomeLocal accountHome = context.lookup("AccountHomeLocal");
    AccountLocal account = accountHome.create(accountDTO);
    Collection accounts = getAccounts();
    accounts.add(account);
  }
  // EJB container logic
  public abstract void setId(Integer id);
  public abstract Integer getId();
  public Integer ejbCreate(Integer id) { ... }
  public void ejbPostCreate(Integer id) { ... }
  // The rest had to be implemented but were usually empty:
  public void setEntityContext(EntityContext ctx) {}
  public void unsetEntityContext() {}
  public void ejbActivate() {}
  public void ejbPassivate() {}
  public void ejbLoad() {}
  public void ejbStore() {}
  public void ejbRemove() {}
}</pre></div></div><p><a id="iddle1042" class="indexterm"></a><a id="iddle1077" class="indexterm"></a><a id="iddle1079" class="indexterm"></a><a id="iddle1296" class="indexterm"></a><a id="iddle1372" class="indexterm"></a><a id="iddle1390" class="indexterm"></a><a id="iddle1459" class="indexterm"></a><a id="iddle1479" class="indexterm"></a><a id="iddle1719" class="indexterm"></a><a id="iddle1968" class="indexterm"></a><a id="iddle2381" class="indexterm"></a><a id="iddle2427" class="indexterm"></a>I haven’t shown the corresponding <span class="emphasis"><em>LocalHome</em></span> interface, essentially a factory used to create objects, nor any of the possible <code class="literal">Bank</code> finder (query) methods you might add.</p><p>Finally, you had to write one or more XML deployment descriptors that specify the object-relational mapping details to a persistence store, the desired transactional behavior, security constraints, and so on.</p><p>The business logic is tightly coupled to the EJB2 application “container.” You must subclass container types and you must provide many lifecycle methods that are required by the container.</p><p>Because of this coupling to the heavyweight container, isolated unit testing is difficult. It is necessary to mock out the container, which is hard, or waste a lot of time deploying EJBs and tests to a real server. Reuse outside of the EJB2 architecture is effectively impossible, due to the tight coupling.</p><p>Finally, even object-oriented programming is undermined. One bean cannot inherit from another bean. Notice the logic for adding a new account. It is common in EJB2 beans to define “data transfer objects” (DTOs) that are essentially “structs” with no behavior. This usually leads to redundant types holding essentially the same data, and it requires boilerplate code to copy data from one object to another.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lev2sec4"></a>Cross-Cutting Concerns</h2></div></div></div><p>The EJB2 architecture comes close to true separation of concerns in some areas. For example, the desired transactional, security, and some of the persistence behaviors are declared in the deployment descriptors, independently of the source code.</p><p>Note that <span class="emphasis"><em>concerns</em></span> like persistence tend to cut across the natural object boundaries of a domain. You want to persist all your objects using generally the same strategy, for example, using a particular DBMS<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn06" class="footnote" id="ch11fn06"><sup class="footnote">[6]</sup></a> versus flat files, following certain naming conventions for tables and columns, using consistent transactional semantics, and so on.</p><p>In principle, you can reason about your persistence strategy in a modular, encapsulated way. Yet, in practice, you have to spread essentially the same code that implements the persistence strategy across many objects. We use the term <span class="emphasis"><em>cross-cutting concerns</em></span> for concerns like these. Again, the persistence framework might be modular and our domain logic, in isolation, might be modular. The problem is the fine-grained <span class="emphasis"><em>intersection</em></span> of these domains.</p><p>In fact, the way the EJB architecture handled persistence, security, and transactions, “anticipated” <span class="emphasis"><em>aspect-oriented programming</em></span> (AOP),<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn07" class="footnote" id="ch11fn07"><sup class="footnote">[7]</sup></a> which is a general-purpose approach to restoring modularity for cross-cutting concerns.</p><p>In AOP, modular constructs called <span class="emphasis"><em>aspects</em></span> specify which points in the system should have their behavior modified in some consistent way to support a particular concern. This specification is done using a succinct declarative or programmatic mechanism.</p><p><a id="iddle1142" class="indexterm"></a><a id="iddle1472" class="indexterm"></a><a id="iddle1729" class="indexterm"></a><a id="iddle1737" class="indexterm"></a><a id="iddle1750" class="indexterm"></a><a id="iddle1969" class="indexterm"></a>Using persistence as an example, you would declare which objects and attributes (or <span class="emphasis"><em>patterns</em></span> thereof) should be persisted and then delegate the persistence tasks to your persistence framework. The behavior modifications are made <span class="emphasis"><em>noninvasively</em></span><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn08" class="footnote" id="ch11fn08"><sup class="footnote">[8]</sup></a> to the target code by the AOP framework. Let us look at three aspects or aspect-like mechanisms in Java.</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec4"></a>Java Proxies</h1></div></div></div><p>Java proxies are suitable for simple situations, such as wrapping method calls in individual objects or classes. However, the dynamic proxies provided in the JDK only work with interfaces. To proxy classes, you have to use a byte-code manipulation library, such as CGLIB, ASM, or Javassist.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn09" class="footnote" id="ch11fn09"><sup class="footnote">[9]</sup></a></p><p><a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11ex03">Listing 11-3</a> shows the skeleton for a JDK proxy to provide persistence support for our <code class="literal">Bank</code> application, covering only the methods for getting and setting the list of accounts.</p><div class="example"><a id="ch11ex03"></a><p class="title"><strong>Example&nbsp;11-3.&nbsp;<code class="literal">JDK Proxy Example</code></strong></p><div class="example-contents"><pre class="programlisting">// Bank.java (suppressing package names...)
import java.utils.*;

// The abstraction of a bank.
public interface Bank {
  Collection&lt;Account&gt; getAccounts();
  void setAccounts(Collection&lt;Account&gt; accounts);
}

// BankImpl.java
import java.utils.*;

// The "Plain Old Java Object" (POJO) implementing the abstraction.
public class BankImpl implements Bank {
  private List&lt;Account&gt; accounts;

  public Collection&lt;Account&gt; getAccounts() {
    return accounts;
  }
  public void setAccounts(Collection&lt;Account&gt; accounts) {
    this.accounts = new ArrayList&lt;Account&gt;();
    for (Account account: accounts) {
      this.accounts.add(account);
    }
  }
}

// BankProxyHandler.java
import java.lang.reflect.*;
import java.util.*;

// "InvocationHandler" required by the proxy API.
public class BankProxyHandler implements InvocationHandler {
  private Bank bank;

  public BankHandler (Bank bank) {
    this.bank = bank;
  }

  // Method defined in InvocationHandler
  public Object invoke(Object proxy, Method method, Object[] args)
      throws Throwable {
    String methodName = method.getName();
    if (methodName.equals("getAccounts")) {
      bank.setAccounts(getAccountsFromDatabase());
      return bank.getAccounts();
    } else if (methodName.equals("setAccounts")) {
      bank.setAccounts((Collection&lt;Account&gt;) args[0]);
      setAccountsToDatabase(bank.getAccounts());
      return null;
    } else {
      ...
    }
  }

  // Lots of details here:
  protected Collection&lt;Account&gt; getAccountsFromDatabase() { ... }
  protected void setAccountsToDatabase(Collection&lt;Account&gt; accounts) { ... }
}

// Somewhere else...

Bank bank = (Bank) Proxy.newProxyInstance(
  Bank.class.getClassLoader(),
  new Class[] { Bank.class },
  new BankProxyHandler(new BankImpl()));</pre></div></div><p><a id="iddle1143" class="indexterm"></a><a id="iddle1723" class="indexterm"></a><a id="iddle1980" class="indexterm"></a>We defined an interface <code class="literal">Bank</code>, which will be <span class="emphasis"><em>wrapped</em></span> by the proxy, and a <span class="emphasis"><em>Plain-Old Java Object</em></span> (POJO), <code class="literal">BankImpl</code>, that implements the business logic. (We will revisit POJOs shortly.)</p><p>The Proxy API requires an <code class="literal">InvocationHandler</code> object that it calls to implement any <code class="literal">Bank</code> method calls made to the proxy. Our <code class="literal">BankProxyHandler</code> uses the Java reflection API to map the generic method invocations to the corresponding methods in <code class="literal">BankImpl</code>, and so on.</p><p>There is a <span class="emphasis"><em>lot</em></span> of code here and it is relatively complicated, even for this simple case.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn10" class="footnote" id="ch11fn10"><sup class="footnote">[10]</sup></a> Using one of the byte-manipulation libraries is similarly challenging. This code “volume” <a id="iddle1043" class="indexterm"></a><a id="iddle1050" class="indexterm"></a><a id="iddle1078" class="indexterm"></a><a id="iddle1735" class="indexterm"></a><a id="iddle1745" class="indexterm"></a><a id="iddle1982" class="indexterm"></a><a id="iddle2032" class="indexterm"></a><a id="iddle2186" class="indexterm"></a><a id="iddle2189" class="indexterm"></a><a id="iddle2364" class="indexterm"></a>and complexity are two of the drawbacks of proxies. They make it hard to create clean code! Also, proxies don’t provide a mechanism for specifying system-wide execution “points” of interest, which is needed for a true AOP solution.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn11" class="footnote" id="ch11fn11"><sup class="footnote">[11]</sup></a></p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec5"></a>Pure Java AOP Frameworks</h1></div></div></div><p>Fortunately, most of the proxy boilerplate can be handled automatically by tools. Proxies are used internally in several Java frameworks, for example, Spring AOP and JBoss AOP, to implement aspects in pure Java.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn12" class="footnote" id="ch11fn12"><sup class="footnote">[12]</sup></a> In Spring, you write your business logic as <span class="emphasis"><em>Plain-Old Java Objects</em></span>. POJOs are purely focused on their domain. They have no dependencies on enterprise frameworks (or any other domains). Hence, they are conceptually simpler and easier to test drive. The relative simplicity makes it easier to ensure that you are implementing the corresponding user stories correctly and to maintain and evolve the code for future stories.</p><p>You incorporate the required application infrastructure, including cross-cutting concerns like persistence, transactions, security, caching, failover, and so on, using declarative configuration files or APIs. In many cases, you are actually specifying Spring or JBoss library aspects, where the framework handles the mechanics of using Java proxies or byte-code libraries transparently to the user. These declarations drive the dependency injection (DI) container, which instantiates the major objects and wires them together on demand.</p><p><a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11ex04">Listing 11-4</a> shows a typical fragment of a Spring V2.5 configuration file, app.xml<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn13" class="footnote" id="ch11fn13"><sup class="footnote">[13]</sup></a>:</p><div class="example"><a id="ch11ex04"></a><p class="title"><strong>Example&nbsp;11-4.&nbsp;<code class="literal">Spring 2.X configuration file</code></strong></p><div class="example-contents"><pre class="programlisting">&lt;beans&gt;
  ...
  &lt;bean id="appDataSource"
  class="org.apache.commons.dbcp.BasicDataSource"
  destroy-method="close"
  p:driverClassName="com.mysql.jdbc.Driver"
  p:url="jdbc:mysql://localhost:3306/mydb"
  p:username="me"/&gt;

  &lt;bean id="bankDataAccessObject"
  class="com.example.banking.persistence.BankDataAccessObject"
  p:dataSource-ref="appDataSource"/&gt;

  &lt;bean id="bank"
  class="com.example.banking.model.Bank"
  p:dataAccessObject-ref="bankDataAccessObject"/&gt;
  ...
&lt;/beans&gt;</pre></div></div><p><a id="iddle1048" class="indexterm"></a><a id="iddle1356" class="indexterm"></a><a id="iddle1406" class="indexterm"></a><a id="iddle1478" class="indexterm"></a><a id="iddle2428" class="indexterm"></a>Each “bean” is like one part of a nested “Russian doll,” with a domain object for a <code class="literal">Bank</code> proxied (wrapped) by a data accessor object (DAO), which is itself proxied by a JDBC driver data source. (See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fig03">Figure 11-3</a>.)</p><div class="figure-float" style="float: left;"><div class="figure"><a id="ch11fig03"></a><div class="figure-contents"><div class="mediaobject"><img src="https://www.safaribooksonline.com/library/view/clean-code/9780136083238/graphics/11_4fig_martin.gif" height="107" alt="The “Russian doll” of decorators" width="350" data-mfp-src="/library/view/clean-code/9780136083238/graphics/11_4fig_martin.gif"></div></div><p class="title"><strong>Figure&nbsp;11-3.&nbsp;The “Russian doll” of decorators</strong></p></div></div><p>The client believes it is invoking <code class="literal">getAccounts()</code> on a <code class="literal">Bank</code> object, but it is actually talking to the outermost of a set of nested D<span class="smaller">ECORATOR</span><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn14" class="footnote" id="ch11fn14"><sup class="footnote">[14]</sup></a> objects that extend the basic behavior of the <code class="literal">Bank</code> POJO. We could add other decorators for transactions, caching, and so forth.</p><p>In the application, a few lines are needed to ask the DI container for the top-level objects in the system, as specified in the XML file.</p><div class="informalexample"><pre class="programlisting">XmlBeanFactory bf =
  new XmlBeanFactory(new ClassPathResource("app.xml", getClass()));
Bank bank = (Bank) bf.getBean("bank");</pre></div><p>Because so few lines of Spring-specific Java code are required, <span class="emphasis"><em>the application is almost completely decoupled from Spring</em></span>, eliminating all the tight-coupling problems of systems like EJB2.</p><p>Although XML can be verbose and hard to read,<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn15" class="footnote" id="ch11fn15"><sup class="footnote">[15]</sup></a> the “policy” specified in these configuration files is simpler than the complicated proxy and aspect logic that is hidden from view and created automatically. This type of architecture is so compelling that frameworks like Spring led to a complete overhaul of the EJB standard for version 3. EJB3 <a id="iddle1480" class="indexterm"></a><a id="iddle2188" class="indexterm"></a>largely follows the Spring model of declaratively supporting cross-cutting concerns using XML configuration files and/or Java 5 annotations.</p><p><a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11ex05">Listing 11-5</a> shows our Bank object rewritten in EJB3<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn16" class="footnote" id="ch11fn16"><sup class="footnote">[16]</sup></a>.</p><div class="example"><a id="ch11ex05"></a><p class="title"><strong>Example&nbsp;11-5.&nbsp;<code class="literal">An EBJ3 Bank EJB</code></strong></p><div class="example-contents"><pre class="programlisting">package com.example.banking.model;
import javax.persistence.*;
import java.util.ArrayList;
import java.util.Collection;

@Entity
@Table(name = "BANKS")
public class Bank implements java.io.Serializable {
   @Id @GeneratedValue(strategy=GenerationType.AUTO)
   private int id;

   @Embeddable // An object "inlined" in Bank's DB row
   public class Address {
     protected String streetAddr1;
     protected String streetAddr2;
     protected String city;
     protected String state;
     protected String zipCode;
   }

   @Embedded
   private Address address;

   @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER,
              mappedBy="bank")
   private Collection&lt;Account&gt; accounts = new ArrayList&lt;Account&gt;();

   public int getId() {
      return id;
   }

   public void setId(int id) {
      this.id = id;
   }

   public void addAccount(Account account) {
      account.setBank(this);
      accounts.add(account);
   }

   public Collection&lt;Account&gt; getAccounts() {
      return accounts;
   }

   public void setAccounts(Collection&lt;Account&gt; accounts) {
      this.accounts = accounts;
   }
 }</pre></div></div><p><a id="iddle1039" class="indexterm"></a><a id="iddle1076" class="indexterm"></a><a id="iddle1080" class="indexterm"></a><a id="iddle1298" class="indexterm"></a><a id="iddle1983" class="indexterm"></a><a id="iddle2241" class="indexterm"></a><a id="iddle2274" class="indexterm"></a>This code is much cleaner than the original EJB2 code. Some of the entity details are still here, contained in the annotations. However, because none of that information is outside of the annotations, the code is clean, clear, and hence easy to test drive, maintain, and so on.</p><p>Some or all of the persistence information in the annotations can be moved to XML deployment descriptors, if desired, leaving a truly pure POJO. If the persistence mapping details won’t change frequently, many teams may choose to keep the annotations, but with far fewer harmful drawbacks compared to the EJB2 invasiveness.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec6"></a>AspectJ Aspects</h1></div></div></div><p>Finally, the most full-featured tool for separating concerns through aspects is the AspectJ language,<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn17" class="footnote" id="ch11fn17"><sup class="footnote">[17]</sup></a> an extension of Java that provides “first-class” support for aspects as modularity constructs. The pure Java approaches provided by Spring AOP and JBoss AOP are sufficient for 80–90 percent of the cases where aspects are most useful. However, AspectJ provides a very rich and powerful tool set for separating concerns. The drawback of AspectJ is the need to adopt several new tools and to learn new language constructs and usage idioms.</p><p>The adoption issues have been partially mitigated by a recently introduced “annotation form” of AspectJ, where Java 5 annotations are used to define aspects using pure Java code. Also, the Spring Framework has a number of features that make incorporation of annotation-based aspects much easier for a team with limited AspectJ experience.</p><p>A full discussion of AspectJ is beyond the scope of this book. See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_04">[AspectJ]</a>, <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_06">[Colyer]</a>, and <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_14">[Spring]</a> for more information.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec7"></a>Test Drive the System Architecture</h1></div></div></div><p>The power of separating concerns through aspect-like approaches can’t be overstated. If you can write your application’s domain logic using POJOs, decoupled from any architecture concerns at the code level, then it is possible to truly <span class="emphasis"><em>test drive</em></span> your architecture. You can evolve it from simple to sophisticated, as needed, by adopting new technologies on <a id="iddle1102" class="indexterm"></a><a id="iddle1112" class="indexterm"></a><a id="iddle1403" class="indexterm"></a><a id="iddle1408" class="indexterm"></a><a id="iddle1437" class="indexterm"></a><a id="iddle1477" class="indexterm"></a><a id="iddle1942" class="indexterm"></a>demand. It is not necessary to do a <span class="emphasis"><em>Big Design Up Front</em></span><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn18" class="footnote" id="ch11fn18"><sup class="footnote">[18]</sup></a> (BDUF). In fact, BDUF is even harmful because it inhibits adapting to change, due to the psychological resistance to discarding prior effort and because of the way architecture choices influence subsequent thinking about the design.</p><p>Building architects have to do BDUF because it is not feasible to make radical architectural changes to a large physical structure once construction is well underway.<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn19" class="footnote" id="ch11fn19"><sup class="footnote">[19]</sup></a> Although software has its own <span class="emphasis"><em>physics</em></span>,<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn20" class="footnote" id="ch11fn20"><sup class="footnote">[20]</sup></a> it is economically feasible to make radical change, <span class="emphasis"><em>if</em></span> the structure of the software separates its concerns effectively.</p><p>This means we can start a software project with a “naively simple” but nicely decoupled architecture, delivering working user stories quickly, then adding more infrastructure as we scale up. Some of the world’s largest Web sites have achieved very high availability and performance, using sophisticated data caching, security, virtualization, and so forth, all done efficiently and flexibly because the minimally coupled designs are appropriately <span class="emphasis"><em>simple</em></span> at each level of abstraction and scope.</p><p>Of course, this does not mean that we go into a project “rudderless.” We have some expectations of the general scope, goals, and schedule for the project, as well as the general structure of the resulting system. However, we must maintain the ability to change course in response to evolving circumstances.</p><p>The early EJB architecture is but one of many well-known APIs that are over-engineered and that compromise separation of concerns. Even well-designed APIs can be overkill when they aren’t really needed. A good API should largely <span class="emphasis"><em>disappear</em></span> from view most of the time, so the team expends the majority of its creative efforts focused on the user stories being implemented. If not, then the architectural constraints will inhibit the efficient delivery of optimal value to the customer.</p><p>To recap this long discussion,</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic">An optimal system architecture consists of modularized domains of concern, each of which is implemented with Plain Old Java (or other) Objects. The different domains are integrated together with minimally invasive Aspects or Aspect-like tools. This architecture can be test-driven, just like the code.</span></p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec8"></a>Optimize Decision Making</h1></div></div></div><p>Modularity and separation of concerns make decentralized management and decision making possible. In a sufficiently large system, whether it is a city or a software project, no one person can make all the decisions.</p><p><a id="iddle1278" class="indexterm"></a><a id="iddle1404" class="indexterm"></a><a id="iddle1453" class="indexterm"></a><a id="iddle1977" class="indexterm"></a><a id="iddle2197" class="indexterm"></a><a id="iddle2240" class="indexterm"></a>We all know it is best to give responsibilities to the most qualified persons. We often forget that it is also best to <span class="emphasis"><em>postpone decisions until the last possible moment</em></span>. This isn’t lazy or irresponsible; it lets us make informed choices with the best possible information. A premature decision is a decision made with suboptimal knowledge. We will have that much less customer feedback, mental reflection on the project, and experience with our implementation choices if we decide too soon.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic">The agility provided by a POJO system with modularized concerns allows us to make optimal, just-in-time decisions, based on the most recent knowledge. The complexity of these decisions is also reduced.</span></p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec9"></a>Use Standards Wisely, When They Add <span class="emphasis"><em>Demonstrable</em></span> Value</h1></div></div></div><p>Building construction is a marvel to watch because of the pace at which new buildings are built (even in the dead of winter) and because of the extraordinary designs that are possible with today’s technology. Construction is a mature industry with highly optimized parts, methods, and standards that have evolved under pressure for centuries.</p><p>Many teams used the EJB2 architecture because it was a standard, even when lighter-weight and more straightforward designs would have been sufficient. I have seen teams become obsessed with various <span class="emphasis"><em>strongly hyped</em></span> standards and lose focus on implementing value for their customers.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic">Standards make it easier to reuse ideas and components, recruit people with relevant experience, encapsulate good ideas, and wire components together. However, the process of creating standards can sometimes take too long for industry to wait, and some standards lose touch with the real needs of the adopters they are intended to serve.</span></p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec10"></a>Systems Need Domain-Specific Languages</h1></div></div></div><p>Building construction, like most domains, has developed a rich language with a vocabulary, idioms, and patterns<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn21" class="footnote" id="ch11fn21"><sup class="footnote">[21]</sup></a> that convey essential information clearly and concisely. In software, there has been renewed interest recently in creating <span class="emphasis"><em>Domain-Specific Languages</em></span> (DSLs),<a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ftn.ch11fn22" class="footnote" id="ch11fn22"><sup class="footnote">[22]</sup></a> which are separate, small scripting languages or APIs in standard languages that permit code to be written so that it reads like a structured form of prose that a domain expert might write.</p><p>A good DSL minimizes the “communication gap” between a domain concept and the code that implements it, just as agile practices optimize the communications within a team and with the project’s stakeholders. If you are implementing domain logic in the same language that a domain expert uses, there is less risk that you will incorrectly translate the domain into the implementation.</p><p>DSLs, when used effectively, raise the abstraction level above code idioms and design patterns. They allow the developer to reveal the intent of the code at the appropriate level of abstraction.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic">Domain-Specific Languages allow all levels of abstraction and all domains in the application to be expressed as POJOs, from high-level policy to low-level details.</span></p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec11"></a>Conclusion</h1></div></div></div><p>Systems must be clean too. An invasive architecture overwhelms the domain logic and impacts agility. When the domain logic is obscured, quality suffers because bugs find it easier to hide and stories become harder to implement. If agility is compromised, productivity suffers and the benefits of TDD are lost.</p><p>At all levels of abstraction, the intent should be clear. This will only happen if you write POJOs and you use aspect-like mechanisms to incorporate other implementation concerns noninvasively.</p><p>Whether you are designing systems or individual modules, never forget to <span class="emphasis"><em>use the simplest thing that can possibly work</em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lev1sec12"></a>Bibliography</h1></div></div></div></div><div class="footnotes"><br><hr><div id="ftn.ch11fn01" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn01" class="para"><sup class="para">[1] </sup></a><a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_15">[Mezzaros07]</a>.</p></div><div id="ftn.ch11fn02" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn02" class="para"><sup class="para">[2] </sup></a><a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_16">[GOF]</a>.</p></div><div id="ftn.ch11fn03" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn03" class="para"><sup class="para">[3] </sup></a>See, for example, <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_08">[Fowler]</a>.</p></div><div id="ftn.ch11fn04" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn04" class="para"><sup class="para">[4] </sup></a>See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_14">[Spring]</a>. There is also a Spring.NET framework.</p></div><div id="ftn.ch11fn05" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn05" class="para"><sup class="para">[5] </sup></a>Don’t forget that lazy instantiation/evaluation is just an optimization and perhaps premature!</p></div><div id="ftn.ch11fn06" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn06" class="para"><sup class="para">[6] </sup></a>Database management system.</p></div><div id="ftn.ch11fn07" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn07" class="para"><sup class="para">[7] </sup></a>See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_02">[AOSD]</a> for general information on aspects and <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_04">[AspectJ]</a>] and <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_06">[Colyer]</a> for AspectJ-specific information.</p></div><div id="ftn.ch11fn08" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn08" class="para"><sup class="para">[8] </sup></a>Meaning no manual editing of the target source code is required.</p></div><div id="ftn.ch11fn09" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn09" class="para"><sup class="para">[9] </sup></a>See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_05">[CGLIB]</a>, <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_03">[ASM]</a>, and <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_10">[Javassist]</a>.</p></div><div id="ftn.ch11fn10" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn10" class="para"><sup class="para">[10] </sup></a>For more detailed examples of the Proxy API and examples of its use, see, for example, <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_09">[Goetz]</a>.</p></div><div id="ftn.ch11fn11" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn11" class="para"><sup class="para">[11] </sup></a>AOP is sometimes confused with techniques used to implement it, such as method interception and “wrapping” through proxies. The real value of an AOP system is the ability to specify systemic behaviors in a concise and modular way.</p></div><div id="ftn.ch11fn12" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn12" class="para"><sup class="para">[12] </sup></a>See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_14">[Spring]</a> and <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_11">[JBoss]</a>. “Pure Java” means without the use of AspectJ.</p></div><div id="ftn.ch11fn13" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn13" class="para"><sup class="para">[13] </sup></a>Adapted from <a class="ulink" href="http://www.theserverside.com/tt/articles/article.tss?l=IntrotoSpring25">http://www.theserverside.com/tt/articles/article.tss?l=IntrotoSpring25</a></p></div><div id="ftn.ch11fn14" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn14" class="para"><sup class="para">[14] </sup></a><a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_16">[GOF]</a>.</p></div><div id="ftn.ch11fn15" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn15" class="para"><sup class="para">[15] </sup></a>The example can be simplified using mechanisms that exploit <span class="emphasis"><em>convention over configuration</em></span> and Java 5 annotations to reduce the amount of explicit “wiring” logic required.</p></div><div id="ftn.ch11fn16" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn16" class="para"><sup class="para">[16] </sup></a>Adapted from <a class="ulink" href="http://www.onjava.com/pub/a/onjava/2006/05/17/standardizing-with-ejb3-java-persistence-api.html">http://www.onjava.com/pub/a/onjava/2006/05/17/standardizing-with-ejb3-java-persistence-api.html</a></p></div><div id="ftn.ch11fn17" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn17" class="para"><sup class="para">[17] </sup></a>See <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_04">[AspectJ]</a> and <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_06">[Colyer]</a>.</p></div><div id="ftn.ch11fn18" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn18" class="para"><sup class="para">[18] </sup></a>Not to be confused with the good practice of up-front design, BDUF is the practice of designing <span class="emphasis"><em>everything</em></span> up front before implementing anything at all.</p></div><div id="ftn.ch11fn19" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn19" class="para"><sup class="para">[19] </sup></a>There is still a significant amount of iterative exploration and discussion of details, even after construction starts.</p></div><div id="ftn.ch11fn20" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn20" class="para"><sup class="para">[20] </sup></a>The term <span class="emphasis"><em>software physics</em></span> was first used by <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_13">[Kolence]</a>.</p></div><div id="ftn.ch11fn21" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn21" class="para"><sup class="para">[21] </sup></a>The work of <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_01">[Alexander]</a> has been particularly influential on the software community.</p></div><div id="ftn.ch11fn22" class="footnote"><p><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#ch11fn22" class="para"><sup class="para">[22] </sup></a>See, for example, <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_07">[DSL]</a>. <a class="link" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/bi05.html#bib11_12">[JMock]</a> is a good example of a Java API that creates a DSL.</p></div></div></div><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/Library/view/clean-code/9780136083238/ch10.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">10. Classes</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/Library/view/clean-code/9780136083238/ch12.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">12. Emergence</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9780136083238/chapter/ch11.html" data-for-analytics="9780136083238:ch11.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/clean-code/9780136083238/ch11.html#">Reset</a>
</div>
</div></body></html>