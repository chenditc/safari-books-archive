<!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch01.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch01.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch01.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch01.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>1. Introduction to Mesos - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch01.html"><meta name="description" content=" Chapter 1. Introduction to Mesos Let’s take a trip back in time, to the year 1957. Computers that use transistors are starting to proliferate across universities and research laboratories ... "><meta property="og:title" content="1. Introduction to Mesos"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="1. Introduction to Mesos"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch01.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 1. Introduction to Mesos Let’s take a trip back in time, to the year 1957. Computers that use transistors are starting to proliferate across universities and research laboratories ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch01.html" data-for-analytics="9781491926543:ch01.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch01.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch01.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch01.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%201.%20Introduction%20to%20Mesos&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch01.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/preface01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Preface</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch02.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">2. Getting Started with Mesos</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" class="pagenumrestart" data-pdf-bookmark="Chapter 1. Introduction to Mesos"><div class="chapter" id="chapter_1">
<h1><span class="label">Chapter 1. </span>Introduction to Mesos</h1>


<p>Let’s <a data-type="indexterm" data-primary="Mesos" data-secondary="evolution of" id="m1eo"></a>take a trip back in time, to the year 1957. Computers that use transistors are starting to proliferate across universities and research laboratories. There is a problem, though—only one person can use a computer at a time. So, we have paper sign-up sheets so that we can reserve time slots on the machines. Since computers are so much more powerful than pencil and paper, they are in high demand. At the same time, since the computers are so expensive, if people don’t use their whole reservations, then thousands of dollars of compute-time could be wasted! Luckily, the idea of operating systems already existed, more or less, at the time. A brilliant man named John McCarthy, who also invented <a href="http://bit.ly/lispwiki">LISP</a>, had a great idea—what if all the users could submit their jobs to the computer, and the computer would automatically share its CPU resources among the many different jobs?</p>
<div data-type="note" epub:type="note" id="jobs_became_programs"><h1>Jobs Became Programs</h1>
<p>What we now call applications or programs used to be called jobs.
We still can see this terminology in our shells, where, once we’ve backgrounded a process, we use the <code>jobs</code> <a data-type="indexterm" data-primary="jobs command" id="idp3496000"></a>command to inspect all the programs we’ve launched in the shell.</p>
</div>

<p>Once a single machine could be shared between jobs, we didn’t need humans to supervise the sign-up sheets—now, everyone could use the machine, and share it more easily, since the machine could enforce quotas, priorities, and even egalitarian fairness (if so desired).</p>

<p>Fast-forward to 2010: with the falling costs of networked data transmission and storage, it’s now possible to store every bit of information you can collect.
To process all this data, you probably need to use <a data-type="indexterm" data-primary="Storm" id="idp3351008"></a>Storm (a distributed real-time data processing system) and <a data-type="indexterm" data-primary="Hadoop" id="idp3351840"></a>Hadoop.
So, you get a whole mess of machines: a few for the Hadoop JobTracker and Storm Nimbus (each with its own painstakingly crafted configuration), a few more for the HDFS NameNode and Secondary NameNode, 15 more that you’ll install Hadoop TaskTrackers and HDFS DataNodes on, and 10 more that you use to run Storm Supervisors.
At this point, you’ve managed to purchase 30 machines. However, if you decide that instead you’d like to use five of your Hadoop machines as Storm workers, you’re in for painful task, because you now need to completely reprovision the Hadoop machines as Storm machines—a process that, as many practitioners can vouch, is not as easy as we’d wish.</p>

<p>It’s 2011: the <a data-type="indexterm" data-primary="Berkeley AMP lab" id="idp3497376"></a>Berkeley AMP lab is in full swing.
This is the group that today has brought us Spark, Tachyon, and many other distributed, scalable systems.
One of the projects in the lab is called Mesos: it wants to be a platform for sharing your computer cluster between many disparate applications, such as Hadoop and <a data-type="indexterm" data-primary="MPI" id="idp3354944"></a>MPI.
In the Mesos paper,<sup><a data-type="noteref" id="idp3355744-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3355744" class="totri-footnote">1</a></sup> the authors show promising results in sharing a single cluster of commodity computer hardware between many different applications, including MPI and Hadoop.
This effectively solves the <a data-type="indexterm" data-primary="reprovisioning" id="idp3356928"></a>reprovisioning problem in clusters.
Of course, companies like <a data-type="indexterm" data-primary="Google" id="idp3357728"></a>Google and <a data-type="indexterm" data-primary="Yahoo!" id="idp3382800"></a>Yahoo! are interested in the AMP lab, because they’re working on similar problems.
The team at <a data-type="indexterm" data-primary="Twitter" id="idp3383744"></a>Twitter take it a step further:
they realize that Mesos solves a critical problem with which they’ve been struggling—how to efficiently wrangle the massive number of machines in their data centers—so, they manage to hire the lead author of the paper and architect of Mesos, PhD candidate Ben Hindman, so that he can tackle this problem at Twitter.
Over the next several years, Mesos grows from being a simple research project into the core infrastructure that powers tens of thousands of servers at Twitter and many other companies.</p>

<p>So now that you know a little about <a data-type="indexterm" data-primary="Mesos" data-secondary="evolution of" data-startref="m1eo" id="idp3385360"></a><a data-type="indexterm" data-primary="Mesos" data-secondary="technical overview" id="idp3386608"></a>Mesos (in the historical sense and context), you probably want to know what Mesos <em>is</em> (in the technical sense).
Mesos is a system that allows you to harness all of the different machines in your computer cluster or data center and treat them as a single logical entity.
With Mesos, the problem of having fixed sets of machines assigned to applications is no longer an issue.
Instead, you can easily change which software is running on which machines, or even abdicate the responsibility of choosing which software runs on which machines to Mesos and allow it to make that decision for you, freeing up your time and mind to work on other (more interesting and more important) problems.
For instance, in my company, Mesos allowed us to rapidly experiment with new distributed systems, such as Spark and Storm.</p>






<section data-type="sect1" data-pdf-bookmark="How to Use Mesos"><div class="sect1" id="idp3388928">
<h1>How to Use Mesos</h1>

<p>In <a data-type="indexterm" data-primary="Mesos" data-secondary="using" id="idp403936"></a>the simplest sense, Mesos is an orchestration platform for managing CPU, memory, and other resources across a cluster.
Mesos uses <a data-type="indexterm" data-primary="containerizers" id="idp405104"></a>containerization technology, such as Docker and Linux Containers (LXC), to accomplish this.
However, Mesos provides much more than that—it provides real-time APIs for interacting with and developing for the cluster.</p>

<p>Many people wonder where Mesos sits in their stack.
Is it part of their deployment infrastructure?
Should their infrastructure team manage it?
Or is Mesos an application development platform, like Heroku?
Maybe Mesos should really belong to an application team…
The answer to these questions is not straightforward, because Mesos provides functionality that crosses between Infrastructure as a Service (IaaS) and Platform as a Service (PaaS), in order to achieve greater efficiencies for your system.
On the one hand, Mesos is infrastructure: it is the platform on which we deploy Hadoop and Storm and all the other PaaS goodies that we require for business.
On the other hand, suppose that we’re trying to develop an application that can process large-scale computations, similar to Hadoop or Spark.
In that case, Mesos becomes the platform that we are building on.
Suddenly, rather than treating it as a black box, we’re very much concerned with its APIs and how to develop for it.</p>

<p>In practice, it’s best to think of Mesos as serving a different purpose altogether.
It allows you to stop focusing on individual machines, whether for developing your applications or for deploying them.
Instead, it allows you to treat your cluster as a single, large group of resources.
Mesos increases your agility for testing and deploying new distributed systems, as well as providing the platform to deploy in-house applications more quickly and efficiently than if you needed to involve your developer operations (DevOps) organization in those processes.
For small projects, Mesos subsumes the many different systems that one might otherwise need to deal with—deployment tools like Ansible, Chef, and Puppet can now be relegated to basic roles in which they bootstrap Mesos.
Mesos is the ultimate <a data-type="indexterm" data-primary="Mesos" data-secondary="as a DevOps tool" id="idp408768"></a>DevOps tool which thoroughly blurs the lines between the APIs the application runs against and the deployment of the application is a part of:
Twitter has just three operators managing its tens-of-thousands-of-node Mesos clusters.</p>

<p>Let’s now take a look at how Mesos fills two different roles: deployment system and execution platforms.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Mesos as a Deployment System"><div class="sect1" id="mesos_as_deployment">
<h1>Mesos as a Deployment System</h1>

<p>One <a data-type="indexterm" data-primary="Mesos" data-secondary="as a deployment system" id="m1aads"></a><a data-type="indexterm" data-primary="deployment systems" id="ds1"></a>way that you can think about Mesos is as a smart deployment system.
First, let’s look at a typical deployment system today, like <a href="http://www.ansible.com/">Ansible</a> <a data-type="indexterm" data-primary="Ansible" id="idp3477712"></a><a data-type="indexterm" data-primary="Chef" id="idp3478448"></a>or <a href="https://www.chef.io/chef/">Chef</a>.
To use these tools, you write lists of tasks that should be performed on the various machines in your cluster.
Tasks can modify files, install programs, and interact with supervision systems (like <a href="http://supervisord.org/">Supervisor</a> <a data-type="indexterm" data-primary="SupervisorD" id="idp3480848"></a><a data-type="indexterm" data-primary="SystemD" id="idp3481584"></a>and <a href="http://www.freedesktop.org/wiki/Software/systemd/">SystemD</a>).
Groups of tasks can be combined to describe a “role” or “recipe,” which represents a higher-level concept, like setting up a database or web server.
Finally, these groups of tasks are applied to an “inventory,” or set of hosts, which then configures them according to the specification.</p>

<p>These tools are wildly more useful than the Bash, Perl, and SSH mashups of old; however, they suffer from fundamental limitations.
On the one hand, they allow for configuration to be written in a structured, understandable form.
They enable the use of best practices from software development—source control, encapsulation, and code reuse through libraries and plug-ins—to extend to system administration.
On the other hand, they are fundamentally designed to make a fleet of machines conform to a static configuration.
This is intentional: once you’ve run your Ansible or Puppet configuration, you want the cluster to be in the same, known consistent state.
If, however, you want your cluster to dynamically reallocate resources or shift configurations depending on various external factors, such as the current load, these tools can’t help you.</p>

<p>In this sense, it can be useful to think of Mesos as a deployment system.
Distributed applications can be made into Mesos frameworks for use on a Mesos cluster.
Rather than forcing you to use a static configuration description, each framework is essentially a role or recipe: the framework contains all the logic needed to install, start, monitor, and use a given application.
Many frameworks are themselves platforms; when many applications follow the same general deployment pattern (like web servers), then a single framework can manage them all (like Marathon, a Mesos framework for stateless services).
The power of Mesos is that since the framework is a live, running program, it can make decisions on the fly, reacting to changing workloads and cluster conditions.
For instance, a framework could observe how many resources seem to be available, and change its execution strategy to better perform given the current cluster conditions.
Because the deployment system runs constantly, it can notice and adapt to failures in real time, automatically starting up new servers as previous ones fail.
Mesos frameworks are strictly more powerful than static descriptions used by more traditional deployment systems.</p>

<p>Thus, you can think of Mesos as supplanting much of the functionality that Ansible or Chef previously provided.
You’ll still need a traditional configuration manager to bootstrap the Mesos cluster; however, Mesos provides a more powerful platform for hosting applications:
frameworks can automatically and dynamically adapt to failing machines and changing workloads, giving operators greater peace of mind and time to work on new <a data-type="indexterm" data-primary="Mesos" data-secondary="as a deployment system" data-startref="m1aads" id="idp3362864"></a><a data-type="indexterm" data-primary="deployment systems" data-startref="ds1" id="idp3364112"></a>initiatives.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Mesos as an Execution Platform"><div class="sect1" id="idp3365312">
<h1>Mesos as an Execution Platform</h1>

<p>Another <a data-type="indexterm" data-primary="Mesos" data-secondary="as an execution platform" id="idp3366608"></a>way to think of Mesos is as a platform for hosting applications.
Today, you may use Heroku to run your web services, or you may manage a Hadoop cluster to execute MapReduce jobs.
In these examples, Heroku and the Hadoop cluster are the platforms for web services and MapReduce jobs.
A Mesos cluster can also be a platform for higher-level applications.
But if your system already works, why add Mesos to the mix?
Mesos offers flexibility and mitigates the risk of being outpaced by technology development;
with Mesos, launching a Spark cluster or switching to a newer technology is as simple as launching the framework and watching it bootstrap itself.</p>

<p>Consider the <a data-type="indexterm" data-primary="Heroku/PaaS" id="idp3306752"></a>Heroku/PaaS scenario: <a data-type="indexterm" data-primary="Marathon" id="idp3307616"></a>Marathon can reliably launch your application, automatically starting up new instances when machines crash or go down for maintenance.
Mesos-DNS and HAProxy can manage your load balancing for you (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_chapter">Chapter&nbsp;3</a>).
But once you’ve got Mesos running, why bother continuing to maintain your Hadoop cluster?
After all, you could launch <a data-type="indexterm" data-primary="Hadoop" id="idp3309616"></a>Hadoop on Mesos via <a href="https://github.com/mesos/myriad">Myriad</a>, and you could even stop dealing with <a data-type="indexterm" data-primary="HDFS" id="idp3311072"></a>HDFS administration, since there’s a framework for that (<a href="https://github.com/mesosphere/hdfs">Mesos HDFS</a>).</p>

<p>Thus, you can think of Mesos as an execution platform: rather than paying for third-party PaaS solutions and creating bespoke clusters for each big data analysis technology, you can have a single Mesos cluster.
With your Mesos cluster as the foundation, you can easily launch whatever frameworks you require to provide whatever functionality is needed, now or as new requirements and technologies arise.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="How This Book Is Structured"><div class="sect1" id="idp3313568">
<h1>How This Book Is Structured</h1>

<p>At this point, let’s take a look at how the rest of the book will be structured.
First, we’re going to learn about Mesos itself.
We’ll cover the architecture of Mesos and its frameworks, and we’ll learn how resources are allocated across the cluster.
We’ll also dive into configuration settings you’ll want to know, such as how to provide service-level agreements (SLAs) to certain frameworks, and useful command-line settings to tune the overall performance and workload of your cluster.</p>

<p>Then, we’ll learn about two existing open source Mesos frameworks—Marathon and Chronos—that provide application hosting and job scheduling functionality.
We’ll explore how to configure them, how to interact with them, and how to build deeper integrations.
After learning about these frameworks, you will be able to host several common application architectures, such as web services and data pipelines, on Mesos, with high reliability and scalability.</p>

<p>In the later parts of this book, we’ll go into great detail about how to build a custom framework for Mesos.
We’ll learn about the APIs that it exposes through the process of implementing a sample job scheduling framework in Java.
In developing this framework, we’ll delve into how to build on the core Mesos APIs, what some common pitfalls are and how to avoid them, and how to decide whether to build a new framework or adapt an existing system.</p>

<p>At the end of the book, we’ll do a deeper dive into some advanced features of Mesos, such as its integration with Docker, its internal architecture, and several cutting-edge APIs, including persistent disk management for databases and the framework reservation system.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp455376">
<h1>Summary</h1>

<p>In <a data-type="indexterm" data-primary="Mesos" data-secondary="benefits and uses" id="idp456592"></a>essence, Mesos is an operating system: it manages your computers and harnesses them together into a single, logical unit.
Companies use Mesos because of the reliability, flexibility, and efficiency it brings.
Mesos clusters require very few administrators to ensure that even massive fleets of machines remain operational.</p>

<p>Frameworks <a data-type="indexterm" data-primary="frameworks" id="idp458448"></a>are distributed applications that run on Mesos; for them, Mesos provides infrastructure and execution services. Frameworks can act as applications, like Hadoop or Storm, or as deployment systems, like Ansible or Chef.
Mesos coordinates and collaborates with frameworks to allocate slices of machines in the Mesos cluster to various roles.
This capability—brokering the division of machines between many frameworks—is how Mesos enables greater operational efficiency.</p>

<p>With this high-level view of Mesos in mind, let’s start diving into Mesos concepts and get started with Mesos in practice!</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idp3355744"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3355744-marker" class="totri-footnote">1</a></sup> Although most people think of the NSDI 2011 paper “Mesos: A Platform for Fine-Grained Resource Sharing in the Data Center,” by Ben Hindman, Andy Konwinski, Matei Zaharia, et al., originally Mesos was published as Nexus in “Nexus: A Common Substrate for Cluster Computing” by the same authors in 2009.</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/preface01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Preface</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch02.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">2. Getting Started with Mesos</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch01.html" data-for-analytics="9781491926543:ch01.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#">Reset</a>
</div>
</div></body></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch02.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch02.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom gr__safaribooksonline_com" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch02.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch02.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>2. Getting Started with Mesos - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch02.html"><meta name="description" content=" Chapter 2. Getting Started with Mesos Now that you have a high-level understanding of the kinds of problems that Mesos can solve, let’s dive in. What terminology is used ... "><meta property="og:title" content="2. Getting Started with Mesos"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="2. Getting Started with Mesos"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch02.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 2. Getting Started with Mesos Now that you have a high-level understanding of the kinds of problems that Mesos can solve, let’s dive in. What terminology is used ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch02.html" data-for-analytics="9781491926543:ch02.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch02.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch02.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch02.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%202.%20Getting%20Started%20with%20Mesos&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch02.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Introduction to Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch03.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">3. Porting an Existing Application to Mesos</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 2. Getting Started with Mesos"><div class="chapter" id="idm4773760">
<h1><span class="label">Chapter 2. </span>Getting Started with Mesos</h1>


<p>Now that you have a high-level understanding of the kinds of problems that Mesos can solve, let’s dive in.
What terminology is used by the project?
How does Mesos manage resources?
What structural constraints does Mesos impose on applications?
By answering these questions and more, you’ll develop the vocabulary and understanding to discuss Mesos.
In subsequent chapters, we’ll go into specifics about each technology, in order to develop applied skills in building applications with Mesos.</p>






<section data-type="sect1" data-pdf-bookmark="Frameworks"><div class="sect1" id="idp462624">
<h1>Frameworks</h1>

<p>In <a data-type="indexterm" data-primary="frameworks" id="fw2"></a>the Mesos world, we assume that our distributed systems have a <a data-type="indexterm" data-primary="central controllers" id="idp465552"></a>central controller and many workers.
This is how most successful, scalable systems work: Google’s BigTable, Apache Hadoop, and Twitter’s Storm all have some sort of central controller that organizes their workers.
Of course, the workers should be designed to work independently from the controller so that they’re not bottlenecked by it and don’t rely on it for their availability.
Applications that run on Mesos are called <em>frameworks</em>.
A framework has two parts: the controller portion, which is called the <em>scheduler</em>, <a data-type="indexterm" data-primary="schedulers" id="s2"></a>and the worker portion, which are called the<a data-type="indexterm" data-primary="executors" id="e2"></a> <em>executors</em>.</p>

<p>To run a framework on a Mesos cluster, we must run its scheduler.
A scheduler is simply a process that can speak the Mesos protocol; frequently, our schedulers run on Marathon, but it’s always necessary to consider how to ensure high availability for the scheduler.
When a scheduler first starts up, it connects to the Mesos cluster so that it can use the cluster’s resources.
As the scheduler runs, it makes requests to Mesos to launch executors as it sees fit.
This complete flexibility for the scheduler is what makes Mesos so powerful: schedulers can launch tasks based on resource availability, changing workloads, or external triggers.
Today, there exist schedulers that can manage fleets of web services, schedulers that coordinate Storm topologies, and schedulers that optimize batch job placement.</p>

<p>When a scheduler wants to do some work, it launches an executor.
The executor is simply the scheduler’s worker: the scheduler then decides to send one or more <em>tasks</em> <a data-type="indexterm" data-primary="tasks" id="idm4405232"></a>to the executor, which will work on those tasks independently, sending status updates to the scheduler until the tasks are <a data-type="indexterm" data-primary="executors" data-startref="e2" id="idm4404224"></a><a data-type="indexterm" data-primary="schedulers" data-startref="s2" id="idm4403280"></a>complete.
We’ll learn more about the distinction between tasks and executors in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#tasks_and_executors_intro">“Tasks and Executors”</a>.</p>

<p>Now that we’ve got an idea of what a framework is, let’s take a step down the stack to learn about the Mesos cluster <a data-type="indexterm" data-primary="frameworks" data-startref="fw2" id="idm4400880"></a>itself.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Masters and Slaves"><div class="sect1" id="idm4399648">
<h1>Masters and Slaves</h1>

<p>A <a data-type="indexterm" data-primary="slaves" id="idm4398240"></a><a data-type="indexterm" data-primary="masters" id="masters2"></a>Mesos cluster is comprised of two components: the Mesos <em>masters</em> and the Mesos <em>slaves</em>.
The masters are the software that coordinates the cluster; the slaves are what execute code in containers.
You might be thinking, “That sounds awfully similar to how frameworks work.”</p>

<p>In that case, you’d be 100% correct.
The Mesos cluster mirrors the organization of the frameworks that run on top of it, because the master/slave pattern is simple, flexible, and effective.
The cluster software needs to be separate, however, to ensure that frameworks remain isolated and secure from one another.
First, we’ll look at a few key ideas about the Mesos masters; then, we’ll take a look at the slaves.</p>








<section data-type="sect2" data-pdf-bookmark="The Masters"><div class="sect2" id="idm4394320">
<h2>The Masters</h2>

<p>The <a data-type="indexterm" data-primary="masters" data-secondary="responsibilities of" id="masters2ro"></a>Mesos masters are the brain of the cluster.
They have several responsibilities:</p>

<ul>
<li>
<p>They are the central source of truth for running tasks.</p>
</li>
<li>
<p>They fairly share the cluster between all the connected frameworks.</p>
</li>
<li>
<p>They host the primary UI for the cluster.</p>
</li>
<li>
<p>They ensure high availability and efficient allocation of resources. Considered together, they are a single point of failure, but Mesos automatically handles and recovers from individual master failures.</p>
</li>
</ul>

<p>Let’s unpack these responsibilities, and see what they mean for the design of the masters and how they impact our clusters:</p>
<dl>
<dt>Masters <a data-type="indexterm" data-primary="masters" data-secondary="and task metadata" id="idm590736"></a><a data-type="indexterm" data-primary="task metadata" id="idm589728"></a>are the central source of truth for all running tasks</dt>
<dd>
<p>In order for masters to be able to serve the UI and data about tasks with minimal latency, all task metadata is kept in memory.
This means that the nodes that run the masters should have plenty of memory—on a cluster with thousands of concurrent tasks, the masters could, for instance, consume 20 GB of RAM.
Note that this excludes completed tasks, which relieves the memory pressure on the masters for some workloads.
The masters make an effort to store the metadata related to recently completed tasks, but in the interest of saving memory, they have a fixed-size buffer to store the last few hundred thousand tasks.
On a very high throughput cluster, this could mean that completed task metadata is only available in the master for a few minutes.
To retain task metadata for longer, you can use the Mesos monitoring system <a href="https://github.com/twosigma/satellite">Satellite</a> to automatically replicate the task metadata to a NoSQL database.</p>
</dd>
<dt>Masters fairly share the cluster between connected <a data-type="indexterm" data-primary="frameworks" data-secondary="resources" id="idm586048"></a>frameworks</dt>
<dd>
<p>The masters are responsible for offering resources to frameworks.
Since the masters know exactly which frameworks are using which resources, they’re able to determine which frameworks are using less than their share, and give those frameworks the first choice of free resources.<sup><a data-type="noteref" id="idm305504-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm305504" class="totri-footnote">1</a></sup>
When configuring a Mesos cluster, you have many knobs for controlling the way resources are distributed amongst connected frameworks.
Whenever a framework connects to Mesos, it connects with a role.
Each role can have resources specifically set aside for it, and each role can be assigned a different weighted share of the remainder of the cluster.
The administrators of the cluster can configure roles to ensure that each framework’s SLA is met (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#mesos_roles">“Roles”</a>).</p>
</dd>
<dt>Masters host the primary UI</dt>
<dd>
<p>When <a data-type="indexterm" data-primary="master UI" id="idm301120"></a><a data-type="indexterm" data-primary="UI, master" id="idm300384"></a>you want to use a browser to inspect and interact with the Mesos cluster, you’ll typically first visit the master UI, which is on port 5050 by default.
This UI allows you to see how many resources are available in total on your cluster, and how many are used.
It allows you to see all of the connected frameworks, as well as information about them such as their framework ID and when they registered with Mesos.
You can also see details about all of the current resource offers and tasks.
The master UI automatically links each task with the UI of the slave that task is running on, so that you can even access files from the task’s sandbox, such as its logs.</p>
</dd>
<dt>Masters ensure high availability</dt>
<dd>
<p>Mesos <a data-type="indexterm" data-primary="clusters, highly available" id="idm297664"></a><a data-type="indexterm" data-primary="masters" data-secondary="for high availability" id="masters2fha"></a>seeks to simplify building and running a highly available cluster.
This is the reason that you should run three or five masters: as long as a majority of the masters are still running, the cluster can continue to operate as normal.
The masters use the battle-tested <a href="http://bit.ly/paxoswiki">Paxos</a> algorithm to durably synchronize their beliefs about the status of the cluster.
Since all masters have the same up-to-date view, any one of them can service and process requests.
At the same time, Mesos seeks to enable building highly scalable clusters, which means being able to rapidly manage thousands of cluster allocations.
To accomplish this, only one master is elected leader at a time.
The leader is thus able to efficiently compute and make decisions about resource allocations, without being slowed down by waiting for the other masters on every decision.
This design allows Mesos to achieve very high rates of scalable resource allocation, but still offer high availability in the face of partial failures.
Of course, losing a majority of the masters does force the Mesos cluster to operate in a “safe mode”—when a majority of the masters are down, frameworks will not be able to allocate new resources or launch new tasks; however, running tasks will continue as normal.
This means that even during a master outage, as long as the frameworks in use can continue to function without launching new tasks, the cluster as a whole can offer uninterrupted service even as individual <a data-type="indexterm" data-primary="masters" data-secondary="for high availability" data-startref="masters2fha" id="idm293360"></a><a data-type="indexterm" data-primary="masters" data-secondary="responsibilities of" data-startref="masters2ro" id="idm292112"></a>components fail.</p>
</dd>
</dl>

<p>In this book, we won’t cover how to install and run the Mesos masters and slaves: there are numerous tutorials on the Internet that cover exactly that, and they are customized for whatever operating system and deployment system you <a data-type="indexterm" data-primary="masters" data-startref="masters2" id="idp10928"></a>prefer.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="The Slaves"><div class="sect2" id="idp12160">
<h2>The Slaves</h2>
<div data-type="tip"><h1>Slave Will Be Renamed to Agent in Mesos 1.0</h1>
<p>When Mesos reaches the 1.0 release, the nomenclature will change—the Mesos slave will be called the Mesos agent, and all occurences of “slave” will be changed <a data-type="indexterm" data-primary="agent, Mesos" id="idp14752"></a>to “agent.”</p>
</div>

<p>The complement of the Mesos masters are the slaves.
The slaves have a different set of <a data-type="indexterm" data-primary="slaves" data-secondary="responsibilities of" id="slaves2ro"></a>responsibilities:</p>
<ol>
<li>
<p>They launch and manage the containers that host the executors (both LXC containers and Docker images).</p>
</li>
<li>
<p>They provide a UI to access data from within the containers.</p>
</li>
<li>
<p>They communicate with their local executors in order to manage communications with the Mesos masters.</p>
</li>
<li>
<p>They advertise information about the hosts they’re running on, including information about running tasks and executors, available resources, and other metadata.</p>
</li>
<li>
<p>They manage status updates from their tasks.</p>
</li>
<li>
<p>They checkpoint their state to enable rolling restarts of the cluster.</p>
</li>

</ol>

<p>Let’s break these down in turn:</p>
<dl>
<dt>Container management</dt>
<dd>
<p>Mesos <a data-type="indexterm" data-primary="containerizers" id="idp25936"></a><a data-type="indexterm" data-primary="slaves" data-secondary="container management" id="idp3320336"></a>provides the best multitenancy isolation story for large clusters to date.
It does so through the use of containerization technology.
Containers are a lightweight, extremely low-resource way to guarantee specific programs access to specific quantities of resources.
For instance, a container could guarantee that a web server always can use 2 CPUs, 1 GB of RAM, and 500 MBps of network bandwidth, regardless of the demand of any other application on the machine.
Mesos slaves have deep integration with LXC, the standard <a href="https://linuxcontainers.org/">Linux Containers</a> technology, as well as with <a href="https://www.docker.com/">Docker</a>, the most popular packaging and containerization technology.
Since the slaves need to be able to launch containers and ensure that the executors are run as specific users, the slave process typically runs as <code>root</code>,<sup><a data-type="noteref" id="idp3323936-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3323936" class="totri-footnote">2</a></sup> so that it can create containers and run different executors as different users.</p>
</dd>
<dt>UI for slave-specific data</dt>
<dd>
<p>Just <a data-type="indexterm" data-primary="slave UI" id="idp3325984"></a><a data-type="indexterm" data-primary="UI, slave" id="idp3326720"></a>as the Mesos master UI exposes information about the state of the whole cluster, such as all the active tasks and frameworks, the slave UI exposes information about what’s happening on a specific slave.
Besides presenting a drilled-down version of the master UI (showing only frameworks, tasks, and executors that are related to that slave), the slave UI allows for interactive browsing of all the files within a container.
This feature makes it easy to inspect the logs of any current or completed task, which is invaluable in debugging and monitoring the cluster.
Frequently, Mesos framework UIs will link to the slaves’ UIs, so that users can easily browse, view, and download the files produced by their tasks.</p>
</dd>
<dt>Communication with executors and masters</dt>
<dd>
<p>If <a data-type="indexterm" data-primary="slaves" data-secondary="executor-master communication" id="idp3329792"></a>you’re reading this book, you’ve probably worked on <a data-type="indexterm" data-primary="distributed systems" id="idp3330896"></a>distributed systems (or else you’re about to).
If that’s the case, then you know (or will soon find out) that <em>distributed systems are hard</em>.
In order to help us mere mortal programmers with these hard problems, the Mesos slave intermediates communications between <a data-type="indexterm" data-primary="executor-master communication" id="idp3332352"></a><a data-type="indexterm" data-primary="master-executor communication" id="idp3333088"></a>executors and the masters.
This means that every communication between executors and slaves is done locally, on a 100% reliable local loopback interface, which frees us from distributed systems reliability concerns.<sup><a data-type="noteref" id="idp3334128-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3334128" class="totri-footnote">3</a></sup>
Therefore, the Mesos slave can take responsibility for checkpointing and resynchronizing state during transient network problems or restarts, which helps to reduce the difficulty in building reliable worker applications.</p>
</dd>
<dt>Advertising information about their host</dt>
<dd>
<p>In Mesos, it is up to each <a data-type="indexterm" data-primary="slaves" data-secondary="host information reporting" id="idp3392640"></a><a data-type="indexterm" data-primary="host information reporting" id="idp3393632"></a>slave to self-report the amount of resources it has available for running tasks.
This design makes it trivial to add new capacity to a Mesos cluster: once a slave machine is started and the Mesos slave process connects to the masters, the slave chooses to communicate what resources it’s making available to the cluster.
By default, the slave process will autodetect the CPUs, memory, and disks on the machine and expose them all to Mesos, available to any role. (The slave will reserve 1 GB or 50% of detected memory, whichever is smaller, in order to run itself and other operating system services. Likewise, it will reserve 5 GB or 50% of detected disk, whichever is smaller.)
However, on the command line, you can specify exactly how many resources should be exposed, and whether any or all of those resources should be reserved for one or more roles.
Besides the automatically detected resources, administrators can configure slaves to expose custom-defined resources, which we’ll learn more about in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#configuring_custom_resources">“Configuring Custom Resources”</a>.
A slaves can also expose arbitrary key/value data about the machine (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#configuring_attributes">“Configuring Slave Attributes”</a> for details).
This is a great way to express information that might be useful to some schedulers, such as which rack the machine is on, what generation of processor features it supports, or what operating system it is running.
By enhancing the advertised information that a slave shares with the cluster, you can add powerful features to your schedulers; for example, see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_using_placement_constraints">“Using Placement Constraints”</a> to see how this data can enable rack-aware Marathon task placement.</p>
</dd>
<dt>Status updates</dt>
<dd>
<p>When <a data-type="indexterm" data-primary="slaves" data-secondary="status updates" id="idp3399568"></a><a data-type="indexterm" data-primary="tasks" data-secondary="status updates" id="idp3400576"></a><a data-type="indexterm" data-primary="status updates" id="idp3401520"></a>a task sends a status update to its scheduler, it is guaranteed to be delivered at least once.
It’s the responsibility of the slave to store all status updates locally to disk, and periodically retransmit them if they aren’t acknowledged by the task’s scheduler.
Without this, frameworks could fail to learn when their tasks complete during transient network or scheduler failures.</p>
</dd>
<dt>Rolling restarts</dt>
<dd>
<p>There’s a <a data-type="indexterm" data-primary="rolling restarts" id="idp3404000"></a><a data-type="indexterm" data-primary="slaves" data-secondary="and rolling restarts" data-secondary-sortas="rolling" id="idp3404736"></a>tricky situation that arises when building an always-up distributed system: you need to be able to upgrade things without incurring any downtime.
Typically, what you might try to do is restart a small fraction of your slaves at a time—that way, you never dip below 90% or 95% capacity.
Unfortunately, there’s a problem with this strategy.
Consider the slaves on which you’re running in-memory caches.
Even if you restart them one at a time, it may take a long time to repopulate those caches, thus resulting in one of two choices: complete the slave upgrade faster, and suffer degraded application performance for far longer than the upgrade itself takes, or upgrade the slaves slowly and increase the time needed for the rolling upgrade by an order of magnitude or more.
Mesos slaves have a feature called checkpointing, which gives us a third choice: the slave can periodically write snapshots of its own state plus the state of its tasks and executors, so that when you restart the slave process, rather than killing all of its tasks and executors, the new, upgraded version of the slave can simply read the checkpoint files and pick up where the previous version left off by reconnecting to the existing executors.
This way, a rolling reboot of your slaves can be done quickly, and not a single task need die.</p>
</dd>
</dl>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="configuring_cgroups">
<h5>Using Cgroups on Mesos Slaves</h5>
<p><em>Cgroups</em>, a <a data-type="indexterm" data-primary="Cgroups" id="idp27504"></a><a data-type="indexterm" data-primary="slaves" data-secondary="Cgroups" id="idp28128"></a>shortened name for <em>control groups</em>, are a way to group Linux processes together in order to do resource accounting and allocation.
Every Mesos slave should have cgroups enabled, because they provide the CPU and memory isolation that ultimately makes Mesos so reliable.
Processes on a Linux system belong to a node in the cgroup hierarchy; each node in the hierarchy has a certain share of the resources, and each child of a node has some subset of that node’s resources.
Through these resource hierarchies, anything from CPU shares and memory to network and disk I/O bandwidth can be accounted for and precisely shared.
This sharing and accounting is what guarantees that one task can’t starve another of resources.
When the Mesos slave uses cgroups, it actually dynamically creates and destroys nodes in the hierarchy to match the allocations that the master calculates.
This simplifies the administrators’ jobs, since they need only ensure that cgroups have been enabled in the OS on the slave.</p>

<p>You can read about how to enable cgroups on <a href="https://wiki.debian.org/LXC">the Debian wiki</a> and in the <a href="http://red.ht/1T3Qu9k">Red Hat Resource Management Guide</a>.
Mesos slaves will automatically work with Debian’s and Red Hat 7’s default cgroup instructions.</p>

<p>To enable cgroup isolation on the Mesos slaves, you must pass the command-line option <code>--isolation='cgroups/cpu,cgroups/mem'</code> to every slave.
It is not recommended to use the default Posix isolator in production, as it doesn’t provide the same robust isolation guarantees that the cgroups isolator does.
Its primary purpose is to get process monitoring data when running Mesos for development purposes on a Mac.</p>
</div></aside>

<p>Now we know the key responsibilities of the Mesos slave.
The fundamental purpose of the slave is to expose the cluster’s resources; in the next section, we’ll learn what resources are and how to define custom <a data-type="indexterm" data-primary="slaves" data-secondary="responsibilities of" data-startref="slaves2ro" id="idp34320"></a>resources.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Resources"><div class="sect1" id="custom_resources_info">
<h1>Resources</h1>

<p>The <a data-type="indexterm" data-primary="resources" data-secondary="definition" id="idp37664"></a><a data-type="indexterm" data-primary="resources" id="res2"></a>fundamental abstraction in Mesos is that of the resource—tasks and executors consume resources while performing their work.
A common question is: “What is a resource?”
The answer is broad: a resource is anything that a task or executor uses while doing its work.
For example, the standard resources (and thus the resources that nearly every framework uses) are <code>cpus</code>, <code>mem</code> (memory), <code>disk</code>, and <code>ports</code>.
The <a data-type="indexterm" data-primary="resources" data-secondary="disk" id="idp42240"></a><a data-type="indexterm" data-primary="resources" data-secondary="ports" id="idp43248"></a><a data-type="indexterm" data-primary="resources" data-secondary="ranges" id="idm288896"></a><a data-type="indexterm" data-primary="resources" data-secondary="sets" id="idm287952"></a>first three of those resources are scalar: they represent a total amount available, from which tasks deduct their usage.
There are other resource types available in Mesos, as well.
<em>Ranges</em> are lists of integers from which single elements or subranges can be allocated; for example, these are used to represent the ports available and in use.
The last resource type, <em>sets</em>, are simply unordered collections of strings.
We’ll see an example of a set later on.
First, let’s learn about the standard resources:</p>
<dl>
<dt><code>cpus</code></dt>
<dd>
<p>This <a data-type="indexterm" data-primary="resources" data-secondary="cpus" id="idm283968"></a>resource expresses how many CPU cores are available.
Tasks may use fractional parts of a CPU—this is possible because Mesos slaves use CPU shares, rather than reserving specific CPUs.
This means that, if you have 1.5 <code>cpus</code> reserved, your processes will be allowed to use a total of 1.5 seconds of CPU time each second.
That could mean that, within a single executor, two processes each get 750 milliseconds of CPU time per second, or one process gets 1 second of CPU time and another gets 500 milliseconds of CPU time each in a given second.
The benefit of using CPU shares is that if some task would be able to utilize more than its share, and no other task would use an otherwise idle CPU, the first task can potentially use more than its share.
As a result, the <code>cpus</code> reserved provides a guaranteed minimum of CPU time available to the task—if additional capacity is available, it will be allowed to use more.</p>
</dd>
<dt><code>mem</code></dt>
<dd>
<p><code>mem</code> <a data-type="indexterm" data-primary="resources" data-secondary="mem (memory)" id="idm279344"></a>is how many megabytes of memory are available.
Unlike CPUs, which can burst to use more than their allocation if there’s spare capacity, memory is a strictly preallocated resource.
As a result, choosing the correct memory for tasks can be tricky: too little, and the tasks get killed when they try to allocate more than their allotment; too much, and memory sits idle that could otherwise be used for running more tasks.</p>
</dd>
<dt><code>disk</code></dt>
<dd>
<p><code>disk</code> represents the amount of scratch space (in megabytes) that should be available in the container’s sandbox.
Since disk usage can be highly variable due to the unpredictability of errors filling up logs, many framework developers don’t worry about reserving this resource in their tasks.
Furthermore, by default, Mesos slaves don’t even enforce when a task uses more disk than allocated. (To change that behavior, you can pass the option <code>--enforce_container_disk_quota</code> on your slaves’ command lines.
The other reason that this value is ignored is that the Mesos slaves automatically garbage collect the sandboxes of finished tasks when they need to reclaim disk space (see the following sidebar for details and advice on configuring garbage collection for slaves).</p>
</dd>
</dl>
<aside data-type="sidebar" epub:type="sidebar" class="pagebreak-before"><div class="sidebar" id="sandbox_disk_gc_config">
<h5>Configuring Slave Sandbox Garbage Collection</h5>
<p>As <a data-type="indexterm" data-primary="slaves" data-secondary="garbage collector (GC)" id="slaves2gc"></a><a data-type="indexterm" data-primary="garbage collector (GC)" id="gc2"></a>tasks run on your Mesos cluster, they’re sure to write data to disk.
They can generate logs, temporarily store output files, or cache their data or binaries.
As mentioned, most Mesos users don’t bother to enable the disk quota enforcement, since most disks are so big that it’s unlikely a single job will fill them up.
However, this logic works only in the short term.
After days or weeks of running tasks, the sum of all the outputs of the tasks on a given machine will certainly exceed that slave’s disk capacity.
To solve this problem, Mesos slaves garbage collect old data from their disks.
Let’s look at the command-line options that configure the slave disk garbage collector (GC):</p>
<dl>
<dt><code>--gc_delay</code></dt>
<dd>
<p>This option selects the maximum amount of time that an executor directory can exist before it is deleted.
For example, it could be set to <code>--gc_delay=3days</code> or <code>--gc_delay=2weeks</code>; the default is <code>--gc_delay=1weeks</code>.
Note that the system may shorten this delay, depending on the available disk usage.</p>
</dd>
<dt><code>--disk_watch_interval</code></dt>
<dd>
<p>This option selects how often the disk usage is checked (and thus how often the GC will run).
It uses the same time notation as the GC delay setting.
For example, it could be set to <code>--disk_watch_interval=10secs</code>; the default value is <code>--disk_watch_interval=1mins</code>.
If you set this to be too frequent, you could impact hard drive performance by enumerating directories too often.</p>
</dd>
<dt><code>--gc_disk_headroom</code></dt>
<dd>
<p>This option selects what percentage of headroom, or free space, should be targeted by the GC.
If you set the headroom too small, a task that writes to the disk too fast could consume all of the available space before the GC has time to run.
On the flipside, if you set this too large, files will be garbage collected far earlier than necessary, which could make debugging annoying (e.g., if your data got deleted before you could look through it).
The value of this option should be between 0.0 and 1.0; the default is <code>--gc_disk_headroom=0.1</code>, meaning that Mesos targets 10% of the disk as free space.
The formula used to calculate the maximum age for an output directory is:</p>
</dd>
</dl>
<div data-type="equation">
<p><code>max_age</code> = max (0.0, (1.0 – <code>gc_disk_headroom</code> – <code>disk_usage</code>))</p>
</div>
</div></aside>
<dl>
<dt><code>ports</code></dt>
<dd>
<p>Ports <a data-type="indexterm" data-primary="resources" data-secondary="ports" id="idp3218688"></a>are the first (and only default) nonscalar resource on Mesos slaves that we’ll need to understand.
Many tasks, such as HTTP servers, will want to open one or more ports, so that they can listen for incoming connections.
Since each port can only be bound to one task, Mesos helps by allowing tasks to reserve specific ports, so that each task uses a nonconflicting range.
Furthermore, if a task <em>must</em> be bound to a particular port, then it can decline offers that don’t include that port in the available range.
By default, Mesos slaves expose ports 31000–32000; however, you can change this range by setting the <code>ports</code> resource to whatever you’d like on the command line.</p>
</dd>
</dl>

<p>Now <a data-type="indexterm" data-primary="slaves" data-secondary="garbage collector (GC)" data-startref="slaves2gc" id="idp3221952"></a><a data-type="indexterm" data-primary="garbage collector (GC)" data-startref="gc2" id="idp3223232"></a>that we’ve seen the basics of Mesos slave resources and learned about their default behaviors, let’s learn how we can customize the resources offered.</p>








<section data-type="sect2" data-pdf-bookmark="Configuring Custom Resources"><div class="sect2" id="configuring_custom_resources">
<h2>Configuring Custom Resources</h2>

<p>Perhaps <a data-type="indexterm" data-primary="slaves" data-secondary="custom resource configuration" id="idp3434896"></a><a data-type="indexterm" data-primary="resources" data-secondary="custom resource configuration" id="idp3435968"></a>you want to increase or decrease the resources set aside for operating system services.
Maybe you need to expose additional ports, or ports within a particular range, in order to run a certain framework.
Or possibly your slave machines have an exotic type of hardware, like a GPGPU, and you’d like to have Mesos manage the reservation and allocation of these devices.
Finally, perhaps you’d like to reserve some of your resources to only be usable by a particular <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#mesos_roles">role</a>.
In any of these cases, you must provide a custom resource configuration to your Mesos slave.</p>

<p>Mesos resources are specified as key/value pairs.
The <em>key</em> is the name of the resource: for example, <code>cpus</code>, <code>mem</code>, <code>disk</code>, or <code>ports</code>.
The <em>value</em> is how many of those resources are available; the resource’s type is determined by the value’s syntax.
Each resource is written as <em><code>key:value</code></em>; all the resources are concatenated together with semicolons and passed via the command line.
Mesos supports scalar, set, and range resources.
You can view the full grammar of resource attributes <a href="http://mesos.apache.org/documentation/attributes-resources/">in the Mesos documentation</a>, but we’ll go over a simple example.</p>

<p>Suppose that we’d like to have our slave advertise the following resources: 4.5 CPUs, 8 GB of RAM, the ports in the ranges of 1000–5000 and 31000–32000, and that it has 2 GPGPUs.
Then, we’ll have the following settings:</p>
<table>

<thead>
<tr>
<th>Resource</th>
<th>Value</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>cpus</code></p></td>
<td><p><code>4.5</code></p></td>
<td><p>Note that for scalar resources, you can provide a double.</p></td>
</tr>
<tr>
<td><p><code>mem</code></p></td>
<td><p><code>8192</code></p></td>
<td><p>Remember that memory is in MB.</p></td>
</tr>
<tr>
<td><p><code>ports</code></p></td>
<td><p><code>[1000-5000,31000-32000]</code></p></td>
<td><p>Ranges are written in square brackets; commas separate discontinuities.</p></td>
</tr>
<tr>
<td><p><code>gpgpus</code></p></td>
<td><p><code>{gpu1,gpu2}</code></p></td>
<td><p>Sets are written in curly braces; elements are separated by commas.</p></td>
</tr>
</tbody>
</table>

<p>To pass this on the command line, we’d use the flag:</p>

<pre data-type="programlisting">--resources='cpus:4;mem:8192;ports:[1000-5000;31000-32000];gpgpus:{gpu1,gpu2}'</pre>

<p>All of the resources specified will belong to the <a data-type="indexterm" data-primary="resources" data-startref="res2" id="idp3458208"></a>default role.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Configuring Slave Attributes"><div class="sect2" id="configuring_attributes">
<h2>Configuring Slave Attributes</h2>

<p>Slaves <a data-type="indexterm" data-primary="slaves" data-secondary="attribute configuration" id="idp3461248"></a>can expose arbitrary key/value data about the machine as attributes.
Unlike resources, attributes are not used by the Mesos allocator.
They are merely passed along to framework schedulers to aid in their scheduling decisions.
Suppose that you wanted to pass the following table of key/value pairs as attributes on the slave:</p>
<table>

<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>operating_system</code></p></td>
<td><p><code>ubuntu</code></p></td>
</tr>
<tr>
<td><p><code>cpu_class</code></p></td>
<td><p><code>haswell</code></p></td>
</tr>
<tr>
<td><p><code>zone</code></p></td>
<td><p><code>us_east</code></p></td>
</tr>
<tr>
<td><p><code>rack</code></p></td>
<td><p><code>22</code></p></td>
</tr>
</tbody>
</table>

<p>To pass these attributes into the slave, we separate the keys and values with colons and separate the pairs with semicolons.
This is the final command-line option pass:</p>

<pre data-type="programlisting">--attributes='operating_system:ubuntu;cpu_class:haswell;zone:us_east;rack:22'</pre>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Roles"><div class="sect1" id="mesos_roles">
<h1>Roles</h1>

<p>In <a data-type="indexterm" data-primary="roles" id="r2"></a>order to decide which resources can be offered to which frameworks, Mesos includes the concept of “roles.”
A role is like a group: you can have the <code>dgrnbrg</code> role (for things you run), the <code>qa</code> role (for quality assurance-related tasks), the <code>db</code> role (for databases), and so on.
Besides being used to exclusively reserve resources, roles also can be used to assign weights to Mesos’s fair sharing algorithm.
This allows you to specify that some roles should receive a greater ratio of resources on the cluster than others.
When registering a framework, you may specify which role it belongs to by setting the <code>role</code> field in the <code>FrameworkInfo</code> message used to register.
Frameworks will only receive offers that are for their role, or for the <code>*</code> role.</p>

<p>If you’d like to use roles, then you must include a comma-separated list of the valid roles on the master.
For example, if you’d like to have <code>dev</code>, <code>qa</code>, and <code>prod</code> roles, then you’d need to pass <code>--roles=dev,qa,prod</code> to the master.
To assign weights to those roles, so that <code>dev</code> gets twice as many offers as <code>qa</code> and <code>prod</code> gets three times as many offers as <code>qa</code>, you’d pass <code>--weights='dev=2,qa=1,prod=3'</code>.</p>
<div data-type="tip"><h1>Securing Roles</h1>
<p>By <a data-type="indexterm" data-primary="roles" data-secondary="securing" id="idp345520"></a>default, any framework may claim to belong to any role.
If necessary, roles can be secured through access control lists (ACLs), a security feature that is beyond the scope of this book.
The <code>register_frameworks</code> ACL controls which roles each principal (aka user) can use when registering frameworks.</p>
</div>








<section data-type="sect2" data-pdf-bookmark="Static and Dynamic Slave Reservations"><div class="sect2" id="slave_reservations">
<h2>Static and Dynamic Slave Reservations</h2>

<p>Slave reservations are the way to ensure that specific resources are always available for particular use cases.
Until Mesos 0.25, only static reservations were available for operators.
Now, there’s also a dynamic API to reserve and unreserve resources without needing to change the command line.</p>










<section data-type="sect3" data-pdf-bookmark="Static reservations"><div class="sect3" id="idp349808">
<h3>Static reservations</h3>

<p>Rather <a data-type="indexterm" data-primary="slave reservations" data-secondary="static" id="sr2s"></a><a data-type="indexterm" data-primary="roles" data-secondary="static slave reservations" id="r2sr"></a><a data-type="indexterm" data-primary="static slave reservations" id="sr2"></a><a data-type="indexterm" data-primary="reservations" data-secondary="static" id="r2s"></a>than only specifying which resources a slave exposes on its command line, we can also specify which roles can use those resources; this reserves those resources for a particular role.
In the previous example, we didn’t specify any roles for the resources; as a result, all the resources were assigned to the default role.
The default role is set by the <code>--default_role</code> <a data-type="indexterm" data-primary="roles" data-secondary="default role" id="r2dr"></a>slave command-line option.
If <code>--default_role</code> is unset, then the default role will be <code>*</code> (anyone).</p>

<p>To specify the role for a particular resource, we place the role name in parentheses after the resource.
Let’s suppose that we have a machine with 4 CPUs and 16 GB of RAM.
We’d like to reserve 1 CPU and 4 GB of RAM for the role <code>prod</code>, and 2 CPUs and 1 GB of RAM for the role <code>qa</code>.
The remainder of the resources should be able to be used by any user of the system.
Then, we’ll have the following settings:</p>
<table>

<thead>
<tr>
<th>Resource</th>
<th>Value</th>
<th>Role</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>cpus</code></p></td>
<td><p><code>1</code></p></td>
<td><p><code>prod</code></p></td>
</tr>
<tr>
<td><p><code>mem</code></p></td>
<td><p><code>4096</code></p></td>
<td><p><code>prod</code></p></td>
</tr>
<tr>
<td><p><code>cpus</code></p></td>
<td><p><code>2</code></p></td>
<td><p><code>qa</code></p></td>
</tr>
<tr>
<td><p><code>mem</code></p></td>
<td><p><code>1024</code></p></td>
<td><p><code>qa</code></p></td>
</tr>
<tr>
<td><p><code>cpus</code></p></td>
<td><p><code>13</code></p></td>
<td><p><code>*</code></p></td>
</tr>
<tr>
<td><p><code>mem</code></p></td>
<td><p><code>11264</code></p></td>
<td><p><code>*</code></p></td>
</tr>
</tbody>
</table>

<p>To configure the slave, we can use the following command-line argument (note that this should all be typed on a single line, without the <code>\</code> or any spaces; the command line has been wrapped here to fit in the page margins):</p>

<pre data-type="programlisting">--resources='cpus(prod):1;mem(prod):4096; \
  cpus(qa):2;mem(qa):1024;cpus:13;mem:11264'</pre>

<p>Note that we don’t have to specify the role for the resources intended for <code>*</code>, since that’s the default role.
We could also change the default role to <code>prod</code>, and thus the command line would change:</p>

<pre data-type="programlisting">--default_role=prod \
  --resources='cpus:1;mem:4096;cpus(qa):2;mem(qa):1024;cpus(*):13;mem(*):11264'</pre>

<p>Note that changing the default role <a data-type="indexterm" data-primary="roles" data-secondary="default role" data-startref="r2dr" id="idm1063728"></a>means that the autodetected disk and port ranges will also go to the <code>prod</code> role.</p>

<p>As you can see, slave reservations are a very powerful system that gives you control to ensure that production-critical workloads always receive a minimum allocation.
At the same time, they’re relatively tedious to configure and difficult to change, since they require changing the slave command <a data-type="indexterm" data-primary="slave reservations" data-secondary="static" data-startref="sr2s" id="idm1061200"></a><a data-type="indexterm" data-primary="roles" data-secondary="static slave reservations" data-startref="r2sr" id="idm1059952"></a><a data-type="indexterm" data-primary="static slave reservations" data-startref="sr2" id="idm1058720"></a><a data-type="indexterm" data-primary="reservations" data-secondary="static" data-startref="r2s" id="idm1057760"></a>line.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Dynamic reservations"><div class="sect3" id="dynamic_reservations">
<h3>Dynamic reservations</h3>

<p>As <a data-type="indexterm" data-primary="slave reservations" data-secondary="dynamic" id="sr2d"></a><a data-type="indexterm" data-primary="roles" data-secondary="dynamic slave reservations" id="r2dr1"></a><a data-type="indexterm" data-primary="dynamic slave reservations" id="dr2"></a>of Mesos 0.25, reservations can be created and destroyed via the <code>/master/reserve</code> and <code>/master/unreserve</code> HTTP endpoints.
Let’s look at how we’d reserve and unreserve the resources as shown in the previous section.
For these examples, we’ll assume that we’ve configured HTTP Basic authentication for a user principal <code>admin</code>, and that the appropriate ACLs have been configured.
First we’ll write some JSON, specifying the resources to reserve  (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#resources_dot_json">Example&nbsp;2-1</a>).</p>
<div id="resources_dot_json" data-type="example">
<h5><span class="label">Example 2-1. </span>resources.json</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">[</code><code>
    </code><code class="p">{</code><code>
        </code><code class="nt">"name"</code><code class="p">:</code><code> </code><code class="s2">"cpus"</code><code class="p">,</code><code>
        </code><code class="nt">"type"</code><code class="p">:</code><code> </code><code class="s2">"SCALAR"</code><code class="p">,</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
        </code><code class="nt">"scalar"</code><code class="p">:</code><code> </code><code class="p">{</code><code> </code><code class="nt">"value"</code><code class="p">:</code><code> </code><code class="mi">1</code><code> </code><code class="p">}</code><code class="p">,</code><code>
        </code><code class="nt">"role"</code><code class="p">:</code><code> </code><code class="s2">"prod"</code><code class="p">,</code><code>
        </code><code class="nt">"reservation"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
            </code><code class="nt">"principal"</code><code class="p">:</code><code> </code><code class="s2">"admin"</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
        </code><code class="p">}</code><code>
    </code><code class="p">}</code><code class="p">,</code><code>
    </code><code class="p">{</code><code>
        </code><code class="nt">"name"</code><code class="p">:</code><code> </code><code class="s2">"mem"</code><code class="p">,</code><code>
        </code><code class="nt">"type"</code><code class="p">:</code><code> </code><code class="s2">"SCALAR"</code><code class="p">,</code><code>
        </code><code class="nt">"scalar"</code><code class="p">:</code><code> </code><code class="p">{</code><code> </code><code class="nt">"value"</code><code class="p">:</code><code> </code><code class="mi">4096</code><code> </code><code class="p">}</code><code class="p">,</code><code>
        </code><code class="nt">"role"</code><code class="p">:</code><code> </code><code class="s2">"prod"</code><code class="p">,</code><code>
        </code><code class="nt">"reservation"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
            </code><code class="nt">"principal"</code><code class="p">:</code><code> </code><code class="s2">"admin"</code><code>
        </code><code class="p">}</code><code>
    </code><code class="p">}</code><code class="p">,</code><code>
    </code><code class="p">{</code><code>
        </code><code class="nt">"name"</code><code class="p">:</code><code> </code><code class="s2">"cpus"</code><code class="p">,</code><code>
        </code><code class="nt">"type"</code><code class="p">:</code><code> </code><code class="s2">"SCALAR"</code><code class="p">,</code><code>
        </code><code class="nt">"scalar"</code><code class="p">:</code><code> </code><code class="p">{</code><code> </code><code class="nt">"value"</code><code class="p">:</code><code> </code><code class="mi">2</code><code> </code><code class="p">}</code><code class="p">,</code><code>
        </code><code class="nt">"role"</code><code class="p">:</code><code> </code><code class="s2">"qa"</code><code class="p">,</code><code>
        </code><code class="nt">"reservation"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
            </code><code class="nt">"principal"</code><code class="p">:</code><code> </code><code class="s2">"admin"</code><code>
        </code><code class="p">}</code><code>
    </code><code class="p">}</code><code class="p">,</code><code>
    </code><code class="p">{</code><code>
        </code><code class="nt">"name"</code><code class="p">:</code><code> </code><code class="s2">"mem"</code><code class="p">,</code><code>
        </code><code class="nt">"type"</code><code class="p">:</code><code> </code><code class="s2">"SCALAR"</code><code class="p">,</code><code>
        </code><code class="nt">"scalar"</code><code class="p">:</code><code> </code><code class="p">{</code><code> </code><code class="nt">"value"</code><code class="p">:</code><code> </code><code class="mi">1024</code><code> </code><code class="p">}</code><code class="p">,</code><code>
        </code><code class="nt">"role"</code><code class="p">:</code><code> </code><code class="s2">"qa"</code><code class="p">,</code><code>
        </code><code class="nt">"reservation"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
            </code><code class="nt">"principal"</code><code class="p">:</code><code> </code><code class="s2">"admin"</code><code>
        </code><code class="p">}</code><code>
    </code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_getting_started_with_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>The HTTP API specifies resources the same way as the Mesos resource protobuf. See <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#mesos_proto_explanation">“Understanding mesos.proto”</a> to learn more about this structure.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Dynamic reservations must be associated with a user, <a data-type="indexterm" data-primary="principals" id="idp7004608"></a>or <em>principal</em>. To make this reservation, we’ll need to present the credentials of the <code>admin</code> user when we submit it.</p></dd>
</dl>

<p>To submit this reservation, we’ll also need the slave ID of the slave on which we want to make this reservation
(we’ll use <code>$SLAVEID</code> in the example; a normal slave ID will look like <code>201509191529-2380865683-5050-11189-4621</code>).
Let’s see how to combine our user credentials, <em>resources.json</em>, and slave ID into <a data-type="indexterm" data-primary="curl command" id="idp6996288"></a>a <code>curl</code> command:</p>

<pre data-type="programlisting">curl -u admin:password \ <a class="co" id="co_getting_started_with_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a>
     -d slaveId=$SLAVEID\ <a class="co" id="co_getting_started_with_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a>
     -d resources="$(cat resources.json)"\ <a class="co" id="co_getting_started_with_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a>
     -X POST\ <a class="co" id="co_getting_started_with_mesos_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a>
     http://&lt;ip&gt;:&lt;port&gt;/master/reserve <a class="co" id="co_getting_started_with_mesos_CO2-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO2-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_getting_started_with_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>For this example, we assume that the <code>admin</code> user’s password was set to <code>password</code>.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We provide the slave ID and resources as key/value pairs to the endpoint.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We will pass the resources in JSON format to <code>curl</code>. Note that the actual data that Mesos sees looks like <code>slaveId=$SLAVEID&amp;resources=$JSON</code>.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Both the <code>/reserve</code> and <code>/unreserve</code> endpoints require <code>POST</code>ing the data.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO2-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO2-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>We need to specify the URL of the Mesos master. This API makes reservations more convenient to configure, since you only need to interact with the master, rather than configuring each slave’s reservation by interacting with that slave directly.</p></dd>
</dl>

<p>Destroying a reservation is almost identical to creating it:</p>

<pre data-type="programlisting">curl -u admin:password \
     -d slaveId=$SLAVEID\
     -d resources="$(cat resources.json)"\
     -X POST\
     http://&lt;ip&gt;:&lt;port&gt;/master/unreserve <a class="co" id="co_getting_started_with_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_getting_started_with_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Note that the only thing we change is that we’re now using the <code>/unreserve</code> endpoint. We still need to specify exactly which resources are being unreserved.</p></dd>
</dl>

<p>The new HTTP API for slave reservations promises to make ad hoc reservations much simpler to create, manage, and destroy.
We should start to see tools to interact with this API at a higher level emerging as adoption increases (bear in mind that it was only released in October 2015).</p>
</div></section>



</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Tasks and Executors"><div class="sect1" id="tasks_and_executors_intro">
<h1>Tasks and Executors</h1>

<p>When <a data-type="indexterm" data-primary="slave reservations" data-secondary="dynamic" data-startref="sr2d" id="idp7236304"></a><a data-type="indexterm" data-primary="roles" data-secondary="dynamic slave reservations" data-startref="r2dr" id="idp7230928"></a><a data-type="indexterm" data-primary="dynamic slave reservations" data-startref="dr2" id="idp7232112"></a><a data-type="indexterm" data-primary="tasks" data-secondary="versus executors" id="t2ve"></a><a data-type="indexterm" data-primary="executors" data-secondary="versus tasks" id="e2vt"></a>a scheduler wants to do some work, it launches an <em>executor</em>.
The executor is simply the scheduler’s worker: the scheduler can decide to send one or more <em>tasks</em> to an executor, which will work on those tasks independently, sending status updates to the scheduler until the tasks are complete.</p>

<p>Up to this point, we haven’t tried to distinguish the ideas of tasks and executors, because usually each executor has a single task, so there’s not much point in differentiating between them.
However, some frameworks leverage the full power of the task and executor abstraction, and to understand these frameworks we must understand the abstraction.
For that we must first understand the problem: tasks are things that our scheduler wants to run in a container on a slave;
however, we’d sometimes like to be able to run multiple tasks in the same container.
For example, this pattern shows up with Storm workers and Hadoop TaskTrackers, each of which can contain many tasks.</p>

<p>So, what’s an executor?
An executor is a process container that runs tasks.</p>

<p>And what’s a task?
A task is the unit of work in Mesos.</p>

<p><a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#relationship_slaves_executors">Figure&nbsp;2-1</a> illustrates the relationship between the elements of this abstraction.</p>

<figure><div id="relationship_slaves_executors" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0201.png" alt="Image depicting executors and tasks on a slave" width="703" height="868" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0201.png">
<h6><span class="label">Figure 2-1. </span>Relationship between slaves (machines), executors (containers), and tasks</h6>
</div></figure>

<p>There are also some caveats that you should be aware of:</p>
<dl>
<dt>Tasks can adjust the size of the executor’s container</dt>
<dd>
<p>When you launch a task or executor in Mesos, both have resources attached to them.
The reason for this is that an executor has a basic amount of resources that it requires for itself, and then each task can use additional resources.
Mesos will automatically expand and contract the executor’s container to have resources equal to the sum of those required by the executor plus all of its running tasks.</p>
</dd>
<dt>APIs can be task or executor oriented</dt>
<dd>
<p>When programming for the executor API (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ch_mesos_executor">Chapter&nbsp;5</a> for details), some communication APIs between the executor and scheduler are are specified per task (such as <code>launchTask</code> and <code>statusUpdate</code>), whereas other APIs are per executor (such as <code>frameworkMessage</code>).
It’s up to the framework developers to make sure that they associate messages with tasks whenever necessary, regardless of whether the Mesos API does that automatically.</p>
</dd>
<dt>Most frameworks don’t worry about distinguishing tasks and executors</dt>
<dd>
<p>Nearly every Mesos framework has one task for each executor.
This means they don’t need to worry about various idiosyncrasies in the executor APIs.
Unfortunately, that in turn means that occasionally the executor APIs can be difficult to understand, since they see less use.</p>
</dd>
</dl>








<section data-type="sect2" data-pdf-bookmark="CommandExecutor"><div class="sect2" id="command_executor_info">
<h2>CommandExecutor</h2>

<p>Most <a data-type="indexterm" data-primary="CommandExecutor" id="idp7214576"></a>users and developers don’t need to leverage the sophisticated features of the Mesos executor APIs.
To assist rapid and reliable application development, Mesos comes with the <code>CommandExecutor</code>, which is a special, simplified executor.
If your task simply launches a command-line application (and optionally downloads it from a location in storage) or a Docker image, you can specify a <code>CommandInfo</code> when launching a task, rather than an <code>ExecutorInfo</code>.
If you do this, then Mesos will launch the specified command with the built-in <code>CommandExecutor</code>, which will handle the Mesos messaging protocol for you.
Many frameworks, such as Chronos and Marathon, often use the <code>CommandExecutor</code> for its <a data-type="indexterm" data-primary="tasks" data-secondary="versus executors" data-startref="t2ve" id="idp7208704"></a><a data-type="indexterm" data-primary="executors" data-secondary="versus tasks" data-startref="e2vt" id="idp7205248"></a>simplicity.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Understanding mesos.proto"><div class="sect1" id="mesos_proto_explanation">
<h1>Understanding mesos.proto</h1>

<p>Throughout <a data-type="indexterm" data-primary="protobufs" id="p2"></a><a data-type="indexterm" data-primary="mesos.proto" id="mp2"></a><a data-type="indexterm" data-primary="Google Protocol Buffers" id="gpb2"></a>this book and your own development efforts, you’ll often wonder how you configure some API or what the configuration options are for some feature.
All communication with Mesos is encoded in <a href="https://developers.google.com/protocol-buffers/">Google Protocol Buffers</a> (commonly known as <em>protobufs</em>).
Lucky for us, all of the data schemas are stored in a central location: the file <em>include/mesos/mesos.proto</em> in the <a href="https://github.com/apache/mesos">Mesos codebase</a>.
Let’s take a tour of Google protobufs, and learn some idioms that frequently show up in the Mesos codebase.</p>

<p>Protobufs is an interface description language that allows an application’s developers to specify strongly typed messages that exist in their system.
Many languages have protobuf compilers, which convert <em>.proto</em> files into efficient serializers and deserializers so that all of the languages can communicate with an efficient binary encoding.</p>

<p>First, let’s learn the basics of protobufs:</p>

<pre data-type="programlisting" data-code-language="protobuf"><code class="cm">/** </code><a class="co" id="co_getting_started_with_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code class="cm">
 *  This represents information about a user.
 *  We'll respect their privacy as much as possible.
 */</code><code>
</code><code class="kd">message</code><code> </code><code class="nc">UserInfo</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>  </code><code class="c1">// The name of the user </code><a class="co" id="co_getting_started_with_mesos_CO4-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code class="c1">
</code><code>  </code><code class="k">required</code><code> </code><code class="kt">string</code><code> </code><code class="na">username</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>  </code><code class="k">required</code><code> </code><code class="n">Name</code><code> </code><code class="na">name</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>  </code><code class="k">optional</code><code> </code><code class="kt">uint32</code><code> </code><code class="na">age</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>  </code><code class="c1">// Auxiliary info
</code><code>  </code><code class="k">optional</code><code> </code><code class="kt">bytes</code><code> </code><code class="na">aux_info</code><code> </code><code class="o">=</code><code> </code><code class="mi">3</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code class="p">}</code><code>
</code><code>
</code><code class="kd">message</code><code> </code><code class="nc">Name</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-8" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-8"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a><code>
</code><code>  </code><code class="k">optional</code><code> </code><code class="kt">string</code><code> </code><code class="na">first</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-9" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-9"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/9.png" alt="9" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/9.png"></a><code>
</code><code>  </code><code class="k">optional</code><code> </code><code class="kt">string</code><code> </code><code class="na">last</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code class="p">;</code><code>
</code><code>
</code><code>  </code><code class="kd">message</code><code> </code><code class="nc">MiddleName</code><code> </code><code class="p">{</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-10" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-10"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/10.png" alt="10" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/10.png"></a><code>
</code><code>    </code><code class="k">optional</code><code> </code><code class="kt">string</code><code> </code><code class="na">regular</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-11" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-11"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/11.png" alt="11" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/11.png"></a><code>
</code><code>    </code><code class="k">optional</code><code> </code><code class="kt">string</code><code> </code><code class="na">patronymic</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code class="p">;</code><code>
</code><code>  </code><code class="p">}</code><code>
</code><code>
</code><code>  </code><code class="k">repeated</code><code> </code><code class="n">MiddleName</code><code> </code><code class="na">middle</code><code> </code><code class="o">=</code><code> </code><code class="mi">3</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-12" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-12"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/12.png" alt="12" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/12.png"></a><code>
</code><code>
</code><code>  </code><code class="k">optional</code><code> </code><code class="kt">uint32</code><code> </code><code class="na">total_parts</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code> </code><code class="p">[</code><code class="k">default</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code class="p">]</code><code class="p">;</code><code> </code><a class="co" id="co_getting_started_with_mesos_CO4-13" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#callout_getting_started_with_mesos_CO4-13"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/13.png" alt="13" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/13.png"></a><code>
</code><code class="p">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Protobufs supports block comments in the style of JavaDocs.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The main syntactic form in a <em>.proto</em> file is the <code>message</code>, which has a name (<code>UserInfo</code>) and a set of typed, named fields.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Protobufs also supports comments that span to the end of the line, like C and Java.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>A field has four parts: whether is it <code>required</code>, <code>optional</code>, or <code>repeated</code>; the type (<code>string</code>, in this case); the name of the field; and the field index. Each field index must be unique to the message; it is the developer’s responsibility to never reuse the indices, because they are the foundation on which backward compatibility in the binary format is built.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>A field’s type can itself be another <code>message</code>.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>Protobufs has many built-in numeric types; Mesos primarily uses <code>int32</code>, <code>uint32</code>, and <code>double</code>. Also, notice that the field indices don’t have to be in numeric order—they’re usually grouped to reflect the structure of the message.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p><code>bytes</code> allows you to store arbitrary binary data in a protobuf. In Mesos’s protobuf messages, this is used to enable developers to define custom additional payloads.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-8" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-8"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a></dt>
<dd><p>Generally, most or all of a project’s messages are defined in a single file.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-9" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-9"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/9.png" alt="9" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/9.png"></a></dt>
<dd><p>You don’t <em>need</em> to make any fields <code>required</code>.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-10" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-10"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/10.png" alt="10" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/10.png"></a></dt>
<dd><p>Messages can be nested into other messages.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-11" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-11"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/11.png" alt="11" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/11.png"></a></dt>
<dd><p>Note that the field numbering restarts within every message, even nested messages.</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-12" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-12"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/12.png" alt="12" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/12.png"></a></dt>
<dd><p>Fields can also be repeated, in which case they’re a list of zero or more entries of the specified type (in this case, <code>MiddleName</code>).</p></dd>
<dt><a class="co" id="callout_getting_started_with_mesos_CO4-13" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#co_getting_started_with_mesos_CO4-13"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/13.png" alt="13" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/13.png"></a></dt>
<dd><p>Protobufs allows default values to be specified.</p></dd>
</dl>

<p>Besides the basics, there are a few patterns that frequently show up in <em>mesos.proto</em>.
Firstly, any ID in the system typically has a message defined for it, with only a single required string value (c.f. <code>FrameworkID</code>, <code>TaskID</code>).
This is beneficial for typed languages like C++, Scala, and Java, because it ensures that different types of IDs can’t get mixed up.
Secondly, when there is a choice for what to specify (for instance, a custom executor vs. a command executor), both choices are made <code>optional</code>, and there should be a comment in <em>mesos.proto</em> that explains the choice.
Most messages that can be generated by framework code have a <code>data</code> field of type <code>bytes</code>: this is the place to put any serialized messages or data you may want to transmit.</p>
<div data-type="tip"><h1>The Browser Tab I Never Close</h1>
<p>Given the reliance on comments for this pattern, I always have <em>mesos.proto</em> open when I’m developing framework code.</p>
</div>

<p>Another common pattern in <em>mesos.proto</em> is <em>tagged unions</em>.
A <a data-type="indexterm" data-primary="tagged unions" id="idp7781184"></a><a data-type="indexterm" data-primary="protobufs" data-secondary="tagged union" id="idp7781792"></a>tagged union is also known as a <em>discriminated union</em>; <a data-type="indexterm" data-primary="discriminated unions" id="idp7783152"></a>it is used when there are multiple mutually exclusive choices for how to configure something.
Unions of this type, such as the <code>Resource</code> message, have every choice <code>optional</code>, so that you can fill in just one per message. There is also a required <code>Type</code> field, which indicates to the code which field you intended to specify. For example, to specify a scalar resource, the <code>Type</code> of the resource should be <code>SCALAR</code> and the <code>scalar</code> field should contain the value.</p>

<p>Finally, <em>mesos.proto</em> is usually where new features of Mesos are specified and incubated.
As a result, you’ll often see upcoming features described in <em>mesos.proto</em> without other official documentation.
For example, the service discovery system and the persistent volumes features were in <em>mesos.proto</em> for several releases prior to becoming stable, supported features in Mesos.
<em>mesos.proto</em> can give you a lot of insight into what’s coming up for Mesos; however, it can be confusing and overwhelming if you don’t ignore messages and fields unrelated to your task at <a data-type="indexterm" data-primary="mesos.proto" data-startref="mp2" id="idp7788848"></a><a data-type="indexterm" data-primary="Google Protocol Buffers" data-startref="gpb2" id="idp7789696"></a><a data-type="indexterm" data-primary="protobufs" data-startref="p2" id="idp7790544"></a>hand.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Not Managed by Mesos"><div class="sect1" id="idp7199280">
<h1>Not Managed by Mesos</h1>

<p>To have a functional Mesos cluster, you’ll need a few other applications that are difficult or impossible to run as frameworks:</p>
<dl>
<dt>ZooKeeper</dt>
<dd>
<p>Mesos <a data-type="indexterm" data-primary="ZooKeeper" id="idp7794176"></a>uses <a href="https://zookeeper.apache.org/">ZooKeeper</a> to provide discovery services across your cluster.
ZooKeeper quorums are named by the DNS names of the machines that they run on; as a result, the Mesos cluster’s ZooKeeper quorum usually runs on three or five specific machines, so that it can have a stable name.</p>
</dd>
<dt>Databases</dt>
<dd>
<p>Initial <a data-type="indexterm" data-primary="database hosting" id="idp7797200"></a>support for persistent volumes was only recently added, in Mesos version 0.23.
As a result, most databases don’t yet have mature Mesos frameworks.
Nevertheless, work is rapidly progressing on hosting databases on Mesos.
<a data-type="indexterm" data-primary="Twitter" id="idp7798176"></a><a data-type="indexterm" data-primary="Cotton" data-seealso="Myriad" id="idp7798784"></a>Twitter has been developing <a data-type="indexterm" data-primary="Apache Cotton" id="idp7799760"></a>Apache Cotton (previously called Mysos), which runs and manages MySQL on Mesos, since 2014.
Mesosphere <a data-type="indexterm" data-primary="Mesosphere" id="idp7800608"></a><a data-type="indexterm" data-primary="Cassandra" id="idp7801216"></a><a data-type="indexterm" data-primary="Kafka" id="idp7801824"></a>has also been working with its partners to productionalize Cassandra and Kafka on Mesos, and
Basho <a data-type="indexterm" data-primary="Basho" id="idp7802672"></a><a data-type="indexterm" data-primary="Riak" id="idp7803280"></a>has released a beta version of a Riak framework for Mesos, which includes a high-performance proxy layer that was enabled by Mesos.</p>
</dd>
<dt>Monitoring</dt>
<dd>
<p>Mesos <a data-type="indexterm" data-primary="frameworks" data-secondary="monitoring" id="idp7805184"></a>watches and monitors its frameworks, which helps developers build highly available and reliable systems.
But, in the loosely translated words of the Roman poet Juvenal, “Who watches the watchers?”
Mesos itself needs to be monitored; it collects instantaneous usage and utilization data, but that data should be archived and graphed to understand the cluster’s behavior over time.
In addition, Mesos isn’t built to identify issues with the machines that it’s running on.
Thus, a robust, productionalized Mesos cluster should have host-level monitoring, and it should archive and alert on data collected by Mesos itself.
One integrated solution to this is <a href="https://github.com/twosigma/satellite">Satellite</a>, which can automatically disable flaky slaves, generate alerts on custom conditions, and store historical data to InfluxDB, ElasticSearch, and many other databases.</p>
</dd>
</dl>

<p>Luckily, setting up a monitoring system and one ZooKeeper cluster involves a lot less work than setting up standalone versions of all the frameworks that we’re going to run on Mesos!</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp7808624">
<h1>Summary</h1>

<p>A Mesos cluster is comprised of the masters, which coordinate the cluster, and the slaves, which execute tasks on behalf of frameworks.
The master/slave structure of the Mesos cluster is mirrored by the frameworks, which are each composed of a scheduler that controls executors, which run on the slaves.</p>

<p>Mesos <a data-type="indexterm" data-primary="slaves" id="idp7810704"></a><a data-type="indexterm" data-primary="masters" id="idp7811312"></a>slaves can be customized with additional key/value metadata, custom resource types, and roles, which are all ways to ensure that framework schedulers can choose the best slaves on which to run their executors, and to help the administrators to guarantee the allocation behaviors of the Mesos masters.
The master and slave states can be browsed through web UIs that cross-reference data across the cluster.</p>

<p>Executors <a data-type="indexterm" data-primary="executors" id="idp7812848"></a>are the processes that actually run inside of containers on the slaves.
In Mesos, executors can host one or more tasks, which provides flexibility for framework authors to structure their applications however they’d like; however, most frameworks use the <code>CommandExecutor</code> <a data-type="indexterm" data-primary="CommandExecutor" id="idp7814240"></a>to run one task per executor (i.e., one task per container).</p>

<p>Finally, although Mesos provides a lot of functionality, one still must deploy certain tools outside of Mesos: specifically, a <a data-type="indexterm" data-primary="ZooKeeper" id="idp7815504"></a>ZooKeeper quorum to bootstrap the cluster, a monitoring system, and possibly some databases.</p>

<p>Now that we’ve had a tour of Mesos, let’s learn how to port an existing web application onto Mesos!</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm305504"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm305504-marker" class="totri-footnote">1</a></sup> Mesos uses a fair-sharing allocation algorithm called Dominant Resource Fairness (DRF). You can read about it in <a href="https://www.cs.berkeley.edu/~alig/papers/drf.pdf">Ali Ghodsi et al.’s 2011 paper “Dominant Resource Fairness: Fair Allocation of Multiple Resource Types.”</a></p><p data-type="footnote" id="idp3323936"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3323936-marker" class="totri-footnote">2</a></sup> It’s possible to run a slave as a specific user, and then that Mesos slave can only run executors as that user. This can be useful in high-security environments or during development.</p><p data-type="footnote" id="idp3334128"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3334128-marker" class="totri-footnote">3</a></sup> This isn’t really true. Remember, distributed systems are hard!</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">1. Introduction to Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch03.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">3. Porting an Existing Application to Mesos</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch02.html" data-for-analytics="9781491926543:ch02.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    <div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#">Reset</a>
</div>
</div>
  

<div class="annotator-notice"></div></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch03.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch03.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom gr__safaribooksonline_com" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch03.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch03.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>3. Porting an Existing Application to Mesos - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch03.html"><meta name="description" content=" Chapter 3. Porting an Existing Application to Mesos It’s time to learn how to build an application on top of Mesos. Rather than building everything from first principles, however ... "><meta property="og:title" content="3. Porting an Existing Application to Mesos"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="3. Porting an Existing Application to Mesos"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch03.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 3. Porting an Existing Application to Mesos It’s time to learn how to build an application on top of Mesos. Rather than building everything from first principles, however ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch03.html" data-for-analytics="9781491926543:ch03.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch03.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch03.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch03.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%203.%20Porting%20an%20Existing%20Application%20to%20Mesos&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch03.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch02.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">2. Getting Started with Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch04.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">4. Creating a New Framework for Mesos</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Porting an Existing Application to Mesos"><div class="chapter" id="marathon_chapter">
<h1><span class="label">Chapter 3. </span>Porting an Existing Application to Mesos</h1>


<p>It’s <a data-type="indexterm" data-primary="Marathon" id="m3"></a><a data-type="indexterm" data-primary="porting existing applications" data-see="Marathon" id="idp7819504"></a><a data-type="indexterm" data-primary="existing application porting" data-see="Marathon" id="idp7820352"></a><a data-type="indexterm" data-primary="legacy applications, porting" data-see="Marathon" id="idp7821200"></a>time to learn how to build an application on top of Mesos.
Rather than building everything from first principles, however, let’s take a look how to utilize existing frameworks to port our legacy applications.
When we think about most applications, they typically fall into two categories: applications that respond to requests and applications that do actions at a particular time.
In the <a href="http://bit.ly/LAMPwiki">LAMP stack</a>, these two components are PHP and cron jobs.</p>

<p>First, we’re going to look at how to move an existing HTTP-based application from your current infrastructure onto Mesos.
In doing so, we’re going to begin to be able to take advantage of Mesos’s scalability and resiliency, ending up with a system that can automatically heal and recover from common failure classes.
Besides improving the resiliency of the application, we’re also going to improve the isolation of the application’s components.
This will help us to achieve a better quality of service without struggling and suffering to build this directly on virtual machines.
We’ll use Marathon, a popular Mesos framework, to host our HTTP-based application.</p>

<p>Then, we’ll look at Chronos as a case study in using Marathon to add high availability and reliability to other frameworks.
Chronos will enable us to run programs at a specified interval—it can be used to schedule nightly data generation jobs or reports every 15 minutes.
We’ll also go over some recommendations for utilizing Chronos effectively and maintainably.</p>

<p>Finally, we’ll briefly touch on some alternatives to Marathon, Singularity and Aurora, which were developed by HubSpot and Twitter, respectively.</p>






<section data-type="sect1" data-pdf-bookmark="Moving a Web Application to Mesos"><div class="sect1" id="idp7825712">
<h1>Moving a Web Application to Mesos</h1>

<p>Nearly every company has a web application.
However, no matter whether it’s written in Ruby on Rails, Scala Play!, or Python’s Flask, deploying it in a reliable, scalable, highly available manner is always a challenge.
In this section, we’re going to learn about using Marathon—an easy-to-use Platform as a Service (PaaS) developed by <a data-type="indexterm" data-primary="Mesosphere" data-seealso="Marathon" id="idp7827200"></a>Mesosphere—and how to integrate with other tools, such as HAProxy.
Through this process, it is our goal to realize a few benefits over previous architectures:</p>
<ol>
<li>
<p>All of our backend processes will be able to run on any machine, and our Mesos framework will handle automatically spinning up new instances of the backend when existing instances fail.</p>
</li>
<li>
<p>We will host our static assets, fast-responding endpoints, dangerous endpoints,<sup><a data-type="noteref" id="idp7830224-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7830224" class="totri-footnote">1</a></sup> and API in entirely different containers to improve our isolation.</p>
</li>
<li>
<p>We will make it easy to deploy a new version or to roll back, and to do so in a matter of seconds.</p>
</li>
<li>
<p>We will put the pieces in place to allow our applications to autoscale based on demand.</p>
</li>

</ol>

<p>At its core, Marathon allows you to specify a command line or Docker image, number of CPUs, amount of memory, and number of instances, and it will start that many instances of that command line or image in containers with the requested amount of CPU and memory.
We will explore this basic configuration as well as a few ways to integrate Marathon with load balancers, in order to expose our services internally and to the outside world.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Setting Up Marathon"><div class="sect1" id="idp7834064">
<h1>Setting Up Marathon</h1>

<p>Obviously, <a data-type="indexterm" data-primary="Marathon" data-secondary="setting up" id="m3su"></a>in order to use Marathon, you’ll need to download it. Marathon comes prepackaged for Ubuntu, Debian, Red Hat, and CentOS on the <a href="https://mesosphere.com/downloads/">Mesosphere website</a>.
Of course, you can also build it yourself, by downloading the latest tarball from Mesosphere’s website, or by cloning it from <a href="https://github.com/mesosphere/marathon">GitHub</a>.
Marathon is written in Scala, so you simply need to run <code>sbt assembly</code> to build it.
From here on out, we’ll assume that you’ve got a copy of Marathon installed.</p>

<p>Marathon is trivial to run as a highly available application.
In fact, all you need to do to run Marathon in a highly available configuration is to ensure that you start two or three instances of Marathon, and that they all share the same <code>--zk</code> <a data-type="indexterm" data-primary="Marathon" data-secondary="command-line options" id="idp7839936"></a>command-line argument.
You should also make other options the same, such as the <code>--master</code>, <code>--framework-name</code>, and the ports that it listens for HTTP requests on, or you could see confusing behavior.
When running Marathon in this mode, all the instances of Marathon will correctly respond to requests, and they’ll magically synchronize their state so that you don’t need to worry about this.
Typically, you’ll finish the setup by assigning the instances of Marathon to a round-robin DNS name, or putting it behind a load balancer.
Please see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_cmd_line_opts">Table&nbsp;3-1</a> for further information on selected command-line options.</p>
<table id="marathon_cmd_line_opts">
<caption><span class="label">Table 3-1. </span>Selected Marathon command-line options</caption>
<thead>
<tr>
<th>Flag</th>
<th>Functionality</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><span class="keep-together"><code>--master <em>&lt;instance&gt;</em></code></span></p></td>
<td><p>The URL of the Mesos master. Usually of the form <code>zk:<em>//host1</em>:<em>port</em>,<em>host2</em>:<em>port,host3</em>:<em>port/mesos</em></code>.</p></td>
</tr>
<tr>
<td><p><span class="keep-together"><code>--framework-name <em>&lt;name&gt;</em></code></span></p></td>
<td><p>Allows you to customize the name of this instance of Marathon in Mesos; useful if you have multiple instances of Marathon running to stay organized.</p></td>
</tr>
<tr>
<td><p><span class="keep-together"><code>--zk <em>&lt;instance&gt;</em></code></span></p></td>
<td><p>Sets the instance of ZooKeeper in which Marathon’s state is stored. Usually of the form <code>zk:<em>//host1</em>:<em>port</em>,<em>host2</em>:<em>port</em>,<em>host3</em>:<em>port</em>/marathon</code>.</p></td>
</tr>
<tr>
<td><p><span class="keep-together"><code>--https-port <em>&lt;port&gt;</em></code></span></p></td>
<td><p>Enables HTTPS access to Marathon. See <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#chaos_https">“Securing Marathon and Chronos”</a> for details.</p></td>
</tr>
</tbody>
</table>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="chaos_https">
<h5>Securing Marathon and Chronos</h5>
<p>In <a data-type="indexterm" data-primary="Marathon" data-secondary="securing" id="m3s"></a><a data-type="indexterm" data-primary="Chronos" data-secondary="securing" id="ch3s"></a><a data-type="indexterm" data-primary="securing Marathon and Chronos" id="smc3"></a>this sidebar, we’ll go over how to secure Marathon and Chronos by requiring authentication before making any changes to them, and ensuring all API communications are protected with SSL.
Although many organizations run Marathon and Chronos within their trusted networks, others will need to apply access restrictions to ensure that only authorized users can view or make changes to the running jobs.
Note that this will not secure the connection between Marathon or Chronos and Mesos;
to do that, you’ll need to configure <code>--mesos_authentication_principal</code> and <code>--mesos_authentication_secret_file</code> for the Mesos authentication scheme you’ve chosen.
This is useful to guard against someone accidentally deleting or changing a production-critical service, or a rogue employee acting maliciously.</p>

<p>All of these security settings can be configured either with environment variables or with command-line options.
You should use the environment variables, because the command-line options will enable anyone logged into the machine running Marathon or Chronos to see the passwords by running <code>ps -f</code>.
The environment variables can be protected by having the script that starts the application <code>export</code> all the sensitive environment variables before launching.
The launcher script can have the permissions set to be unreadable to most users on the machine, which is how you’ll secure those passwords.</p>

<p>Chronos and Marathon are built on top of the same HTTP/REST services library, which is named <a data-type="indexterm" data-primary="Chaos" id="idp7869440"></a>Chaos. Chaos currently only supports HTTP Basic <a data-type="indexterm" data-primary="HTTP Basic Authentication  (HBA)" id="idp7870176"></a>authentication, also known as <a data-type="indexterm" data-primary="username/password authentication" id="idp7870912"></a>username/password authentication.
To set the <code>username:password</code> pair, you should format them as such (separated by a colon).
You can pass them as a command-line argument via:</p>
<pre data-type="programlisting">--http_credentials <em>username</em>:<em>password</em>
</pre>

<p>or as an environment variable via:</p>
<pre data-type="programlisting">MESOSPHERE_HTTP_CREDENTIALS=<em>username</em>:<em>password</em>
</pre>

<p>HTTP authentication is not terribly useful on its own, however, because anyone could listen to the connection between the client and server to recover the password.
To prevent this, you can enable SSL as well.
Because Chaos is a Java application, it needs to use the Java certificate file format, known as a <a href="http://en.wikipedia.org/wiki/Keystore">keystore</a>.
The <a data-type="indexterm" data-primary="keystore (Java)" id="idp7877184"></a><a data-type="indexterm" data-primary="Java keystore" id="idp7877920"></a>keystore is a password-protected container for the SSL certificate.
To configure this, you specify the path to the keystore on the command line via:</p>
<pre data-type="programlisting">--ssl_keystore_path <em>/path/to/keystore</em>
</pre>

<p>or as an environment variable via:</p>
<pre data-type="programlisting">MESOSPHERE_KEYSTORE_PATH=<em>/path/to/keystore</em>
</pre>

<p>You’ll also need to provide the password. You can do this on the command line via:</p>

<pre data-type="programlisting">--ssl_keystore_password password</pre>

<p>or as an environment variable via:</p>
<pre data-type="programlisting">MESOSPHERE_KEYSTORE_PASS=<em>password</em>
</pre>

<p>At this point, you are probably thinking, “Why does Java have to do everything differently? Why can’t it just be compatible with normal certificates?”
Luckily, it’s easy to convert a standard PEM-format PKCS12 certificate (such as the type most Certificate Authorities issue) into a keystore.
To do this, you’ll need your key (<em>mykey.pem</em>) and certificate (<em>mycert.pem</em>).
First, you’ll make a combined file (<em>mykeycert.pem</em>) by running:</p>

<pre data-type="programlisting">cat mykey.pem mycert.pem &gt; mykeycert.pem</pre>

<p>Then, you’ll use <code>openssl</code> to create the keystore (<em>mykeystore.pkcs12</em>) containing this certificate.
Strangely, keystores require all certificates that they store to have “aliases.”
Our certificate will be called <code>myalias</code>.
Without further ado, here’s the command:</p>

<pre data-type="programlisting">openssl pkcs12 -export -in mykeycert.pem -out mykeystore.pkcs12 \
    -name myalias -noiter -nomaciter</pre>

<p>And voilà! You can now use any standard issue certificate to secure Marathon and Chronos.</p>

<p>Make sure to disable the HTTP access once you’ve done this though, or you’ll have put a lock on the front door but left the back door wide open!
This can be done with the command-line argument <code>--disable_http</code> to Marathon and <a data-type="indexterm" data-primary="Marathon" data-secondary="securing" data-startref="m3s" id="idp7891408"></a><a data-type="indexterm" data-primary="Chronos" data-secondary="securing" data-startref="ch3s" id="idp7892688"></a><a data-type="indexterm" data-primary="securing Marathon and Chronos" data-startref="smc3" id="idp7893904"></a>Chronos.</p>
</div></aside>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Using Marathon"><div class="sect1" id="idp7861312">
<h1>Using Marathon</h1>

<p>Marathon <a data-type="indexterm" data-primary="Marathon" data-secondary="setting up" data-startref="m3su" id="idp7896640"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="using" id="m3u"></a>is controlled entirely through its HTTP API. With a working instance of Marathon, let’s try launching an application.</p>

<p>We’ll run a simple application: the famous <a data-type="indexterm" data-primary="Python  SimpleHTTPServer" id="idp7899776"></a><a data-type="indexterm" data-primary="SimpleHTTPServer" id="idp7900448"></a>Python <code>SimpleHTTPServer</code>.
This application simply serves the files in the directory in which it was started.
We’re going to base our example on it because nearly everyone’s got Python installed, and it’s available by default.</p>

<p>If you run this command:</p>

<pre data-type="programlisting">python -m SimpleHTTPServer 8000</pre>

<p>on your computer, then you should be able to navigate to <code>localhost:8000</code> in your browser and see a directory listing of the folder in which you started the server.</p>

<p>Let’s see how we can run that on a Marathon server running on <code>marathon.example.com:8080</code>.
We’ll first make a file containing the JSON descriptor of the Marathon application shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#basic_marathon_json_descriptor">Example&nbsp;3-1</a>.</p>
<div id="basic_marathon_json_descriptor" data-type="example">
<h5><span class="label">Example 3-1. </span>SimpleHTTPServer JSON descriptor</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"cmd"</code><code class="p">:</code><code> </code><code class="s2">"python -m SimpleHTTPServer 31500"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
    </code><code class="nt">"cpus"</code><code class="p">:</code><code> </code><code class="mf">0.5</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
    </code><code class="nt">"mem"</code><code class="p">:</code><code> </code><code class="mi">50</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
    </code><code class="nt">"instances"</code><code class="p">:</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
    </code><code class="nt">"id"</code><code class="p">:</code><code> </code><code class="s2">"my-first-app"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
    </code><code class="nt">"ports"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="mi">31500</code><code class="p">]</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
    </code><code class="nt">"requirePorts"</code><code class="p">:</code><code> </code><code class="kc">true</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO1-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO1-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>The <code>"cmd"</code> <a data-type="indexterm" data-primary="cmd" id="idp7955088"></a>specifies the command line that will launch your application.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p><code>"cpus"</code> <a data-type="indexterm" data-primary="resources" data-secondary="cpus" id="idp7958592"></a>specifies the number of CPUs that your application’s container should have. This number can be fractional.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p><code>"mem"</code> <a data-type="indexterm" data-primary="resources" data-secondary="mem (memory)" id="idp8003408"></a>specifies the number of MB of memory that your application’s container should have.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p><code>"instances"</code> <a data-type="indexterm" data-primary="instances" id="idp8006864"></a>specifies how many copies of this application should be started on the cluster. For this demo, we’ll only make one instance, but typical applications will have anywhere from 2 to 2,000 instances.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p><code>"id"</code> <a data-type="indexterm" data-primary="id" id="idp8010288"></a>is how we’ll refer to this application in the future via the APIs. This should be unique for each application.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p><code>"ports"</code> <a data-type="indexterm" data-primary="resources" data-secondary="ports" id="idp8013632"></a>is an array of the ports that the application requires. In this case, we only need a single port. Later, we’ll see how to dynamically allocate and bind to ports.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO1-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO1-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>Since we’re explicitly specifying which ports we want to allocate, we must tell Marathon, or else it will default to automatic port assignment.</p></dd>
</dl>

<p>Now let’s suppose that data has been stored in a file called <em>my-first-app.json</em>.
In order to start this application, we’ll use an HTTP <code>POST</code> to send the data to a Marathon server running at <code>marathon.example.com:8080</code>:</p>

<pre data-type="programlisting">curl -X POST -H 'Content-Type: application/json' \
    marathon.example.com:8080/v2/apps --data @my-first-app.json</pre>

<p>This should give us a response that looks something like:</p>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code>
   <code class="err">//</code> <code class="err">This</code> <code class="err">section</code> <code class="err">contains</code> <code class="err">parameters</code> <code class="err">we</code> <code class="err">specified</code>
   <code class="nt">"id"</code> <code class="p">:</code> <code class="s2">"/my-first-app"</code><code class="p">,</code>
   <code class="nt">"instances"</code> <code class="p">:</code> <code class="mi">1</code><code class="p">,</code>
   <code class="nt">"cmd"</code> <code class="p">:</code> <code class="s2">"python -m SimpleHTTPServer 31500"</code><code class="p">,</code>
   <code class="nt">"ports"</code> <code class="p">:</code> <code class="p">[</code> <code class="mi">31500</code> <code class="p">],</code>
   <code class="nt">"requirePorts"</code><code class="p">:</code> <code class="kc">true</code><code class="p">,</code>
   <code class="nt">"mem"</code> <code class="p">:</code> <code class="mi">50</code><code class="p">,</code>
   <code class="nt">"cpus"</code> <code class="p">:</code> <code class="mf">0.5</code><code class="p">,</code>

   <code class="err">//</code> <code class="err">This</code> <code class="err">section</code> <code class="err">contains</code> <code class="err">parameters</code> <code class="err">with</code> <code class="err">their</code> <code class="err">automatically</code> <code class="err">assigned</code> <code class="err">values</code>
   <code class="nt">"backoffFactor"</code> <code class="p">:</code> <code class="mf">1.15</code><code class="p">,</code>
   <code class="nt">"maxLaunchDelaySeconds"</code> <code class="p">:</code> <code class="mi">3600</code><code class="p">,</code>
   <code class="nt">"upgradeStrategy"</code> <code class="p">:</code> <code class="p">{</code>
      <code class="nt">"minimumHealthCapacity"</code> <code class="p">:</code> <code class="mi">1</code><code class="p">,</code>
      <code class="nt">"maximumOverCapacity"</code> <code class="p">:</code> <code class="mi">1</code>
   <code class="p">},</code>
   <code class="nt">"version"</code> <code class="p">:</code> <code class="s2">"2015-06-04T18:26:18.834Z"</code><code class="p">,</code>
   <code class="nt">"deployments"</code> <code class="p">:</code> <code class="p">[</code>
      <code class="p">{</code>
         <code class="nt">"id"</code> <code class="p">:</code> <code class="s2">"54e5fdf8-8a81-4f95-805f-b9ecc9293095"</code>
      <code class="p">}</code>
   <code class="p">],</code>
   <code class="nt">"backoffSeconds"</code> <code class="p">:</code> <code class="mi">1</code><code class="p">,</code>
   <code class="nt">"disk"</code> <code class="p">:</code> <code class="mi">0</code><code class="p">,</code>
   <code class="nt">"tasksRunning"</code> <code class="p">:</code> <code class="mi">0</code><code class="p">,</code>
   <code class="nt">"tasksHealthy"</code> <code class="p">:</code> <code class="mi">0</code><code class="p">,</code>
   <code class="nt">"tasks"</code> <code class="p">:</code> <code class="p">[],</code>
   <code class="nt">"tasksStaged"</code> <code class="p">:</code> <code class="mi">0</code><code class="p">,</code>

   <code class="err">//</code> <code class="err">This</code> <code class="err">section</code> <code class="err">contains</code> <code class="err">unspecified</code> <code class="err">parameters</code>
   <code class="nt">"executor"</code> <code class="p">:</code> <code class="s2">""</code><code class="p">,</code>
   <code class="nt">"storeUrls"</code> <code class="p">:</code> <code class="p">[],</code>
   <code class="nt">"dependencies"</code> <code class="p">:</code> <code class="p">[],</code>
   <code class="nt">"args"</code> <code class="p">:</code> <code class="kc">null</code><code class="p">,</code>
   <code class="nt">"healthChecks"</code> <code class="p">:</code> <code class="p">[],</code>
   <code class="nt">"uris"</code> <code class="p">:</code> <code class="p">[],</code>
   <code class="nt">"env"</code> <code class="p">:</code> <code class="p">{},</code>
   <code class="nt">"tasksUnhealthy"</code> <code class="p">:</code> <code class="mi">0</code><code class="p">,</code>
   <code class="nt">"user"</code> <code class="p">:</code> <code class="kc">null</code><code class="p">,</code>
   <code class="nt">"requirePorts"</code> <code class="p">:</code> <code class="kc">true</code><code class="p">,</code>
   <code class="nt">"container"</code> <code class="p">:</code> <code class="kc">null</code><code class="p">,</code>
   <code class="nt">"constraints"</code> <code class="p">:</code> <code class="p">[],</code>
   <code class="nt">"labels"</code> <code class="p">:</code> <code class="p">{},</code>
<code class="p">}</code></pre>

<p>which indicates that the application was started correctly.</p>

<p>We can find all the information about the running application by querying for information about <code>my-first-app</code> (what we decided to name this application):</p>

<pre data-type="programlisting">curl marathon.example.com:8080/v2/apps/my-first-app | python -m json.tool</pre>

<p>This query returns almost the exact same data as we got when we created the application.
The difference is that by now our application has had time to start running, so we can see information about the running tasks:</p>

<pre data-type="programlisting" data-code-language="json"><code class="err">/</code><code class="err">/</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code> </code><code class="err">s</code><code class="err">n</code><code class="err">i</code><code class="err">p</code><code> </code><code class="err">(</code><code class="err">s</code><code class="err">a</code><code class="err">m</code><code class="err">e</code><code> </code><code class="err">a</code><code class="err">s</code><code> </code><code class="err">b</code><code class="err">e</code><code class="err">f</code><code class="err">o</code><code class="err">r</code><code class="err">e</code><code class="err">)</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code>
    </code><code class="s2">"tasks"</code><code class="err">:</code><code> </code><code class="p">[</code><code>
        </code><code class="p">{</code><code>
            </code><code class="nt">"appId"</code><code class="p">:</code><code> </code><code class="s2">"/my-first-app"</code><code class="p">,</code><code>
            </code><code class="nt">"host"</code><code class="p">:</code><code> </code><code class="s2">"10.141.141.10"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
            </code><code class="nt">"id"</code><code class="p">:</code><code> </code><code class="s2">"my-first-app.7345b7b5-0ae7-11e5-b3a7-56847afe9799"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
            </code><code class="nt">"ports"</code><code class="p">:</code><code> </code><code class="p">[</code><code> </code><code class="mi">31500</code><code> </code><code class="p">]</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
            </code><code class="nt">"stagedAt"</code><code class="p">:</code><code> </code><code class="s2">"2015-06-04T18:28:09.235Z"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
            </code><code class="nt">"startedAt"</code><code class="p">:</code><code> </code><code class="s2">"2015-06-04T18:28:09.404Z"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
            </code><code class="nt">"version"</code><code class="p">:</code><code> </code><code class="s2">"2015-06-04T18:28:05.214Z"</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
        </code><code class="p">}</code><code>
    </code><code class="p">]</code><code class="err">,</code><code>
    </code><code class="s2">"tasksHealthy"</code><code> </code><code class="err">:</code><code> </code><code class="mi">1</code><code class="err">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO2-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO2-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code class="err">/</code><code class="err">/</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code> </code><code class="err">s</code><code class="err">n</code><code class="err">i</code><code class="err">p</code><code> </code><code class="err">(</code><code class="err">s</code><code class="err">a</code><code class="err">m</code><code class="err">e</code><code> </code><code class="err">a</code><code class="err">s</code><code> </code><code class="err">b</code><code class="err">e</code><code class="err">f</code><code class="err">o</code><code class="err">r</code><code class="err">e</code><code class="err">)</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>This tells us the DNS name or IP address of the host that is running the task.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The <code>id</code> of the task is a Mesos construct. We can use the Mesos master’s UI to inspect this task; for instance, we can examine its <code>stdout</code> and <code>stderr</code>.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Whether we chose the port that the application is running on or allowed Marathon to choose for us (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_json_desc_with_dynamic_port">Example&nbsp;3-2</a> for details), we can find the actually reserved ports for the task.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>The staging time of the task is when we submitted the task to a Mesos offer.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>The start time of the task is when Mesos actually got around to launching the task.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>Every time we update the Marathon descriptor, it gets stamped with a new version (see the response to the initial <code>POST</code> given earlier). Every task is annotated with the version from which it was launched.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO2-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO2-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>This gives a summary of the number of currently healthy tasks in the application.</p></dd>
</dl>

<p>Let’s look at some of the rich information available about the application.
First, we can see all of the configuration parameters that we specified when we created the application.
We also see tons and tons of other settings, many of which we’ll go over soon.
The next very interesting field is <code>"tasks"</code>, <a data-type="indexterm" data-primary="tasks" id="idp8342032"></a>which is an array of all of the actual running instances of the application.
Each task is represented as a JSON object, which has several useful fields:</p>

<ul>
<li>
<p><code>"host"</code> and <code>"ports"</code> tell <a data-type="indexterm" data-primary="host" id="idp8344832"></a><a data-type="indexterm" data-primary="resources" data-secondary="ports" id="idp8345568"></a>us what the actual host and ports that were assigned to this task are. These fields are the key to discovering where an application is actually running so that we can connect to it.</p>
</li>
<li>
<p><code>"id"</code> is the mesos <code>TaskID</code>. <a data-type="indexterm" data-primary="id" id="idp8348400"></a>This is constructed by adding a unique per-task UUID to the application’s ID, which allows for convenient discovery with the Mesos CLI tools or in the Mesos UI.</p>
</li>
<li>
<p><code>"stagedAt"</code> and <code>"startedAt"</code> <a data-type="indexterm" data-primary="stagedAt" id="idp8351232"></a><a data-type="indexterm" data-primary="startedAt" id="idp8351968"></a>give us information about when lifecycle events happened to this task. A task is <em>staged</em> once Marathon actually requests Mesos to start the task on a particular offer; a task is <em>started</em> once it begins running.</p>
</li>
</ul>
<div data-type="tip"><h1>Upcoming Change in Marathon REST API</h1>
<p>The REST API <a data-type="indexterm" data-primary="Marathon" data-secondary="REST API changes" id="idp8355296"></a>examples in this book are valid as of Marathon 0.9.
In the future, Marathon will filter the results so requests don’t need to return megabytes of JSON data.
When this happens, you’ll need to specify an additional, repeatable URL parameter: <code>embed</code>.
<span class="keep-together">That is, instead</span> of <code>/v2/apps/my-first-app</code>, you need to <span class="keep-together">request</span> <code>/v2/apps/my-first-app?embed=app.counts&amp;embed=app</code> <code>.tasks</code> to retrieve the data for the preceding examples.
You can read about all of the options for <code>embed</code> in the Marathon <a href="https://mesosphere.github.io/marathon/docs/rest-api.html">REST API documentation</a>.</p>
</div>

<p>Usually, you won’t want to hardcode the port for your application: after all, if you did this, then you’d only ever be able to run one instance of the application per slave.
Marathon can specify the <a data-type="indexterm" data-primary="Marathon" data-secondary="specifying ports" id="idp8467280"></a>port for you, instead: simply choose each port your application requires as <code>0</code>, and the assigned ports will be available in the environment variables <code>$PORT0</code>, <code>$PORT1</code>, etc.
If we changed our earlier configuration to take advantage of this, we’d end up with <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_json_desc_with_dynamic_port">Example&nbsp;3-2</a>.</p>
<div id="marathon_json_desc_with_dynamic_port" data-type="example">
<h5><span class="label">Example 3-2. </span>SimpleHTTPServer JSON descriptor with dynamically chosen port</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"cmd"</code><code class="p">:</code><code> </code><code class="s2">"./python -m SimpleHTTPServer $PORT0"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
    </code><code class="nt">"cpus"</code><code class="p">:</code><code> </code><code class="mf">0.5</code><code class="p">,</code><code>
    </code><code class="nt">"mem"</code><code class="p">:</code><code> </code><code class="mi">50</code><code class="p">,</code><code>
    </code><code class="nt">"instances"</code><code class="p">:</code><code> </code><code class="mi">1</code><code class="p">,</code><code>
    </code><code class="nt">"id"</code><code class="p">:</code><code> </code><code class="s2">"my-first-app"</code><code class="p">,</code><code>
    </code><code class="nt">"ports"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
    </code><code class="nt">"uris"</code><code class="p">:</code><code> </code><code class="p">[</code><code>
        </code><code class="s2">"http://fetchable/uri/with/python.tar.gz"</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO3-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO3-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
    </code><code class="p">]</code><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Note that we use <code>$PORT0</code> to access the environment variable that contains the port assigned to the first index of the <code>"ports"</code> array.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We provided <code>0</code> as the desired port, meaning that we’re allowing Marathon to choose for us.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO3-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO3-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We can also provide a list of URIs to be fetched and unzipped into the container before running the command. See <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#configuring_process_environment">“Configuring the process’s environment”</a> for details on the URI schemes supported.</p></dd>
</dl>

<p>Some applications you’d like to run on Marathon don’t accept their ports via the command line.
Don’t worry!
There’s an easy way for us to propagate our <code>$PORT0</code> environment variables into configuration files. I’ll assume that the application’s configuration file is set as a URL to be downloaded with the application.
Now, we’re going to use <code>sed</code> to <a data-type="indexterm" data-primary="sed command" id="idp8556656"></a>replace a special string in the configuration file with the desired environment variable, be it a <code>$PORT0</code> or the <code>$MESOS_DIRECTORY</code>:</p>

<pre data-type="programlisting" data-code-language="bash"><code>sed</code><code> </code><code>-e</code><code> </code><code class="s1">'s#@MESOSDIR@#'</code><code class="s2">"</code><code class="nv">$MESOS_DIRECTORY</code><code class="s2">"</code><code class="s1">'#'</code><code> </code><code>config.templ</code><code> </code><code>&gt;</code><code> </code><code>config</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>sed</code><code> </code><code>-e</code><code> </code><code class="s1">'s#@PORT@#'</code><code class="s2">"</code><code class="nv">$PORT0</code><code class="s2">"</code><code class="s1">'#'</code><code> </code><code>config2.templ</code><code> </code><code>&gt;</code><code> </code><code>config2</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>In our first example, we are replacing the string <code>@MESOSDIR@</code> with the task’s sandbox directory. We surround the string in the configuration file with <code>@</code> symbols, because they so rarely show up in configuration languages (of course, you could use any unique string). Also, we use single quotes around the “constants” in our <code>sed</code> command and double quotes around the environment variable to ensure that our shell doesn’t corrupt our command. Finally, we use <code>#</code> instead of / for the <code>sed</code> command so that we can successfully template an environment variable that itself contains forward slashes.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Here, we template the port at index 0 into the configuration file. In fact, we could pass multiple <code>-e</code> arguments to a single invocation of <code>sed</code> if we wanted to template several variables in one configuration file.</p></dd>
</dl>

<p>We’ll look at other fields as we cover the features that utilize them.</p>








<section data-type="sect2" data-pdf-bookmark="Scaling Your Application"><div class="sect2" id="idp8635984">
<h2>Scaling Your Application</h2>

<p>Let’s <a data-type="indexterm" data-primary="Marathon" data-secondary="scaling" id="idp8637360"></a><a data-type="indexterm" data-primary="scaling" id="idp8638208"></a>see what it would take to scale our HTTP server to have five instances. Ready?</p>

<pre data-type="programlisting">curl -X PUT -H 'Content-Type: application/json' \
    marathon.example.com:8080/v2/apps --data '{"instances": 5}'</pre>

<p>Of course, no one would ever actually want to have five instances of such a useless application, so why don’t we scale it down?</p>

<pre data-type="programlisting">curl -X PUT -H 'Content-Type: application/json' \
    marathon.example.com:8080/v2/apps --data '{"instances": 1}'</pre>

<p>Luckily, scaling is extremely easy!</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Using Placement Constraints"><div class="sect2" id="marathon_using_placement_constraints">
<h2>Using Placement Constraints</h2>

<p>Marathon <a data-type="indexterm" data-primary="Marathon" data-secondary="placement constraints" id="m3upc"></a><a data-type="indexterm" data-primary="placement constraints" id="pc3"></a><a data-type="indexterm" data-primary="constraints, placement" id="cp3"></a>supports constraints on where the application is launched.
These constraints can be driven either by the hostname of the slave or any slave attribute.
Constraints are provided in an array to the application; each constraint is itself an array of two or three elements, depending on whether there’s an argument.
Let’s take a look at what constraints are available and how to use them:</p>
<dl>
<dt><code>GROUP_BY</code></dt>
<dd>
<p>This <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="GROUP_BY" id="idp8648368"></a>operator ensures that instances of the application are evenly spread across nodes with a particular attribute.
You can use this to spread the application equitably across hosts (<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_placement_even_hosts">Example&nbsp;3-3</a>) or racks (assuming that the rack is encoded by the <code>rack</code> attribute on the slave; see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_placement_even_racks">Example&nbsp;3-4</a>).</p>
<div id="marathon_placement_even_hosts" data-type="example">
<h5><span class="label">Example 3-3. </span>Spread evenly by host</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code>
    <code class="err">//</code> <code class="err">...</code> <code class="err">snip</code> <code class="err">...</code>
    <code class="nt">"constraints"</code><code class="p">:</code> <code class="p">[[</code><code class="s2">"hostname"</code><code class="p">,</code> <code class="s2">"GROUP_BY"</code><code class="p">]]</code>
<code class="p">}</code></pre></div>
<div id="marathon_placement_even_racks" data-type="example">
<h5><span class="label">Example 3-4. </span>Spread evenly by rack</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code>
    <code class="err">//</code> <code class="err">...</code> <code class="err">snip</code> <code class="err">...</code>
    <code class="nt">"constraints"</code><code class="p">:</code> <code class="p">[[</code><code class="s2">"rack"</code><code class="p">,</code> <code class="s2">"GROUP_BY"</code><code class="p">]]</code>
<code class="p">}</code></pre></div>
</dd>
<dt><code>UNIQUE</code></dt>
<dd>
<p>This <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="UNIQUE" id="idp8683952"></a>operator ensures that every instance of the application has a different value for the <code>UNIQUE</code> constraint.
It’s similar to <code>GROUP_BY</code>, except if there are not enough different values for the attribute, the application will fail to fully deploy, rather than running multiple instances on some slaves.
Usually, <code>GROUP_BY</code> is the best choice for availability, since it’s generally preferable to have multiple tasks running on a single slave rather than fewer than the desired number.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_placement_unique">Example&nbsp;3-5</a> shows how you could use <code>UNIQUE</code> to ensure that there’s no more than one instance of some application per slave in the cluster.</p>
<div id="marathon_placement_unique" data-type="example">
<h5><span class="label">Example 3-5. </span>Run at most one instance per host</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code>
    <code class="err">//</code> <code class="err">...</code> <code class="err">snip</code> <code class="err">...</code>
    <code class="nt">"constraints"</code><code class="p">:</code> <code class="p">[[</code><code class="s2">"hostname"</code><code class="p">,</code> <code class="s2">"UNIQUE"</code><code class="p">]]</code>
<code class="p">}</code></pre></div>
</dd>
<dt><code>CLUSTER</code></dt>
<dd>
<p>This <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="CLUSTER" id="idp8796864"></a>operator allows you to run an application only on slaves with a specific value for an attribute.
If certain slaves have special hardware configurations, or if you want to restrict placement to a specific rack, this operator can be useful; however, <code>LIKE</code> is more powerful and often a better fit.
For example, suppose that we’ve got a mixture of ARM and x86 processors in our data center, and we’ve made a <code>cpu_arch</code> attribute for our slaves to help us distinguish their architectures.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_placement_x86">Example&nbsp;3-6</a> shows how to ensure that our application only runs on x86 processors.</p>
<div id="marathon_placement_x86" data-type="example">
<h5><span class="label">Example 3-6. </span>Only run on x86</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="err">/</code><code class="err">/</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code> </code><code class="err">s</code><code class="err">n</code><code class="err">i</code><code class="err">p</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code>
    </code><code class="nt">"constraints"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="p">[</code><code class="s2">"cpu_arch"</code><code class="p">,</code><code> </code><code class="s2">"CLUSTER"</code><code class="p">,</code><code> </code><code class="s2">"x86"</code><code class="p">]</code><code class="p">]</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO5-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO5-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO5-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO5-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Note that the <code>CLUSTER</code> operator takes an argument.</p></dd>
</dl>
</dd>
<dt><code>LIKE</code></dt>
<dd>
<p>This <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="LIKE" id="idp8695920"></a>operator ensures that the application runs only on slaves that have a certain attribute, and where the value of that attribute matches the provided regular expression.
This can be used like <code>CLUSTER</code>, but it has more flexibility, since many values can be matched.
For example, suppose that we’re running on Amazon, and we set the <code>instance_type</code> attribute on all of our slaves.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_placement_like">Example&nbsp;3-7</a> shows how we could restrict our application to run only on the biggest C4 compute-optimized machines.</p>
<div id="marathon_placement_like" data-type="example">
<h5><span class="label">Example 3-7. </span>Only run on c4.4xlarge and c4.8xlarge machines</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="err">/</code><code class="err">/</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code> </code><code class="err">s</code><code class="err">n</code><code class="err">i</code><code class="err">p</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code>
    </code><code class="nt">"constraints"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="p">[</code><code class="s2">"cpu_arch"</code><code class="p">,</code><code> </code><code class="s2">"LIKE"</code><code class="p">,</code><code> </code><code class="s2">"c4.[48]xlarge"</code><code class="p">]</code><code class="p">]</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO6-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO6-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO6-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO6-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p><code>LIKE</code>’s argument is a regular expression.</p></dd>
</dl>
</dd>
<dt><code>UNLIKE</code></dt>
<dd>
<p><code>UNLIKE</code> <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="UNLIKE" id="idp8881024"></a>is the complement of <code>LIKE</code>: it allows us to avoid running on certain slaves.
Maybe you don’t want some daemons (such as ones processing user billing information) to run on machines that are in the DMZ, which is an unsecured network area.
By setting the attribute <code>dmz</code> to <code>true</code> on machines in the DMZ, we can have our application avoid those machines, as in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_placement_unlike">Example&nbsp;3-8</a>.</p>
<div id="marathon_placement_unlike" data-type="example">
<h5><span class="label">Example 3-8. </span>Don’t run in the DMZ</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="err">/</code><code class="err">/</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code> </code><code class="err">s</code><code class="err">n</code><code class="err">i</code><code class="err">p</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code>
    </code><code class="nt">"constraints"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="p">[</code><code class="s2">"dmz"</code><code class="p">,</code><code> </code><code class="s2">"UNLIKE"</code><code class="p">,</code><code> </code><code class="s2">"true"</code><code class="p">]</code><code class="p">]</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO7-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO7-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO7-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO7-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p><code>UNLIKE</code>’s argument can be a regular expression.</p></dd>
</dl>
</dd>
</dl>

<p>Placement constraints can also be combined.
For example, we could ensure that our application isn’t running in the DMZ and is evenly distributed amongst the remaining machines as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#combining_constraints">Example&nbsp;3-9</a>.</p>
<div id="combining_constraints" data-type="example">
<h5><span class="label">Example 3-9. </span>Combining constraints</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code>
    <code class="err">//</code> <code class="err">...</code> <code class="err">snip</code> <code class="err">...</code>
    <code class="nt">"constraints"</code><code class="p">:</code> <code class="p">[[</code><code class="s2">"dmz"</code><code class="p">,</code> <code class="s2">"UNLIKE"</code><code class="p">,</code> <code class="s2">"true"</code><code class="p">],</code>
                    <code class="p">[</code><code class="s2">"hostname"</code><code class="p">,</code> <code class="s2">"GROUP_BY"</code><code class="p">]]</code>
<code class="p">}</code></pre></div>

<p>Combining constraints will allow you to precisely control how your applications are placed across the <a data-type="indexterm" data-primary="Marathon" data-secondary="placement constraints" data-startref="m3upc" id="idp8988976"></a><a data-type="indexterm" data-primary="placement constraints" data-startref="pc3" id="idp8990064"></a><a data-type="indexterm" data-primary="constraints, placement" data-startref="cp3" id="idp8990976"></a>cluster.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Running Dockerized Applications"><div class="sect2" id="idp8992176">
<h2>Running Dockerized Applications</h2>

<p>Marathon <a data-type="indexterm" data-primary="Marathon" data-secondary="running Dockerized applications" id="m3urda"></a><a data-type="indexterm" data-primary="Docker" data-secondary="Marathon and" id="dawm3"></a>has first-class support for Docker containers.
If your app is already Dockerized, then it’s very easy to run it on Marathon.</p>

<p>In order to get started, you’ll first need to make sure that your Mesos cluster has Docker support enabled.
To do this, make sure that you’ve enabled the Docker containerizer and increased the executor timeout (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#docker_support">“Using Docker”</a> for details).</p>

<p>At this point, we can simply add the Docker configuration to the JSON that we use to configure our application.
Let’s take a look at the options we have when using Docker, as illustrated in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_docker_json_cfg">Example&nbsp;3-10</a>.
Note that this JSON configuration is partial; it must also include additional options such as those in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#basic_marathon_json_descriptor">Example&nbsp;3-1</a>.</p>
<div id="marathon_docker_json_cfg" data-type="example">
<h5><span class="label">Example 3-10. </span>Marathon Docker JSON configuration</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="err">/</code><code class="err">/</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code> </code><code class="err">s</code><code class="err">n</code><code class="err">i</code><code class="err">p</code><code> </code><code class="err">.</code><code class="err">.</code><code class="err">.</code><code>
    </code><code class="nt">"container"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
        </code><code class="nt">"type"</code><code class="p">:</code><code> </code><code class="s2">"DOCKER"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO8-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO8-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
        </code><code class="nt">"docker"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
            </code><code class="nt">"image"</code><code class="p">:</code><code> </code><code class="s2">"group/image"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO8-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO8-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
            </code><code class="nt">"network"</code><code class="p">:</code><code> </code><code class="s2">"HOST"</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO8-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO8-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
        </code><code class="p">}</code><code>
    </code><code class="p">}</code><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO8-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO8-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Since Mesos will continue to add new container types, such as Rocket or KVM containers, much of the container configuration isn’t Docker-specific. Here, we must specify that we’ll provide Docker-specific configuration, because this is a <code>DOCKER</code> container.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO8-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO8-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>This is the most important part: where you specify your container image.<sup><a data-type="noteref" id="idp9056944-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9056944" class="totri-footnote">2</a></sup></p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO8-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO8-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We’re going to run Docker in host networking mode; this means that Docker is using the slave’s networking resources directly.</p></dd>
</dl>

<p>Once the Docker container launches, it’ll also have access to the Mesos sandbox directory, which will be available in the environment variable <code>$MESOS_SANDBOX</code>.</p>










<section data-type="sect3" data-pdf-bookmark="Mounting host volumes"><div class="sect3" id="mounting_host_volumes">
<h3>Mounting host volumes</h3>

<p>Often, <a data-type="indexterm" data-primary="Docker" data-secondary="mounting host volumes" id="d3mhv"></a><a data-type="indexterm" data-primary="host volumes, mounting" id="hvm3"></a>when using Docker, you may want to mount some volume available on the host.
This may be some globally distributed configuration files, data files, or maybe you’d just like a data directory that won’t be automatically garbage collected.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_docker_host_volume">Example&nbsp;3-11</a> shows how to add this to the JSON configuration.</p>
<div id="marathon_docker_host_volume" data-type="example">
<h5><span class="label">Example 3-11. </span>Mounting host volumes</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"container"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
        </code><code class="nt">"type"</code><code class="p">:</code><code> </code><code class="s2">"DOCKER"</code><code class="p">,</code><code>
        </code><code class="nt">"docker"</code><code class="p">:</code><code> </code><code class="p">{</code><code>
            </code><code class="nt">"image"</code><code class="p">:</code><code> </code><code class="s2">"group/image"</code><code class="p">,</code><code>
            </code><code class="nt">"network"</code><code class="p">:</code><code> </code><code class="s2">"HOST"</code><code>
        </code><code class="p">}</code><code class="p">,</code><code>
        </code><code class="nt">"volumes"</code><code class="p">:</code><code> </code><code class="p">[</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO9-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO9-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
            </code><code class="p">{</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO9-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO9-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
                </code><code class="nt">"containerPath"</code><code class="p">:</code><code> </code><code class="s2">"/var/hostlib"</code><code class="p">,</code><code>
                </code><code class="nt">"hostPath"</code><code class="p">:</code><code> </code><code class="s2">"/usr/lib"</code><code class="p">,</code><code>
                </code><code class="nt">"mode"</code><code class="p">:</code><code> </code><code class="s2">"RO"</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO9-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO9-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
            </code><code class="p">}</code><code class="p">,</code><code>
            </code><code class="p">{</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO9-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO9-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
                </code><code class="nt">"containerPath"</code><code class="p">:</code><code> </code><code class="s2">"/var/scratch"</code><code class="p">,</code><code>
                </code><code class="nt">"hostPath"</code><code class="p">:</code><code> </code><code class="s2">"/mount/ssd"</code><code class="p">,</code><code>
                </code><code class="nt">"mode"</code><code class="p">:</code><code> </code><code class="s2">"RW"</code><code>
            </code><code class="p">}</code><code>
        </code><code class="p">]</code><code>
    </code><code class="p">}</code><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO9-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO9-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Note that the <code>"volumes"</code> aren’t considered Docker-specific, and you can specify an array of them.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO9-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO9-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>This volume allows us to access the <em>/usr/lib</em> directory of the host machine from within our Docker container. This could be useful if we’d like to access <em>libmesos.so</em> from the host, rather than needing to keep updating our Docker image.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO9-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO9-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We can mount the volume in read-only (<code>RO</code>) or read-write (<code>RW</code>) mode.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO9-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO9-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>This volume gives us some SSD-mounted scratch space, assuming that an SSD is mounted at <em>/mount/ssd</em> on the host.</p></dd>
</dl>

<p>Mounting host volumes into the Docker container might seem like a great way to host databases on Marathon; after all, you can provide persistent host storage to containers.
Unfortunately, even though you can mount volumes with Docker, there are a few reasons why this is very hard (at least, until Mesos natively supports volumes).
First of all, it’s tedious to communicate which machines have disks available.
In order to accomplish this, you’ll need to use placement constraints to ensure all of the following:</p>
<ol>
<li>
<p>Each slave with a spare volume has a special attribute identifying it as having that volume, so that you can use the <code>CLUSTER</code> <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="CLUSTER" id="idp9253616"></a>operator to ensure placement on those slaves.</p>
</li>
<li>
<p>The application has the <code>UNIQUE</code> operator <a data-type="indexterm" data-primary="Marathon" data-secondary="placement operators" data-tertiary="UNIQUE" id="idp9255984"></a>set on the hostname, so that only one instance of the application launches on each slave (since there’s only one special mount point per machine).</p>
</li>
<li>
<p>Every one of the slaves has its host volume mounted on the same path (luckily, this is the easiest part).</p>
</li>

</ol>

<p>If you feel up to the task, this can help you to get certain types of databases running on Marathon. Sadly, you won’t have scaling or automatic recovery handled for you, since there’s so much special configuration necessary on each slave.
Happily, as Mesos adds support for persistent disks, more and more specialized frameworks that handle launching and configuring databases will pop up, and this mess will no longer <a data-type="indexterm" data-primary="Marathon" data-secondary="running Dockerized applications" data-startref="m3urda" id="idp9259328"></a><a data-type="indexterm" data-primary="Docker" data-secondary="Marathon and" data-startref="dawm3" id="idp9260416"></a><a data-type="indexterm" data-primary="Docker" data-secondary="mounting host volumes" data-startref="d3mhv" id="idp9261504"></a><a data-type="indexterm" data-primary="host volumes, mounting" data-startref="hvm3" id="idp9262592"></a>be needed.</p>
</div></section>



</div></section>













<section data-type="sect2" data-pdf-bookmark="Health Checks"><div class="sect2" id="health_checks">
<h2>Health Checks</h2>

<p>Marathon <a data-type="indexterm" data-primary="Marathon" data-secondary="health checks" id="m3uhc"></a><a data-type="indexterm" data-primary="health checks" id="hc3"></a>keeps track of whether it believes an application is healthy or not.
This information is exported via the REST API, making it easy to use Marathon to centralize management of its application health checks.
When you query the REST API for information about a particular application, all of its tasks will include their latest health check results.
By default, Marathon assumes that a task is healthy if it is in the <code>RUNNING</code> state.
Of course, just because an application has started executing doesn’t mean that it’s actually healthy.
To improve the usefulness of the application’s health data, you can specify three additional types of health checks that the tasks should undergo: command-based, HTTP, and TCP.</p>

<p><a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_health_check">Example&nbsp;3-12</a> shows the common fields of the <a data-type="indexterm" data-primary="JSON" id="idp9269488"></a>JSON health check specification.</p>
<div id="marathon_health_check" data-type="example">
<h5><span class="label">Example 3-12. </span>Common health check fields</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"gracePeriodSeconds"</code><code class="p">:</code><code> </code><code class="mi">300</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO10-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO10-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
    </code><code class="nt">"intervalSeconds"</code><code class="p">:</code><code> </code><code class="mi">60</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO10-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO10-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
    </code><code class="nt">"maxConsecutiveFailures"</code><code class="p">:</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO10-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO10-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
    </code><code class="nt">"timeoutSeconds"</code><code class="p">:</code><code> </code><code class="mi">30</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO10-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO10-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO10-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO10-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>The grace period is the amount of time that a task is given to start itself up. Health checks will not begin to run against a particular task until this many seconds have elapsed. This parameter is optional, with a default value of a 5-minute grace period.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO10-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO10-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The interval is the amount of time between runs of this health check. This parameter is optional, with a default value of 1 minute between each check.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO10-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO10-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>The maximum number of consecutive failures determines how many failed health checks in a row should cause Marathon to forcibly kill the task, so that it can be restarted elsewhere. If this is set to <code>0</code>, then this health check failing will never result in the task getting killed. This parameter is optional, with tasks by default being killed after three failures of this health check.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO10-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO10-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Sometimes, a health check just hangs. Rather than simply ignoring the check, Marathon will treat the slow or hung health check as a failure if it doesn’t complete in this many seconds. This parameter is optional, and by default health checks have 20 seconds to run.</p></dd>
</dl>

<p>We’ll look at the two of the three types of health checks here: HTTP and TCP.
Command health checks are still relatively new, and due to some of their limitations, I recommend waiting a bit longer for them to stabilize.
Bear in mind, though, that HTTP and TCP health checks here are currently performed by the Marathon master, which means that they’re not scalable to thousands of tasks.<sup><a data-type="noteref" id="idp9340864-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9340864" class="totri-footnote">3</a></sup></p>










<section data-type="sect3" data-pdf-bookmark="HTTP checks"><div class="sect3" id="idp9342656">
<h3>HTTP checks</h3>

<p>HTTP <a data-type="indexterm" data-primary="HTTP health checks" id="idp9344032"></a>health checks validate if doing a <code>GET</code> on a particular route results in a successful HTTP status code.
Successful status codes can either be true successes, or redirects; thus, the response code must be in the range 200–399, inclusive.
To configure an HTTP health check, there are two required fields and one optional field, as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_hc_http">Example&nbsp;3-13</a>.</p>
<div id="marathon_hc_http" data-type="example">
<h5><span class="label">Example 3-13. </span>HTTP health check fields</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"protocol"</code><code class="p">:</code><code> </code><code class="s2">"HTTP"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO11-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO11-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
    </code><code class="nt">"path"</code><code class="p">:</code><code> </code><code class="s2">"/healthcheck"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO11-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO11-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
    </code><code class="nt">"portIndex"</code><code class="p">:</code><code> </code><code class="mi">0</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO11-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO11-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO11-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO11-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>You must specify that this is an HTTP health check in the <code>"protocol"</code> field.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO11-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO11-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>You must specify what the route for the health check should be. In this case, we’re going to attempt a <code>GET</code> on <code>http://myserver.example.com:8888/healthcheck</code>, where <code>myserver.example.com:8888</code> is the host and port that Marathon started the task on.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO11-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO11-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>You can optionally specify a <code>"portIndex"</code> for the health check. By default, the port index is <code>0</code>.</p></dd>
</dl>
<div data-type="note" epub:type="note" id="marathon_port_index_healthcheck"><h1>Why Do Health Checks Use “portIndex” Instead of “port”?</h1>
<p>You might be confused as to what the <code>"portIndex"</code> is in the health check specification, and why we don’t simply specify the actual port.
Remember that Marathon can (and by best practices does) choose the ports that your application will bind to.
As a result, we don’t actually know when we’re configuring the health check what port the application is running on.
Instead, however, remember that all the ports our application used were specified in the <code>"ports"</code> array of the application descriptor.
Therefore, we can simply specify which index of the <code>"ports"</code> array corresponds to the port that we want to run the health check on!</p>
</div>
</div></section>













<section data-type="sect3" data-pdf-bookmark="TCP checks"><div class="sect3" id="idp9409952">
<h3>TCP checks</h3>

<p>TCP <a data-type="indexterm" data-primary="TCP health checks" id="idp9411280"></a>health checks validate whether it’s possible to successfully open a TCP connection to the task.
They do not send or receive any data—they simply attempt to open the socket.
To configure a TCP health check, there is one required and one optional field, shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_hc_tcp">Example&nbsp;3-14</a>.</p>
<div id="marathon_hc_tcp" data-type="example">
<h5><span class="label">Example 3-14. </span>TCP health check fields</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"protocol"</code><code class="p">:</code><code> </code><code class="s2">"TCP"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO12-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO12-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
    </code><code class="nt">"portIndex"</code><code class="p">:</code><code> </code><code class="mi">0</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO12-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO12-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code class="p">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO12-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO12-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>You must specify that this is a TCP health check in the <code>"protocol"</code> field.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO12-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO12-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>You can optionally specify a <code>"portIndex"</code> for the health check. By default, the port index is <code>0</code>.</p></dd>
</dl>
</div></section>



</div></section>













<section data-type="sect2" data-pdf-bookmark="Application Versioning and Rolling Upgrades"><div class="sect2" id="idp9446544">
<h2>Application Versioning and Rolling Upgrades</h2>

<p>What <a data-type="indexterm" data-primary="Marathon" data-secondary="health checks" data-startref="m3uhc" id="idp9462816"></a><a data-type="indexterm" data-primary="health checks" data-startref="hc3" id="idp9463936"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="application versioning and rolling upgrades" id="m3uavaru"></a><a data-type="indexterm" data-primary="rolling upgrades" id="ru3"></a><a data-type="indexterm" data-primary="versioning" id="v3"></a><a data-type="indexterm" data-primary="upgrades" id="ug3"></a>use would a distributed, scalable PaaS have if it couldn’t do rolling upgrades?
An <em>upgrade</em> is any time that you modify the application, which is typically done by making a <code>PUT</code> to the <code>/v2/apps/$appid</code> route on Marathon.
Every upgrade creates a new version, which is named with the timestamp of when the upgrade was made.
When you query the REST API for information about the application, every task will say which version it is running.
You can query which versions are available from the <code>/v2/apps/$appid/versions</code> route on Marathon, and you can find details of the versions from the <code>/v2/apps/$appid/versions/$version</code> route.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_app_upgrade">Example&nbsp;3-15</a> demonstrates how to configure the upgrade behavior of an application.</p>
<div id="marathon_app_upgrade" data-type="example">
<h5><span class="label">Example 3-15. </span>Application upgrades</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code>
    <code class="nt">"upgradeStrategy"</code><code class="p">:</code> <code class="p">{</code>
        <code class="nt">"minimumHealthCapacity"</code><code class="p">:</code> <code class="mf">0.5</code><code class="p">,</code>
        <code class="nt">"maximumOverCapacity"</code><code class="p">:</code> <code class="mf">0.1</code>
    <code class="p">}</code>
<code class="p">}</code></pre></div>

<p>With Marathon, you can easily specify how much of the application you want to be available during an upgrade via the <code>"minimumHealthCapacity"</code> field of the application descriptor.
The <code>"minimumHealthCapacity"</code> can be set to any value between <code>0</code> and <code>1</code>.</p>

<p>If you set this to <code>0</code>, when you deploy a new version Marathon will first kill all the old tasks, then start up new ones.</p>

<p>If you set this to <code>0.6</code>, when you deploy a new version Marathon will first kill 40% of the old tasks, then start up 60% of the new tasks, then kill the rest of the old tasks and start the rest of the new tasks.</p>

<p>If you set this to <code>1</code>, when you deploy a new version Marathon will first start up all the new tasks (at which point your application could use twice as many resources as during regular operations), and then shut down the old tasks.</p>

<p>The <code>"maximumOverCapacity"</code> setting provides an additional level of safety, so that an application doesn’t consume too many resources temporarily during an upgrade.
The <code>"maximumOverCapacity"</code> can be set to any value between <code>0</code> and <code>1</code>.</p>

<p>If you set this to <code>0</code>, when you deploy a new version Marathon will not start more tasks than the target number of instances.</p>

<p>If you set this to <code>0.6</code>, when you deploy a new version Marathon will never exceed a combined total of 160% of the target number of tasks.</p>

<p>If you set this to <code>1</code>, when you deploy a new version Marathon will be allowed to start every new task before it kills any of the old tasks, if it so <a data-type="indexterm" data-primary="Marathon" data-secondary="application versioning and rolling upgrades" data-startref="m3uavaru" id="idp9501200"></a><a data-type="indexterm" data-primary="rolling upgrades" data-startref="ru3" id="idp9502544"></a><a data-type="indexterm" data-primary="versioning" data-startref="v3" id="idp9503488"></a><a data-type="indexterm" data-primary="upgrades" data-startref="ug3" id="idp9504432"></a>chooses.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="The Event Bus"><div class="sect2" id="marathon_event_bus">
<h2>The Event Bus</h2>

<p>Often, <a data-type="indexterm" data-primary="event bus" id="idp9507072"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="event bus" id="idp9507808"></a>when building applications with Marathon, you’ll want to receive notifications when various events happen, such as when an application gets a new deployment, or when it scales up or down.
These notifications could then be used to reconfigure proxies and routers, log statistics, and generate reports.
Marathon has a built-in feature for automatically <code>POST</code>ing all of its internal events to a provided URI.
To use this feature, simply provide two additional command-line arguments to Marathon:</p>
<dl>
<dt><code>--event_subscriber</code></dt>
<dd>
<p>This argument should be passed the value <code>http_callback</code> in order to enable this subsystem.
At this time, no other options are supported.</p>
</dd>
<dt><code>--http_endpoints</code></dt>
<dd>
<p>This argument is a comma-separated list of destination URIs to send the JSON-formatted events to. For example, a valid argument would be <code>http://host1/foo,http://host2/bar</code>.</p>
</dd>
</dl>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Setting Up HAProxy with Marathon"><div class="sect2" id="setting_up_marathon_haproxy">
<h2>Setting Up HAProxy with Marathon</h2>

<p>What <a data-type="indexterm" data-primary="Marathon" data-secondary="HAProxy setup" id="m3uhaps"></a><a data-type="indexterm" data-primary="HAProxy" id="hap3"></a><a data-type="indexterm" data-primary="proxies" data-secondary="HAProxy" id="p3hap"></a>a great day!
We’ve learned all about Marathon and decided that it would make an excellent platform for our applications.
Now that our applications are running on Marathon, however, we’ve reached an impasse: how can the outside world actually connect to them?
Some types of applications, such as Celery or Resque workers, need no additional configuration: they communicate via a shared database.
Other types of applications, such as HTTP servers and Redis instances, need to be made easily discoverable.
The most popular way to do this on Mesos clusters is to run proxies on static, non-Mesos managed hosts, and automatically update those proxies to point at running instances of the application.
This way, the application is always available on a known host and port (i.e., the proxy), but we can still dynamically scale its capacity on the backend.
Also, each proxy host can typically serve many applications, each on a different port, so that a small number of proxy hosts are sufficient for hundreds of backends.
Typically, proxies are constrained either by the total bandwidth used by all active connections, or by the total CPU usage if they’re providing SSL termination.<sup><a data-type="noteref" id="idp9521072-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9521072" class="totri-footnote">4</a></sup></p>

<p>There are two proxies that are far and away the most popular choices for use in modern application stacks: HAProxy and Nginx.
HAProxy is a proxy with very few features: it can proxy HTTP and TCP connections, perform basic health checks, and terminate SSL.
It is built for stability and performance: there have been no reported crashes or deadlock bugs in HAProxy for 13 years.
This is why HAProxy is popular amongst Mesos users today.</p>

<p>Nginx, <a data-type="indexterm" data-primary="proxies" data-secondary="Nginx" id="idp9523136"></a><a data-type="indexterm" data-primary="Nginx" id="idp9524144"></a>by comparison, has no limits on its features.
Besides acting as a proxy, it is able to run custom user code written in Lua, JavaScript, or JVM-based languages.
This code can affect the proxy operations, or even serve responses directly.
Many systems actually use both proxies: clients connect to HAProxy instances, which themselves forward the requests to Nginx instances.
The Nginx instances then either respond directly, or proxy the requests to backend servers to be processed.</p>

<p>In this section, we’re only going to discuss HAProxy, but be aware that Nginx can be used in exactly the same way, if you require the additional functionality it offers.</p>
<div data-type="warning" epub:type="warning"><h1>haproxy-marathon-bridge</h1>
<p>In the Marathon <a data-type="indexterm" data-primary="haproxy-marathon-bridge script" id="idp9527312"></a>repository, there’s a script called <em>bin/haproxy-marathon-bridge</em>.
This script is intended to help generate an HA<span class="keep-together">Proxy</span> configuration file for Marathon.
Unfortunately, it doesn’t allow you to specify which port the services on Marathon will be bound to on the HAProxy host.
As a result, this script is best avoided.</p>
</div>

<p>Let’s take a look at the most popular configurations for setting up proxies with Mesos.</p>










<section data-type="sect3" data-pdf-bookmark="Bamboo"><div class="sect3" id="bamboo">
<h3>Bamboo</h3>

<p><a href="https://github.com/QubitProducts/bamboo">Bamboo</a> is an <a data-type="indexterm" data-primary="HAProxy" data-secondary="Bamboo, setting up with" id="hap3msuw"></a><a data-type="indexterm" data-primary="Bamboo" id="b3"></a>HAProxy configuration daemon with a web interface.
It provides a UI for viewing and managing the current state of HAProxy rules.
At its core, Bamboo monitors Marathon for changes to applications, and keeps its HAProxy instance’s backends up-to-date.
Bamboo also provides several useful features, all of which are exposed via the web interface and an HTTP REST API.</p>

<p>Most importantly, Bamboo supports using HAProxy <a data-type="indexterm" data-primary="ACL rules" id="idp9535664"></a><a data-type="indexterm" data-primary="HAProxy" data-secondary="ACL rules" id="idp9536368"></a>ACL rules for each Marathon application.
An ACL rule is a fine-grained way to choose which server backend should handle a request.
ACL rules can route requests based on their URL, cookies, headers, and many other factors.
For instance, you can use ACL rules to route requests whose paths start with <code>/static</code> to the static content-serving backends, but all other requests to your application servers.
ACL rules are extremely powerful, since they allow you to separate your application into isolated components or services, scale those components separately, but still expose a single URL to clients.
With ACL rules, you could choose to route anonymous visitors to one pool of servers, logged-in users to another pool of servers, and requests for static data to a third pool of servers, thus enabling you to scale each of their capacities separately.</p>

<p>Bamboo also has a powerful templating system, based on the Go language’s <a href="http://golang.org/pkg/text/template/"><code>text/template</code> package</a>.
This templating system is flexible, but does have a steep learning curve compared to simpler, more popular systems like <a href="https://mustache.github.io/">mustache templates</a>.</p>

<p>All proxy configuration information is stored in <a data-type="indexterm" data-primary="ZooKeeper" id="idp9541408"></a>ZooKeeper, which simplifies configuration management by keeping all instances of Bamboo in sync.</p>

<p>Bamboo uses the <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#marathon_event_bus">Marathon event bus</a> to discover changes in backend configurations, which means that your HAProxy configurations typically lag changes in Marathon by mere hundreds of milliseconds.</p>

<p>Additionally, Bamboo has basic integration with <a href="https://github.com/etsy/statsd">StatsD</a> to report on when reconfiguration events occurred.</p>

<p>Bamboo provides a complete solution for sophisticated HAProxy configurations for Marathon <a data-type="indexterm" data-primary="Bamboo" data-startref="b3" id="idp9545408"></a><a data-type="indexterm" data-primary="HAProxy" data-secondary="Bamboo, setting up with" data-startref="hap3msuw" id="idp9546384"></a>applications.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="HAProxy for microservices"><div class="sect3" id="idp9547856">
<h3>HAProxy for microservices</h3>

<p>Nowadays, <a data-type="indexterm" data-primary="HAProxy" data-secondary="for microservices" id="hap3fm"></a><a data-type="indexterm" data-primary="microservices" id="ms3"></a>microservices are a popular architectural pattern.
Mesos and Marathon form a great substrate for building microservices-based applications: after all, you can host all your services on Marathon.
Unfortunately, service discovery is typically a substantial problem for microservice deployments.
Let’s look at how we can use Mesos and Marathon to create a <a href="http://nerds.airbnb.com/smartstack-service-discovery-cloud/">SmartStack</a>-like system.</p>

<p>We need to consider two issues: how can we do <a data-type="indexterm" data-primary="service discovery" id="sd3"></a>service discovery, and what are the problems with the standard options? These options include:</p>
<dl>
<dt>DNS</dt>
<dd>
<p>We <a data-type="indexterm" data-primary="DNS discovery" id="idp9556256"></a>could choose to use round-robin DNS to give all our backend servers the same DNS name.
There are two problems we’ll face, however: DNS changes typically take at least several seconds to propagate through our infrastructure, and some applications cache DNS resolutions forever (meaning they’ll never see DNS changes).
The other problem is that, unless you write a custom client library that can use <code>SRV</code> records, DNS doesn’t provided a simple solution to running multiple applications on the same server but with different or randomly assigned ports.</p>
</dd>
<dt>Centralized load balancing</dt>
<dd>
<p>This <a data-type="indexterm" data-primary="centralized load balancing" id="idp9559360"></a>is akin to what we discussed in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#bamboo">“Bamboo”</a>.
For some applications, this is actually a great design; however, it does require a globally accessible pool of load balancers.
This centralization can make it tedious to securely isolate applications from one another: in order to isolate the applications, you must configure the Nginx or HAProxy rules for the specific isolation requirements.<sup><a data-type="noteref" id="idp9561408-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9561408" class="totri-footnote">5</a></sup></p>
</dd>
<dt>In-app discovery</dt>
<dd>
<p>Companies <a data-type="indexterm" data-primary="in-app discovery" id="idp9563488"></a>like <a data-type="indexterm" data-primary="Twitter" id="idp9564352"></a><a data-type="indexterm" data-primary="Google" id="idp9565056"></a><a data-type="indexterm" data-primary="Finagle" id="idp9565728"></a><a data-type="indexterm" data-primary="Stubby" id="idp9566400"></a>Twitter and Google use specialized service request and discovery layers, such as Finagle and Stubby, respectively.
These RPC layers integrate service discovery directly into the application, querying ZooKeeper or Chubby (Google’s internal ZooKeeper-like system) when they need to find a server to which they can send a request.
If this is possible in your environment, using a specialized service discovery layer offers the most flexibility in terms of routing, load balancing, and reliability due to the fact that you can control every aspect of the system.
Unfortunately, if you need to integrate applications written in several languages, it can be onerous and time-consuming to develop parallel implementations of the discovery system for every language.
Furthermore, this approach can be a nonstarter if you need to integrate with existing applications that weren’t developed with this service discovery mechanism built in.</p>
</dd>
</dl>

<p>The shortcomings of these approaches led many engineers to come up with a fourth pattern: one that combines the ease of integration of centralized load balancing with the fault tolerance of the decentralized options.
With this approach, we will run a copy of HAProxy on every single machine in our data center.
Then, we’ll assign each application a port (but not a hostname).
Finally, we’ll keep all of our HAProxy instances pointing each application’s port at its backends, wherever they’re running on the cluster.</p>

<p>This approach has two main benefits:</p>
<dl>
<dt>Ease of setup</dt>
<dd>
<p>You can use <a data-type="indexterm" data-primary="Bamboo" id="idp9571120"></a>Bamboo or a simple cron job on every machine in your cluster to keep the local instances of HAProxy in sync with Marathon.
Even if some part of your infrastructure is temporarily unavailable, the local HAProxy will continue to route traffic directly to the backends.
This means that even a disruption of Marthon won’t impact the application’s operations.</p>
</dd>
<dt>Ease of use</dt>
<dd>
<p>Every application can communicate with any other microservice simply by connecting to <code>localhost:$PORT</code>, where <code>$PORT</code> is what you assigned to that microservice.
There’s no need to write any specialized or custom code for your applications, as all you need to do is remember which port corresponds to which application.</p>
</dd>
</dl>

<p>There are also a few downsides to this approach.
One is that you need to carefully maintain the mapping from service to port.
If you try to store that mapping globally and have applications fetch it on startup, you’ll have to write custom code for every language again.
On the other hand, if you hardcode the ports themselves, you run the risk of typos, which can be very difficult to debug.</p>

<p>The other downside is the lack of coordination between proxies. Our system continues to function even when partial failures happen, because each machine operates independently.
Due to the independent operation of each machine, it’s possible for several HAProxies to all route to the same backend, thus spiking the load on that backend, which can result in cascading failures.
It is normal to see the variance of request times increase as the number of nodes in a cluster increases.</p>

<p>Today, this approach of tying services to ports and having every client connect to HAProxy at <code>localhost</code> seems to be the most popular way to manage service discovery on Mesos <a data-type="indexterm" data-primary="proxies" data-secondary="HAProxy" data-startref="p3hap" id="idp9577984"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="HAProxy setup" data-startref="m3uhaps" id="idp9579232"></a><a data-type="indexterm" data-primary="HAProxy" data-startref="hap3" id="idp9580448"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="using" data-startref="m3u" id="idp9581392"></a><a data-type="indexterm" data-primary="HAProxy" data-secondary="for microservices" data-startref="hap3fm" id="idp9582608"></a><a data-type="indexterm" data-primary="microservices" data-startref="ms3" id="idp9583824"></a><a data-type="indexterm" data-primary="service discovery" data-startref="sd3" id="idp9604064"></a>clusters.</p>
</div></section>



</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Running Mesos Frameworks on Marathon"><div class="sect1" id="idp9514832">
<h1>Running Mesos Frameworks on Marathon</h1>

<p>A <a data-type="indexterm" data-primary="Marathon" data-secondary="running Mesos frameworks on" data-seealso="Chronos" id="m3rmfo"></a><a data-type="indexterm" data-primary="Chronos" id="ch3"></a>very common choice in Mesos clusters is to run the cluster’s Mesos frameworks on Marathon.
But Marathon is a Mesos framework itself!
So what does it mean to run a Mesos framework on Marathon?
Rather than worrying about deploying each framework’s scheduler to specific hosts and dealing with those hosts’ failures, Marathon will ensure that the framework’s scheduler is always running somewhere on the cluster.
This greatly simplifies deploying new frameworks in a highly reliable configuration.</p>
<div data-type="note" epub:type="note"><h1>What About Resource Allocation for Frameworks Run by Marathon?</h1>
<p>New Mesos users often wonder, “If I run a framework on Marathon, how does that affect the allocation of resources?”
In fact, although the framework’s scheduler is run by Marathon, the scheduler still must connect directly to Mesos, and <em>it will receive resources in an identical way as if you ran it on specifically chosen machines</em>.
The benefit of running it on Marathon, of course, is that any Mesos slave can run the scheduler, and Marathon can restart it automatically if that slave fails.</p>
</div>








<section data-type="sect2" data-pdf-bookmark="What Is Chronos?"><div class="sect2" id="idp9611088">
<h2>What Is Chronos?</h2>

<p>Chronos is a Mesos framework that provides a highly available, distributed time-based job scheduler, like cron.
With Chronos, you can launch jobs that are either command-line programs (optionally downloaded from URIs) or Docker containers.
Like Marathon, Chronos has a web UI and an easily programmable REST API.
Although the Chronos endpoints have a slightly different interface than Marathon’s, we won’t go over their details, as the online <a href="https://mesos.github.io/chronos/">documentation</a> is sufficient.
Chronos has four key features for <a data-type="indexterm" data-primary="Chronos" data-secondary="key features for scheduling" id="ch3kffs"></a>scheduling jobs:</p>
<dl>
<dt>Interval scheduling</dt>
<dd>
<p>Chronos <a data-type="indexterm" data-primary="Chronos" data-secondary="interval scheduling" id="idp9616736"></a><a data-type="indexterm" data-primary="interval scheduling" id="idp9617744"></a>uses the standard ISO 8601 notation to specify repeating intervals.
Through the web UI or REST API, you can specify the frequency at which you want the job to rerun.
This makes Chronos suitable for running quick jobs every few minutes, or a nightly data generation job.</p>
</dd>
<dt>Dependency tracking</dt>
<dd>
<p>In theory, <a data-type="indexterm" data-primary="Chronos" data-secondary="dependency tracking" id="idp9620112"></a><a data-type="indexterm" data-primary="dependency tracking" id="idp9621120"></a>Chronos supports dependent jobs.
Dependent jobs run only if their prerequisites ran successfully.
Unfortunately, Chronos’s implementation of dependent jobs misses the mark.
In Chronos, a job’s dependencies are considered satisfied if the last invocation of that job was successful.
A dependent job is run as soon as all of its dependencies have been run at least once.
This means that unless every parent has the exact same interval, the dependent jobs can run at potentially unexpected times.
In <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#chronos_ops">“Chronos Operational Concerns”</a>, we’ll look at a popular mitigation strategy for this.</p>
</dd>
<dt>Deferred start</dt>
<dd>
<p>Chronos <a data-type="indexterm" data-primary="Chronos" data-secondary="deferred start" id="idp9624592"></a><a data-type="indexterm" data-primary="deferred start" id="idp9625600"></a>can also be used to run a job once or on a repeating interval at a point in the future.
When you specify the ISO 8601 interval on which to repeat the job, you also specify when you’d like the first run of the job to start.
This means that you can use Chronos to schedule jobs to run days, weeks, or months in the future, which can be useful for planning purposes.</p>
</dd>
<dt>Worker scalability</dt>
<dd>
<p>The <a data-type="indexterm" data-primary="Chronos" data-secondary="worker scalability" id="idp9628064"></a><a data-type="indexterm" data-primary="scalability" id="idp9629072"></a>key differentiator between Chronos and most other job schedulers is that Chronos runs its jobs inside of containers on Mesos. This means that jobs are isolated and workers are scalable, so no matter what load Chronos generates, you’re able to add new Mesos slaves to handle the additional work and ensure that the jobs receive their necessary resources.</p>
</dd>
</dl>

<p>Like all production-ready Mesos frameworks, Chronos has high-availability support with hot spares—most Chronos deployments will run at least two instances of the scheduler, to ensure that Chronos never has more than a couple seconds of downtime if a scheduler or its host fails.
Chronos also comes with a synchronization tool, <code>chronos-sync.rb</code>.
This tool synchronizes the Chronos state to disk in JSON format.
Using <code>chronos-sync.rb</code>, you can version the jobs you run on your cluster by committing the file to version control.
This is the most popular approach to ensure repeatability, since it allows you to keep your Chronos configuration in a repository.</p>

<p>The combination of its REST API and synchronize-to-disk tool make Chronos easy to integrate.
Since its features are somewhat limited, it’s easy to use, but it’s not a complete solution for dependent workflow <a data-type="indexterm" data-primary="Chronos" data-secondary="key features for scheduling" data-startref="ch3kffs" id="idp9632912"></a>management.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Running Chronos on Marathon"><div class="sect2" id="idp9634384">
<h2>Running Chronos on Marathon</h2>

<p>One <a data-type="indexterm" data-primary="Chronos" data-secondary="running on Marathon" id="ch3rom"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="running Chronos on" id="m3rco"></a>of the most common techniques seen in Mesos framework deployment is to run framework schedulers on Marathon.
The reason for this is that those schedulers can rely on Marathon to ensure they’re always running somewhere.
This removes a huge burden from the operator, who would otherwise need to ensure that every scheduler had a well-monitored, multimachine deployment.</p>

<p>In order to be deployable on Marathon, a scheduler must do some sort of leader election. As we’ll learn in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#chapter_creating_new_scheduler">Chapter&nbsp;4</a>, a scheduler connects to Mesos from a single host.
This means that if we’d like to run our scheduler in two locations (e.g., to have a hot spare), we’ll need some sort of signaling to ensure that only one scheduler runs at a time.
The most common way to solve this is to use <a data-type="indexterm" data-primary="ZooKeeper" id="idp9640480"></a>ZooKeeper, since it has an easily integrated leader election component (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#scheduler_ha">“Adding High Availability”</a> for details).
Marathon and Chronos both take this approach.</p>

<p>Let’s look at an example <a data-type="indexterm" data-primary="JSON" id="idp9642544"></a>JSON expression for launching Chronos on Marathon (<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#chronos_json_descriptor">Example&nbsp;3-16</a>).
In order to maximize the efficiency of our port allocations, we’ll allow Chronos to bind to any port.
To connect to Chronos, we’ll either click through the Marathon UI or use one of the HAProxy service discovery mechanisms described earlier.</p>
<div id="chronos_json_descriptor" data-type="example">
<h5><span class="label">Example 3-16. </span>Chronos JSON descriptor</h5>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"cmd"</code><code class="p">:</code><code> </code><code class="s2">"java -jar chronos.jar -Xmx350m -Xms350m ---port $PORT0"</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO13-1a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-1a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
    </code><code class="nt">"uris"</code><code class="p">:</code><code> </code><code class="p">[</code><code>
        </code><code class="s2">"http://fetchable/uri/with/chronos.jar"</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO13-2a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-2a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
    </code><code class="p">]</code><code class="p">,</code><code>
    </code><code class="nt">"cpus"</code><code class="p">:</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO13-3a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
    </code><code class="nt">"mem"</code><code class="p">:</code><code> </code><code class="mi">384</code><code class="p">,</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
    </code><code class="nt">"instances"</code><code class="p">:</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO13-4a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
    </code><code class="nt">"id"</code><code class="p">:</code><code> </code><code class="s2">"chronos"</code><code class="p">,</code><code>
    </code><code class="nt">"ports"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">,</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO13-5a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-5a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
    </code><code class="nt">"constraints"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="p">[</code><code class="s2">"hostname"</code><code class="p">,</code><code> </code><code class="s2">"UNIQUE"</code><code class="p">]</code><code class="p">]</code><code> </code><a class="co" id="co_porting_an_existing_application_to_mesos_CO13-6a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#callout_porting_an_existing_application_to_mesos_CO13-6a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code class="p">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO13-1a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO13-1a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We assume that <code>java</code> is already installed on all the Mesos slaves. Thus, we only need to pass the dynamically assigned port to Chronos so that it can start up successfully.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO13-2a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO13-2a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Rather than installing Chronos on every Mesos slave, we’ll store its <em>.jar</em> file in some known location. This way, it’ll be downloaded on the fly to any slave that is assigned to run the Chronos scheduler, simplifying deployment.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO13-3a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO13-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We’ll choose a container size to match the amount of memory we allow the JVM to allocate (we leave 34 MB of headroom for the JVM itself).</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO13-4a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO13-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Running two instances of Chronos gives us near-instantaneous failover, since the standby Chronos scheduler will already be running.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO13-5a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO13-5a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>Chronos needs only one port to be assigned.</p></dd>
<dt><a class="co" id="callout_porting_an_existing_application_to_mesos_CO13-6a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#co_porting_an_existing_application_to_mesos_CO13-6a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>We will use a unique host constraint to ensure that the standby instance of Chronos is running on a different machine. If there are slave attributes that indicate the rack of each slave, it would be better to rack-isolate the scheduler and its standby.</p></dd>
</dl></div>

<p>The simplest way to verify that Chronos is running is to click on the assigned port number from the Marathon app view.
Each task’s port assignment will be a link to that host and port combination, which will load the Chronos UI.
The Chronos UI is somewhat buggy, so it’s recommended to use <code>curl</code> or <code>chronos-sync.rb</code> to configure your instance of <a data-type="indexterm" data-primary="Chronos" data-secondary="running on Marathon" data-startref="ch3rom" id="idp9768224"></a><a data-type="indexterm" data-primary="Marathon" data-secondary="running Chronos on" data-startref="m3rco" id="idp9769376"></a>Chronos.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Chronos Operational Concerns"><div class="sect2" id="chronos_ops">
<h2>Chronos Operational Concerns</h2>

<p>Chronos <a data-type="indexterm" data-primary="Chronos" data-secondary="operational concerns" id="idp9772592"></a>is a useful part of the Mesos ecosystem; however, care must be taken not to overly rely on it.
There are a few things that one must be aware of when running Chronos in production:</p>
<ol>
<li>
<p>The <a data-type="indexterm" data-primary="Chronos" data-secondary="dependent jobs feature" id="idp9774944"></a>dependent jobs feature isn’t useful—you must use a workflow manager.</p>
</li>
<li>
<p>Chronos is still a complex distributed system—it’s only necessary if you need jobs to run scalably in containers.</p>
</li>

</ol>

<p>Almost no one uses the Chronos dependent jobs feature.
Instead, they use Chronos to schedule invocations of popular data workflow tools.
For simple workflows (such as running a few processes in order), Bash scripts are a popular option;
however, beyond 20 lines, Bash scripts become unwieldy, and their syntax for complex loops and conditionals leaves much to be desired.
<code>make</code> is <a data-type="indexterm" data-primary="make" id="idp9778512"></a>another popular way to express dependencies, since it has superior syntax for workflows and supports basic parallelism.
<a href="https://github.com/spotify/luigi">Luigi</a> <a data-type="indexterm" data-primary="Luigi" id="idp9780144"></a>is a much richer and more powerful workflow manager.
It supports checkpoints in HDFS and databases, which can improve the efficiency of retries of jobs that failed partway through, since it won’t need to redo earlier checkpointed work.
Regardless of your particular needs and use case, you should use some other tool to order the jobs that Chronos will be scheduling.</p>

<p>If you’ve made it this far, you’re almost ready to use Chronos in production!
The final consideration is whether you truly need the scalable isolation that Chronos gets from Mesos.
Even though you’re running a Mesos cluster, you don’t need to use Chronos for your task management.
There are many other job-scheduling servers that could easily be run on Marathon; only use Chronos if you need each job to run in its own container.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Chronos on Marathon: Summary"><div class="sect2" id="idp9782352">
<h2>Chronos on Marathon: Summary</h2>

<p>Chronos is a powerful tool for Mesos clusters that need reliable, scalable, interval-based job scheduling.
It powers the data generation processes at many companies, including Airbnb.
Just remember the several quirks, workarounds, and advice discussed here!</p>

<p>Chronos on Marathon is just one example of how Marathon can be used to provide high availability and ease of deployment to other Mesos schedulers.
<a href="https://mesosphere.com/product/">DCOS</a>, a commercial Mesos product, takes this further and requires all frameworks on DCOS to be hosted by Marathon.
Whether you’re deploying <a href="http://mesos.github.io/chronos/">Chronos</a>, <a href="https://github.com/mesos/kafka">Kafka</a>, or <a href="https://github.com/apache/incubator-cotton">Cotton</a>, Marathon is an excellent choice for hosting other Mesos frameworks’ <a data-type="indexterm" data-primary="Marathon" data-secondary="running Mesos frameworks on" data-seealso="Chronos" data-startref="m3rmfo" id="idp9787632"></a><a data-type="indexterm" data-primary="Chronos" data-startref="ch3" id="idp9789120"></a>schedulers.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Alternatives to Marathon + Chronos"><div class="sect1" id="idp9790320">
<h1>Alternatives to Marathon + Chronos</h1>

<p>Of <a data-type="indexterm" data-primary="Marathon" data-secondary="alternatives to" id="idp9791616"></a><a data-type="indexterm" data-primary="Chronos" data-secondary="alternatives to" id="idp9792624"></a>course, Marathon (and Chronos) won’t fit every cluster’s needs.
Let’s briefly look at two other popular Mesos PaaS frameworks: Aurora and Singularity.
Both frameworks have a much steeper learning curve, but they offer many additional features.</p>








<section data-type="sect2" data-pdf-bookmark="Singularity"><div class="sect2" id="idp9794096">
<h2>Singularity</h2>

<p><a href="https://github.com/HubSpot/Singularity">Singularity</a> is a <a data-type="indexterm" data-primary="Singularity" id="idp9796144"></a>Mesos framework developed by <a data-type="indexterm" data-primary="Hubspot" id="idp9797008"></a>HubSpot.
It offers the ability to deploy services just like Marathon (including Dockerized applications); beyond this, if a service begins to fail its health checks after a deployment, Singularity will automatically roll back the deployment.
Singularity also supports repeating jobs, like Chronos, as well as one-shot jobs, which can be triggered via a REST API. This simplifies adding containerized, asynchronous background processing to any service or repeating job.
For managing service discovery and proxies, Singularity is integrated with another tool called <a href="https://github.com/HubSpot/Baragon">Baragon</a>, which manages and <a data-type="indexterm" data-primary="proxies" data-secondary="HAProxy" id="idp9799008"></a><a data-type="indexterm" data-primary="HAProxy" id="idp9800016"></a><a data-type="indexterm" data-primary="Nginx" id="idp9800688"></a><a data-type="indexterm" data-primary="Amazon Elastic Load Balancer" id="idp9801360"></a><a data-type="indexterm" data-primary="Elastic Load Balancer" id="idp9802000"></a>integrates HAProxy, Nginx, and Amazon’s Elastic Load Balancer.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Aurora"><div class="sect2" id="idp9802928">
<h2>Aurora</h2>

<p><a href="http://aurora.apache.org/">Aurora</a> is the <a data-type="indexterm" data-primary="Aurora" id="idp9804800"></a><a data-type="indexterm" data-primary="Twitter" id="idp9805536"></a>Mesos framework that powers Twitter.
Aurora has a highly advanced job description API written in Python.
This API, called <a data-type="indexterm" data-primary="Thermos" id="idp9806480"></a>Thermos, allows users to specify how to build and install applications, as well as the workflow and sequence of processes to run within the Mesos executor.
Aurora comes with a high-performance distributed service discovery API with bindings for C++, Java, and Python.
It’s able to run repeating jobs with cron-style syntax.
Also, just like Singularity, Aurora can automatically detect when a service’s <a data-type="indexterm" data-primary="health checks" id="idp9807696"></a>health checks start failing and roll it back to the previous working version.
Aurora’s most powerful features are related to its multitenancy controls: Aurora can allow for some tasks to use spare cluster capacity, and then preempt those tasks when higher-priority production tasks need to be scheduled.
It also can enforce quotas between users.
These features were born out of the needs of a company running huge numbers of applications written by hundreds of developers on massive Mesos clusters;
if that sounds like the kind of organization you’re building a Mesos cluster for, Aurora’s worth a closer look.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp9809520">
<h1>Summary</h1>

<p>In this chapter, we learned how to build standard stateless server-based applications with Mesos.
What we achieved was self-healing, self-restarting, and simplified service discovery—we basically built a PaaS on Mesos!
This was accomplished by using Marathon, a popular Mesos framework.</p>

<p>Marathon launches, monitors, and restarts processes across your Mesos cluster.
It simplifies rollout, allows for push-button scale up and scale down, and provides a simple JSON API that’s easy to integrate with.</p>

<p>First, we learned how to start up Marathon, how to secure it, and how to ensure that it’s highly available.
Then, we learned how to write a Marathon service descriptor, which allowed us to launch the omnipresent <code>SimpleHTTPServer</code>.
This was just an example application; any other application could be launched simply by changing the command line.
We also learned how to programmatically query for information about the status of applications on Marathon.</p>

<p>Next, we learned about scaling applications on Marathon.
Most importantly, we discussed placement constraints, and how to easily ensure that applications run on the correct class of slave machines and are spread evenly amongst racks.</p>

<p>Docker is the most popular application containerization technology.
We learned how to launch Dockerized applications on Marathon with minimal fuss, and how to configure various Docker-specific options, such as mounting host disks.</p>

<p>Our applications wouldn’t be fully robust without including health checks and automatic incremental rollouts and rollbacks.
We discussed how to configure TCP, HTTP, and command-based health checks, as well as how to specify the application’s behavior during upgrades.
We also discussed how to subscribe to an event stream from Marathon to build custom integrations.</p>

<p>Then, we learned about integrating Marathon with a service discovery proxy.
Bamboo, an open-source HAProxy configuration manager, is a powerful tool for synchronizing HAProxy with Marathon tasks.
We also learned about popular approaches for building scalable, multilanguage microservices architectures with HAProxy and Marathon.</p>

<p>Finally, we looked at how to use Marathon to host other Mesos frameworks’ schedulers, using Chronos, a distributed cron-like framework, as an example.
We also briefly surveyed alternative PaaS frameworks to Marathon, since they offer many additional features (at the cost of a steeper learning curve).</p>

<p>Perhaps <a data-type="indexterm" data-primary="Marathon" data-startref="m3" id="idp9817440"></a>Marathon and its alternatives don’t satisfy the needs of your application, and you need more control over how processes are launched or how failures are handled.
In that case, you’ll need to write your own framework.
In the next chapter, we’ll learn about the techniques used to build Marathon, so that you can build your own custom Mesos framework.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idp7830224"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7830224-marker" class="totri-footnote">1</a></sup> By this, I mean endpoints that may result in running a query on the database or making an external service call that you can’t predict how long it will take, or whether we’ll consume resources indefinitely.</p><p data-type="footnote" id="idp9056944"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9056944-marker" class="totri-footnote">2</a></sup> If you’d like to use a private Docker repository, you can add the <em>.dockercfg</em> to the <code>"uris"</code> field of the application descriptor, as described in the <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#Advanced_Docker_Configuration">Advanced Docker Configuration</a> note in the section <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#docker_support">“Using Docker”</a>.</p><p data-type="footnote" id="idp9340864"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9340864-marker" class="totri-footnote">3</a></sup> These will be made horizontally scalable in a future version of Mesos. You can see whether these features have been added yet by checking MESOS-2533 and MESOS-3567 on <a href="https://issues.apache.org/jira"><em class="hyperlink">https://issues.apache.org/jira</em></a>.</p><p data-type="footnote" id="idp9521072"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9521072-marker" class="totri-footnote">4</a></sup> SSL termination is when clients communicate with the proxy over a secure SSL connection, and the proxy handles the SSL so that the backends need not waste CPU resources on cryptography, or even support it.</p><p data-type="footnote" id="idp9561408"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9561408-marker" class="totri-footnote">5</a></sup> The other options, DNS and in-app discovery, delegate communication directly to each application, so there’s no central system to configure for isolation. Instead, each application can handle its authorization in complete isolation from other applications.</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch02.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">2. Getting Started with Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch04.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">4. Creating a New Framework for Mesos</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch03.html" data-for-analytics="9781491926543:ch03.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#">Reset</a>
</div>
</div></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch04.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch04.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom gr__safaribooksonline_com" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch04.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch04.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>4. Creating a New Framework for Mesos - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch04.html"><meta name="description" content=" Chapter 4. Creating a New Framework for Mesos A Mesos framework is the conceptual aggregation of a distributed system. But what does that mean to us, as framework developers? How ... "><meta property="og:title" content="4. Creating a New Framework for Mesos"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="4. Creating a New Framework for Mesos"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch04.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 4. Creating a New Framework for Mesos A Mesos framework is the conceptual aggregation of a distributed system. But what does that mean to us, as framework developers? How ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch04.html" data-for-analytics="9781491926543:ch04.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch04.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch04.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch04.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%204.%20Creating%20a%20New%20Framework%20for%20Mesos&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch04.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch03.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">3. Porting an Existing Application to Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch05.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">5. Building a Mesos Executor</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 4. Creating a New Framework for Mesos"><div class="chapter" id="chapter_creating_new_scheduler">
<h1><span class="label">Chapter 4. </span>Creating a New Framework for Mesos</h1>


<p>A Mesos <a data-type="indexterm" data-primary="framework design" data-secondary="scheduler-only" data-see="schedulers" id="idp9820640"></a>framework is the conceptual aggregation of a distributed system.
But what does that mean to us, as framework developers?
How can we actually understand how the structure of the code we write maps onto the Mesos cluster?
Let’s review the Mesos architecture, and learn some common patterns in framework design.</p>

<p>Instead of trying to understand everything about Mesos architecture all at once, we’ll look at the simplest case: a framework that only has a scheduler, and no custom executor.
This type of framework could spin up workers to process requests coming in on a queue, or it could manage a pool of services.</p>






<section data-type="sect1" data-pdf-bookmark="The Scheduler"><div class="sect1" id="idp9823104">
<h1>The Scheduler</h1>

<p>The <a data-type="indexterm" data-primary="schedulers" id="s4"></a><a data-type="indexterm" data-primary="schedulers" data-secondary="responsibilities" id="idp9825616"></a>scheduler is the component that interacts directly with the leading Mesos master.
A scheduler has four responsibilities:</p>
<ol>
<li>
<p>Launch tasks on the received offers.</p>
</li>
<li>
<p>Handle status updates from those tasks, particularly to respond to task failures and crashes.</p>
</li>
<li>
<p>Persist state and manage failovers in order to be highly available.</p>
</li>
<li>
<p>Interact with clients, users, or other systems (since no system runs in a vacuum!).</p>
</li>

</ol>

<p>Some of these responsibilities are implemented purely by interacting with the Mesos API; others must be implemented using the language of choice’s platform.
For instance, launching tasks and handling status updates are implemented entirely by Mesos callbacks and API requests.
On the other hand, it’s up to you to start a web server (such as Jetty on Java or Flask on Python) to allow clients to interact with the scheduler.
High availability usually requires using both Mesos APIs and other libraries to create a solution that is suitable for the problem domain.</p>

<p>But how can we launch tasks if we’re only focusing on the scheduler?
For our convenience, Mesos comes with something called the <code>CommandExecutor</code>, <a data-type="indexterm" data-primary="CommandExecutor" id="idp9832864"></a>which is specifically designed to make it easy to launch and orchestrate command-line programs and Docker containers.
Let’s take a look at some high-level designs for several common scheduler abstractions: building a pool of servers, a work queue, and a job processor.</p>

<p>First, we’ll look at the pool of servers design. Its architecture is illustrated <a data-type="indexterm" data-primary="pool of servers scheduler" id="idp9834400"></a><a data-type="indexterm" data-primary="schedulers" data-secondary="pool of servers design" id="idp9835072"></a>in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#pool_of_servers_scheduler_fig">Figure&nbsp;4-1</a>.</p>








<section data-type="sect2" data-pdf-bookmark="Pool of Servers Scheduler"><div class="sect2" id="pool_of_servers">
<h2>Pool of Servers Scheduler</h2>

<figure><div id="pool_of_servers_scheduler_fig" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0401.png" alt="Architecture and Information Flow of a Pool of Servers Scheduler" width="1375" height="513" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0401.png">
<h6><span class="label">Figure 4-1. </span>Architecture and information flow of a pool of servers scheduler</h6>
</div></figure>

<p>This scheduler is simply going to ensure that there are always <em>X</em> copies of some application, such as Ruby on Rails, running.
To build a pool of servers, our scheduler will have a list of all the servers it wants to be running.
Initially, the list will have all the servers in <a data-type="indexterm" data-primary="server states" id="idp9841824"></a><a data-type="indexterm" data-primary="pending state" id="idp9842528"></a>the <em>pending</em> state.
As the scheduler receives offers, it will attempt to launch servers, putting them into the <em>staging</em> state.
Once <a data-type="indexterm" data-primary="staging state" id="idp9844272"></a><a data-type="indexterm" data-primary="running state" id="idp9845008"></a>the servers start successfully, the scheduler can move them to the <em>running</em> state.
If they ever crash, they’ll go back to the initial pending state so that they can be relaunched on a new offer.
Note that we need three states here: pending, staging, and running.</p>

<p>You might be tempted to remove the staging state, since, after all, that seems awfully similar to pending—in both cases, the server is not yet started.
But here’s the problem: Mesos is an asynchronous system!
You could receive many offers between attempting to launch a task and having the task actually start.
Thus, the staging state ensures that we only try to launch each server once, and only retry if the launch fails.
If you forget to have a staging state, you might encounter a bug in which there are tens or hundreds of instances of a task when there should be only one.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Work Queue Scheduler"><div class="sect2" id="work_queue_scheduler_example">
<h2>Work Queue Scheduler</h2>

<p>The <a data-type="indexterm" data-primary="schedulers" data-secondary="work queue design" id="idp9849200"></a><a data-type="indexterm" data-primary="work queue scheduler" id="idp9850208"></a>work queue architecture, illustrated in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#architecture_and_information_flow">Figure&nbsp;4-2</a>, allows clients to submit “work items” to a queue, where they’ll eventually be processed by workers.
A work queue scheduler will ensure that we always have a sufficient number of workers running, so that there will be a sufficient number of workers to process the queued work items.</p>

<figure><div id="architecture_and_information_flow" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0402.png" alt="Architecture and Information Flow of a Work Queue Scheduler" width="1272" height="542" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0402.png">
<h6><span class="label">Figure 4-2. </span>Architecture and information flow of a work queue scheduler</h6>
</div></figure>

<p>To build this scheduler, we’re actually going to cheat and assume that we already have a pool of servers scheduler, as described in the previous section.
This way, we simply start the workers as servers in the pool.
Therefore, the meat of this system will reside in the workers themselves.</p>

<p>Our workers will retrieve their work items from some known location.
This location could be passed to them from the scheduler as a command-line option or environment variable.
Each worker will connect to the queue, and then loop forever: retrieve an item, process it, and mark it as done.</p>

<p>The neat thing about considering work queues (and all potential frameworks) in this way is that you don’t even need to write a scheduler—you could just use Marathon or some other pool of services scheduler.
Of course, this shifts the implementation of the queue to another system, such as RabbitMQ or Redis.
This is a good thing: the Mesos messaging APIs are designed for controlling the applications on the cluster and are not as well suited to other domains, such as transactional logic or high-performance messaging.
When developing frameworks for Mesos, you must use appropriate data storage backends—queues, databases, and document stores are all likely useful, depending on the framework you’re building.</p>
</div></section>













<section data-type="sect2" class="pagebreak-before" data-pdf-bookmark="Job Processor Scheduler"><div class="sect2" id="job_processor_scheduler">
<h2>Job Processor Scheduler</h2>

<p>The <a data-type="indexterm" data-primary="schedulers" data-secondary="job processor design" id="idp9858880"></a><a data-type="indexterm" data-primary="job processor scheduler" id="idp9859888"></a>final abstraction we’ll consider is the job processor scheduler (<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#architecture_information_flow_job_processor">Figure&nbsp;4-3</a>).</p>

<figure><div id="architecture_information_flow_job_processor" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0403.png" alt="Architecture and Information Flow of a Job Processor Scheduler" width="1272" height="542" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0403.png">
<h6><span class="label">Figure 4-3. </span>Architecture and information flow of a job processor scheduler</h6>
</div></figure>

<p>A job processor will accept a list of jobs from clients and then run those jobs on a cluster; a job is just a command line to invoke, along with the CPU and memory resources it needs.
This scheduler will require a slightly more complex state machine, since we’ll also need terminal states for jobs (we’ll call them <em>successful</em> and <em>failed</em>).
We’ll also track how many retries have been attempted, so that we can give up on jobs with no hope for success.</p>

<p>This scheduler’s state machine will move jobs from <a data-type="indexterm" data-primary="server states" id="idp9865952"></a>pending to staging <a data-type="indexterm" data-primary="pending state" id="idp9866784"></a><a data-type="indexterm" data-primary="running state" id="idp9867488"></a>when it attempts to launch them on an offer, and from staging to running when the job actually starts running.
Handling completion of a task is trickier, though: we’ll want to move the job to successful if it succeeds, to failed if it has exceeded the maximum number of retries, or to pending if it has more retries remaining.
Furthermore, we could determine whether the task failed due to a bug in its code, a transient machine failure, or some other issue—this is useful feedback for deciding whether to have the job fail fast, or let it continue to retry.</p>

<p>Now that we’ve seen conceptually how a framework could be implemented with just a scheduler, let’s try our hand at implementing the job processor.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Useless Remote BASH"><div class="sect1" id="idp9869536">
<h1>Useless Remote BASH</h1>

<p>Before <a data-type="indexterm" data-primary="framework design" data-secondary="minimal code for task launch" id="fd4mcftl"></a>we get started on the job processor, let’s break down the absolute minimal code needed to get a task to launch on Mesos.
We’ll call this program Useless Remote BASH,<sup><a data-type="noteref" id="idp9873088-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9873088" class="totri-footnote">1</a></sup> as it’ll just run the hardcoded program in a container on the cluster.</p>

<p>Let’s break down this most simple of frameworks into several parts, and see
why each part is necessary. In <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#imports_cdecl_urb">Example&nbsp;4-1</a>, we can see the imports and class declaration of our new scheduler.</p>
<div id="imports_cdecl_urb" data-type="example">
<h5><span class="label">Example 4-1. </span>Imports and class declaration of useless remote BASH</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code> <code class="n">com</code><code class="o">.</code><code class="na">example</code><code class="o">;</code>
<code class="kn">import</code> <code class="nn">java.nio.file.*</code><code class="o">;</code>
<code class="kn">import</code> <code class="nn">java.util.*</code><code class="o">;</code>
<code class="kn">import</code> <code class="nn">org.apache.mesos.*</code><code class="o">;</code>
<code class="kn">import</code> <code class="nn">org.apache.mesos.Protos.*</code><code class="o">;</code>

<code class="kd">public</code> <code class="kd">class</code> <code class="nc">UselessRemoteBASH</code> <code class="kd">implements</code> <code class="n">Scheduler</code> <code class="o">{</code>
    <code class="c1">// We'll discuss the inner bits as we go</code>
<code class="o">}</code></pre></div>

<p>Two things here deserve our attention:</p>
<ol>
<li>
<p>We import everything from <code>org.apache.mesos</code> and <code>org.apache.mesos.Protos</code>, so that we can use the Mesos APIs.</p>
</li>
<li>
<p>Schedulers should implement the <code>Scheduler</code> interface, which defines the messages a scheduler can receive as callbacks.</p>
</li>

</ol>

<p>We’ll use the complementary <code>SchedulerDriver</code> class to send messages to Mesos. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#main_urb">Example&nbsp;4-2</a> is the entry point of our program.</p>
<div id="main_urb" data-type="example">
<h5><span class="label">Example 4-2. </span>main of Useless Remote BASH</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code> <code class="o">...</code> <code class="n">args</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">FrameworkInfo</code> <code class="n">frameworkInfo</code> <code class="o">=</code> <code class="n">FrameworkInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">()</code>
        <code class="o">.</code><code class="na">setUser</code><code class="o">(</code><code class="s">""</code><code class="o">)</code>
        <code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"Useless Remote BASH"</code><code class="o">)</code>
        <code class="o">.</code><code class="na">build</code><code class="o">();</code>

    <code class="n">Scheduler</code> <code class="n">mySched</code> <code class="o">=</code> <code class="k">new</code> <code class="n">UselessRemoteBASH</code><code class="o">();</code>


    <code class="n">SchedulerDriver</code> <code class="n">driver</code> <code class="o">=</code> <code class="k">new</code> <code class="n">MesosSchedulerDriver</code><code class="o">(</code>
        <code class="n">mySched</code><code class="o">,</code>
        <code class="n">frameworkInfo</code><code class="o">,</code>
        <code class="s">"zk://"</code> <code class="o">+</code> <code class="n">args</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code> <code class="o">+</code> <code class="s">"/mesos"</code>
    <code class="o">);</code>
    <code class="n">driver</code><code class="o">.</code><code class="na">start</code><code class="o">();</code>
    <code class="n">driver</code><code class="o">.</code><code class="na">join</code><code class="o">();</code>
<code class="o">}</code></pre></div>

<p>In the <code>main</code> function, first, we construct the <code>FrameworkInfo</code> of our framework.
<code>FrameworkInfo</code> is a <a data-type="indexterm" data-primary="FrameWorkInfo" id="idp9973568"></a>protobuf that describes the framework to Mesos.
You’ll want to choose a clear name for the framework, so that you can identify your framework in the Mesos UI.
In practice, you’ll want to construct the name to include several pieces of data: which framework this is, as well as other high-level information about the framework, such as whether it’s a <code>dev</code> or <code>prod</code> instance.
It’s entirely up to you what you name your framework, but consider the anecdote in the following sidebar!</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idp10026496">
<h5>When Poorly Chosen Framework Names Become Annoying</h5>
<p>We <a data-type="indexterm" data-primary="framework design" data-secondary="names" id="idp10027792"></a>decided it’d be effective to run Spark on our Mesos cluster.
We also decided that every user would get their own instance of Spark.
The next day, a user complained that tasks weren’t getting scheduled.
We opened the Mesos UI to see what was happening, but to our chagrin, every single user’s Spark framework was just called <code>Spark 0.7.6</code>.
As a result, we had no way to identify which user was hogging the resources!
From then on, we made sure to change the name of the Spark framework to <code>$username Spark 0.7.6</code>, so that we could tell what our cluster was doing at a glance.</p>
</div></aside>

<p>Typically, we set the framework’s user to an empty string (<code>""</code>), which means that it will register with Mesos as whichever user is running the scheduler.
In <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#mesos_roles">“Roles”</a>, we discussed how the framework’s user can be used for quotas, capacity planning, and security.
Most of the other fields of <code>FrameworkInfo</code> are used to configure high availability, so we’ll postpone discussing those until later.</p>

<p>After we’ve constructed our <code>FrameworkInfo</code>, we can create the <em>driver</em>, which is the component that actually communicates with Mesos.
The driver for the scheduler is an instance <a data-type="indexterm" data-primary="schedulers" data-secondary="SchedulerDriver" id="idp10034448"></a>of <code>SchedulerDriver</code>; you should stick with the <code>MesosSchedulerDriver</code> that is built with Mesos for now.
In the future, other implementations may be written in order to remove the dependencies on native code.
Unfortunately, the current projects working on this are more trouble than they’re worth for framework developers, as they haven’t reached stability yet.<sup><a data-type="noteref" id="idp10036688-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10036688" class="totri-footnote">2</a></sup>
The <code>SchedulerDriver</code> takes three arguments: an implementation of the Mesos <code>Scheduler</code> interface, the <code>FrameworkInfo</code>, and the address of the Mesos cluster.
At this point, when we call <code>start()</code>, our driver will connect to the Mesos cluster, register the framework, and begin receiving offers.
Usually, you’ll want to call <code>join()</code> at the end of your <code>main</code> function.
<code>join()</code> blocks until the driver terminates, either from having <code>stop()</code> called on it or because Mesos instructed the driver to stop because the framework failed over.</p>
<div data-type="tip"><h1>A Common Pattern for Starting the SchedulerDriver</h1>
<p>Often, the last thing our main function does is call <code>start()</code> followed by <code>join()</code>.
Because this is so common, you can just call <code>run()</code>, which is essentially <code>start() &amp;&amp; join()</code>.</p>
</div>

<p>Now that we’ve seen how frameworks start up, let’s look at <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#maketask_urb">Example&nbsp;4-3</a>.
This function is an example of how to create a Mesos task that we can launch.
As this is a useless framework, we hardcode what would normally be important parameters: the <code>cpus</code>, <code>mem</code>, and <code>command</code> we want to run.</p>
<div id="maketask_urb" data-type="example">
<h5><span class="label">Example 4-3. </span>makeTask of Useless Remote BASH</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">TaskInfo</code><code> </code><code class="nf">makeTask</code><code class="o">(</code><code class="n">SlaveID</code><code> </code><code class="n">targetSlave</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kt">double</code><code> </code><code class="n">cpus</code><code> </code><code class="o">=</code><code> </code><code class="mf">1.0</code><code class="o">;</code><code>
</code><code>    </code><code class="kt">double</code><code> </code><code class="n">mem</code><code> </code><code class="o">=</code><code> </code><code class="mf">100.0</code><code class="o">;</code><code>
</code><code>    </code><code class="n">String</code><code> </code><code class="n">command</code><code> </code><code class="o">=</code><code> </code><code class="s">"echo hello world"</code><code class="o">;</code><code>
</code><code>
</code><code>    </code><code class="n">UUID</code><code> </code><code class="n">uuid</code><code> </code><code class="o">=</code><code> </code><code class="n">UUID</code><code class="o">.</code><code class="na">randomUUID</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">TaskID</code><code> </code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">TaskID</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-1a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-1a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">uuid</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">TaskInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-2a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-2a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"useless_remote_bash.task "</code><code> </code><code class="o">+</code><code> </code><code class="n">id</code><code class="o">.</code><code class="na">getValue</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setTaskId</code><code class="o">(</code><code class="n">id</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">addResources</code><code class="o">(</code><code class="n">Resource</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-3a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>                </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"cpus"</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">SCALAR</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setScalar</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Scalar</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">cpus</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">addResources</code><code class="o">(</code><code class="n">Resource</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>                </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"mem"</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">SCALAR</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setScalar</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Scalar</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">mem</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setCommand</code><code class="o">(</code><code class="n">CommandInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">command</code><code class="o">)</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-4a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">setSlaveId</code><code class="o">(</code><code class="n">targetSlave</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-5a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-5a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-1a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-1a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>First, <a contenteditable="false" data-type="indexterm" data-primary="TaskID" id="idp10110576"></a>we make a <code>TaskID</code>.
The <code>TaskID</code> must be unique to the framework, just as the <code>ExecutorID</code> must be unique to the slave and the <code>SlaveID</code> must be unique to the cluster.
I typically find it easiest to just use UUIDs appended to any IDs I need to generate, since that way I don’t need to ever worry about the uniqueness constraints that Mesos requires.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-2a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-2a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Next, we make the <code>TaskInfo</code>, which is the protobuf that explains how to launch a task.
The <code>TaskInfo</code> <a contenteditable="false" data-type="indexterm" data-primary="TaskInfo" id="idp10089648"></a>requires you to set a name for the task.
This name is what’s displayed in the UI, and many Mesos tools can interact with it, such as the Mesos CLI.
Typically, you’ll want to set the name of the task to include useful specifying information, such as the framework name and any related entity (such as the app in Marathon or job in Hadoop).
By writing the name from most general (i.e., framework) to most specific (i.e., instance of the task), you’ll benefit from tools that can provide tab completion and autocompletion of the task names.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-3a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>A task wouldn’t be useful without any resources: <code>TaskInfo</code> is where you can add all of the resources that the task will consume.
The only two resources that you’ll always want to specify are <code>cpus</code> and <code>mem</code> (note the s at the end of <code>cpus</code>); if your application listens to the network, you should also specify <code>ports</code>.
There are many other resource types that Mesos can manage; you can read more about them in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#custom_resources_info">“Resources”</a>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-4a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Since this framework is very simple, we set the command so that the Mesos <code>CommandExecutor</code> <a contenteditable="false" data-type="indexterm" data-primary="CommandExecutor" id="idp10366080"></a>will handle the actual running of our task.
We specify our command to <a contenteditable="false" data-type="indexterm" data-primary="CommandInfo" id="idp10367344"></a>the <code>CommandInfo</code> that we provide as the command; its features are discussed in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#commandinfo_details">“CommandInfo”</a>.
For the <code>CommandExecutor</code>, the <code>TaskID</code> and the <code>ExecutorID</code> are the same.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-5a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-5a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>Finally, we must tie this <code>TaskInfo</code> to the offer.
Since it’s possible to apply several offers from the same slave to one task (pooling them for more total resources), we specify the <code>SlaveID</code> of the slave we want the task to launch on rather than the <code>OfferID</code>s that we want it to use.
When we actually call <code>launchTasks()</code>, that’s where we’ll link the offers to the <code>TaskInfo</code> (see the note <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#combining_offers_tip">Combining Offers</a> following <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#resource_offers_urb">Example&nbsp;4-5</a>).</p></dd>
</dl>
</div>

<p>We’ve managed to register our framework, and we’ve learned how to specify a task to launch.
The last step is to actually implement that pesky <code>Scheduler</code> interface.
For this super-basic framework, we’re going to ignore most of the callbacks, <a data-type="indexterm" data-primary="schedulers" data-secondary="callbacks" id="idp10378944"></a>as they update us on information we don’t want to react to.
Note that all of the callbacks provide you with a driver; this driver is guaranteed to be the same one you called <code>start()</code> on.
Mesos passes you this as a convenience, since it’s the only way to interact with the cluster, and that’s typically something you’d like to do in response to cluster events. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#logging_sched_cb_urb">Example&nbsp;4-4</a> shows the callbacks we want to log: <code>registered</code> and <code>statusUpdate</code>.</p>
<div id="logging_sched_cb_urb" data-type="example">
<h5><span class="label">Example 4-4. </span>Scheduler callbacks to log</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code> <code class="kt">void</code> <code class="nf">registered</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">FrameworkID</code> <code class="n">frameworkId</code><code class="o">,</code>
                               <code class="n">MasterInfo</code> <code class="n">masterInfo</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Registered with framework id "</code> <code class="o">+</code> <code class="n">frameworkId</code><code class="o">);</code>
<code class="o">}</code>

<code class="kd">public</code> <code class="kt">void</code> <code class="nf">statusUpdate</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">TaskStatus</code> <code class="n">status</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Got status update "</code><code class="o">+</code><code class="n">status</code><code class="o">);</code>
<code class="o">}</code></pre></div>

<p>When we have successfully registered with the Mesos masters, we’ll get the <code>registered</code> callback.
When you register a framework for the first time, you don’t specify the <code>FrameworkID</code>; instead, Mesos will assign it for you.
This callback is the only place to learn the assignment of <a data-type="indexterm" data-primary="FrameworkID" id="idp10445312"></a>the <code>FrameworkID</code>.
(In <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#storing_the_fid">Example&nbsp;4-15</a> and <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#using_stored_fid">Example&nbsp;4-14</a>, we’ll see how we can use this <code>FrameworkID</code> to safely fail a scheduler over to a new instance, so that we can build zero-downtime systems.)
The <code>MasterInfo</code> <a data-type="indexterm" data-primary="MasterInfo" id="idp10449040"></a>tells you which port and version the master is running on.
Frameworks can decide which Mesos features are valid to use based on the master’s version.</p>

<p>The <code>statusUpdate</code> <a data-type="indexterm" data-primary="status updates" id="idp10450768"></a>callback will soon become very important for our scheduler, as it’s how we track the lifecycle of our tasks: when they start running, and when and why they fail.
Even though we’re not going to do anything with this callback yet, it’s convenient to log when it happens, as that will help us debug our framework and confirm tasks that are actually launching and finishing.
Whenever I build a production framework, I always make sure to enable logging for every <code>statusUpdate</code> callback: those logs have helped me identify and debug issues countless times.</p>

<p>Finally, we get to look at the core of our new framework, as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#resource_offers_urb">Example&nbsp;4-5</a>.
This callback is how we receive offers from Mesos—offers that are chock-full of juicy resources that we can launch <a data-type="indexterm" data-primary="resourceOffers" id="idp10453872"></a>tasks on.</p>
<div id="resource_offers_urb" data-type="example">
<h5><span class="label">Example 4-5. </span>Implementation of resourceOffers</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">private</code><code> </code><code class="kt">boolean</code><code> </code><code class="n">submitted</code><code> </code><code class="o">=</code><code> </code><code class="kc">false</code><code class="o">;</code><code>
</code><code>
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">resourceOffers</code><code class="o">(</code><code class="n">SchedulerDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">java</code><code class="o">.</code><code class="na">util</code><code class="o">.</code><code class="na">List</code><code class="o">&lt;</code><code class="n">Offer</code><code class="o">&gt;</code><code> </code><code class="n">offers</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="k">this</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">submitted</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>            </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Offer</code><code> </code><code class="n">o</code><code> </code><code class="o">:</code><code> </code><code class="n">offers</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                </code><code class="n">driver</code><code class="o">.</code><code class="na">declineOffer</code><code class="o">(</code><code class="n">o</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>            </code><code class="k">return</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>        </code><code class="n">submitted</code><code> </code><code class="o">=</code><code> </code><code class="kc">true</code><code class="o">;</code><code>
</code><code>        </code><code class="n">Offer</code><code> </code><code class="n">offer</code><code> </code><code class="o">=</code><code> </code><code class="n">offers</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">TaskInfo</code><code> </code><code class="n">ti</code><code> </code><code class="o">=</code><code> </code><code class="n">makeTask</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getSlaveId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">launchTasks</code><code class="o">(</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO1-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO1-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>            </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">,</code><code>
</code><code>            </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">ti</code><code class="o">)</code><code>
</code><code>        </code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Launched offer: "</code><code> </code><code class="o">+</code><code> </code><code class="n">ti</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>In our framework, we first check if we’ve already submitted our task.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>If we have, we simply decline all the offers.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>If we haven’t submitted our task yet, we <a data-type="indexterm" data-primary="TaskInfo" id="idp10121408"></a>construct a <code>TaskInfo</code> for it with the ID of the slave from the first offer we received.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO1-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO1-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Then, we call <code>launchTasks</code> <a data-type="indexterm" data-primary="launchTasks" id="idp10105696"></a>to attempt to launch the task!</p></dd>
</dl>
<div data-type="tip" id="combining_offers_tip"><h1>Combining Offers</h1>
<p><code>launchTasks</code> takes a list of offers, which allows us to combine several offers for the same slave in order to pool those offers’ resources.
It also takes a list of tasks, so that you can launch as many tasks as fit on the given offers.
Note that all the tasks and offers must be for the same slave—the <code>launchTasks</code> will fail if they’re not.
If you want to launch tasks on multiple slaves, simply call <code>launchTasks</code> multiple times.</p>
</div>

<p>The other <code>Scheduler</code> callbacks, listed in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#noop_cb_urb">Example&nbsp;4-6</a>, can all be ignored for now.</p>
<div id="noop_cb_urb" data-type="example">
<h5><span class="label">Example 4-6. </span>Ignored callbacks for Useless Remote BASH</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code> <code class="kt">void</code> <code class="nf">disconnected</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">error</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">String</code> <code class="n">message</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">executorLost</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">ExecutorID</code> <code class="n">executorId</code><code class="o">,</code>
                             <code class="n">SlaveID</code> <code class="n">slaveId</code><code class="o">,</code> <code class="kt">int</code> <code class="n">status</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">frameworkMessage</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">ExecutorID</code> <code class="n">executorId</code><code class="o">,</code>
                                 <code class="n">SlaveID</code> <code class="n">slaveId</code><code class="o">,</code> <code class="kt">byte</code><code class="o">[]</code> <code class="n">data</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">offerRescinded</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">OfferID</code> <code class="n">offerId</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">reregistered</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">MasterInfo</code> <code class="n">masterInfo</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">slaveLost</code><code class="o">(</code><code class="n">SchedulerDriver</code> <code class="n">driver</code><code class="o">,</code> <code class="n">SlaveID</code> <code class="n">slaveId</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code></pre></div>

<p>And there you have it!
You’ve written your first Mesos framework, and it actually does quite a lot.
It can register with the master, create a <code>TaskInfo</code> to express how to launch a task, log status updates, and accept an offer to launch the task.</p>
<div data-type="warning" epub:type="warning" id="executorLost_is_lol"><h1>executorLost Doesn’t Do Anything</h1>
<p>Unfortunately, there’s one scheduler callback that isn’t actually implemented or supported by <a data-type="indexterm" data-primary="executorLost" id="idp10774176"></a>Mesos: <code>executorLost</code>.
If you’d like to be notified about when an executor shuts down, we discuss a solution in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#canary_tasks">“Canary tasks”</a>.
This issue is being pursued in <a href="http://bit.ly/MESOS313">MESOS-313</a>, so future versions of Mesos will implement this callback.</p>
</div>

<p>This Framework actually has two problematic bugs: when it accepts the offer to launch a task, it fails to check if the offer is actually big enough.
If the offer was too small, we’ll get <a data-type="indexterm" data-primary="TASK_LOST" id="idp10777776"></a>a <code>TASK_LOST</code> status update about the task, rather than anything indicating success.
The other bug is that when it accepts the offer, it doesn’t decline the other offers that were potentially received <a data-type="indexterm" data-primary="resourceOffers" id="idp10779232"></a>in the <code>resourceOffers</code> callback.
Those other offers will be stuck in a limbo state until they expire, which could be several minutes (or forever, if you didn’t change the default).
They’ll be unavailable to other frameworks in the meantime.</p>

<p>In the coming sections, we’ll improve <code>resourceOffers</code> to fix <a data-type="indexterm" data-primary="framework design" data-secondary="minimal code for task launch" data-startref="fd4mcftl" id="idp10781552"></a>these issues.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Implementing a Basic Job Processor"><div class="sect1" id="idp9870448">
<h1>Implementing a Basic Job Processor</h1>

<p>Now, <a data-type="indexterm" data-primary="schedulers" data-secondary="job implementation" id="s4ji"></a><a data-type="indexterm" data-primary="job implementation" id="ji4"></a>let’s extend our framework to be more useful by reading a list of jobs from a JSON file, and then having it launch all of those jobs on Mesos.
We’ll start by looking at how we’ll model a job (<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#implementation_of_job">Example&nbsp;4-7</a>).</p>
<div id="implementation_of_job" data-type="example">
<h5><span class="label">Example 4-7. </span>Job implementation</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">Job</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="kt">double</code><code> </code><code class="n">cpus</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-1b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-1b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="kt">double</code><code> </code><code class="n">mem</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-1b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="n">String</code><code> </code><code class="n">command</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-1b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="kt">boolean</code><code> </code><code class="n">submitted</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-2b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-2b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="nf">Job</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">submitted</code><code> </code><code class="o">=</code><code> </code><code class="kc">false</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">TaskInfo</code><code> </code><code class="nf">makeTask</code><code class="o">(</code><code class="n">SlaveID</code><code> </code><code class="n">targetSlave</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-3b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-3b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="n">UUID</code><code> </code><code class="n">uuid</code><code> </code><code class="o">=</code><code> </code><code class="n">UUID</code><code class="o">.</code><code class="na">randomUUID</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">TaskID</code><code> </code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">TaskID</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">uuid</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">TaskInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"task "</code><code> </code><code class="o">+</code><code> </code><code class="n">id</code><code class="o">.</code><code class="na">getValue</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setTaskId</code><code class="o">(</code><code class="n">id</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">addResources</code><code class="o">(</code><code class="n">Resource</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"cpus"</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">SCALAR</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setScalar</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Scalar</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">cpus</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">addResources</code><code class="o">(</code><code class="n">Resource</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"mem"</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">SCALAR</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setScalar</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Scalar</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">mem</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setSlaveId</code><code class="o">(</code><code class="n">targetSlave</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setCommand</code><code class="o">(</code><code class="n">CommandInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">command</code><code class="o">)</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Job</code><code> </code><code class="nf">fromJSON</code><code class="o">(</code><code class="n">JSONObject</code><code> </code><code class="n">obj</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">JSONException</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-4b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-4b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>        </code><code class="n">Job</code><code> </code><code class="n">job</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Job</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">job</code><code class="o">.</code><code class="na">cpus</code><code> </code><code class="o">=</code><code> </code><code class="n">obj</code><code class="o">.</code><code class="na">getDouble</code><code class="o">(</code><code class="s">"cpus"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">job</code><code class="o">.</code><code class="na">mem</code><code> </code><code class="o">=</code><code> </code><code class="n">obj</code><code class="o">.</code><code class="na">getDouble</code><code class="o">(</code><code class="s">"mem"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">job</code><code class="o">.</code><code class="na">command</code><code> </code><code class="o">=</code><code> </code><code class="n">obj</code><code class="o">.</code><code class="na">getString</code><code class="o">(</code><code class="s">"command"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">job</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="c1">// ... snip ... </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-5b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-5b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code class="c1">
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-1b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-1b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>As you can see, we have parameterized the CPU, memory, and command arguments.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-2b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-2b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We’ve moved the <code>submitted</code> field into the <code>Job</code>, so that we can track its lifecycle.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-3b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-3b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We’ve moved the <code>makeTask</code> function into the <code>Job</code> as well, so that it can access all the local fields of the <code>Job</code>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-4b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-4b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>For convenience, we’ve defined a single way to construct a <code>Job</code>, via the factory method <code>fromJSON</code>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-5b" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-5b"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>I’ve left out the getter and setter definitions.</p></dd>
</dl>
</div>

<p>The <code>Job</code> is a container for information about a particular job, like a model class in MVC.
We’ve only added two special methods: <code>fromJSON</code>, which gives us a way to construct the <code>Job</code> with valid starting state, and <code>makeTask</code>, which gives us a way to easily turn it into a <code>TaskInfo</code> without having all the protobuf munging code in our scheduler class.</p>

<p>Next, let’s look at how our <code>main</code> function has evolved. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#revised_main_for_useless_Remote">Example&nbsp;4-8</a> shows the revised version.</p>
<div id="revised_main_for_useless_Remote" data-type="example">
<h5><span class="label">Example 4-8. </span>Revised main for Useless Remote BASH</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">main</code><code class="o">(</code><code class="n">String</code><code> </code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code> </code><code class="n">args</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">Exception</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">Files</code><code class="o">.</code><code class="na">readAllBytes</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">args</code><code class="o">[</code><code class="mi">1</code><code class="o">]</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="n">JSONObject</code><code> </code><code class="n">config</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">JSONObject</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">String</code><code class="o">(</code><code class="n">data</code><code class="o">,</code><code> </code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>    </code><code class="n">JSONArray</code><code> </code><code class="n">jobsArray</code><code> </code><code class="o">=</code><code> </code><code class="n">config</code><code class="o">.</code><code class="na">getJSONArray</code><code class="o">(</code><code class="s">"jobs"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Job</code><code class="o">&gt;</code><code> </code><code class="n">jobs</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code> </code><code class="n">i</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">jobsArray</code><code class="o">.</code><code class="na">length</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><code class="n">i</code><code class="o">+</code><code class="o">+</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="n">jobs</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">Job</code><code class="o">.</code><code class="na">fromJSON</code><code class="o">(</code><code class="n">jobsArray</code><code class="o">.</code><code class="na">getJSONObject</code><code class="o">(</code><code class="n">i</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">jobs</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code>    </code><code class="c1">// Below here, the function remains almost as before
</code><code>    </code><code class="n">FrameworkInfo</code><code> </code><code class="n">frameworkInfo</code><code> </code><code class="o">=</code><code> </code><code class="n">FrameworkInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setUser</code><code class="o">(</code><code class="s">""</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"Useless Remote BASH"</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code>    </code><code class="n">Scheduler</code><code> </code><code class="n">mySched</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">UselessRemoteBASH</code><code class="o">(</code><code class="n">jobs</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>    </code><code class="n">SchedulerDriver</code><code> </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">MesosSchedulerDriver</code><code class="o">(</code><code>
</code><code>        </code><code class="n">mySched</code><code class="o">,</code><code>
</code><code>        </code><code class="n">frameworkInfo</code><code class="o">,</code><code>
</code><code>        </code><code class="s">"zk://"</code><code> </code><code class="o">+</code><code> </code><code class="n">args</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code> </code><code class="o">+</code><code> </code><code class="s">"/mesos"</code><code>
</code><code>    </code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">join</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>This allows us to read the entire contents of a file into memory. We assume that the first argument is still the Mesos cluster, and the second argument is the name of a file that contains the JSON configuration.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We convert the byte array to JSON in this step, so that we can extract the <code>Job</code> configurations.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Finally, we loop over the JSON job descriptors, processing them into <code>Job</code>s.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>This time, we pass an argument to our <code>Scheduler</code>: the jobs we want it to launch.</p></dd>
</dl>

<p class="pagebreak-before">Let’s take a look at a sample <a data-type="indexterm" data-primary="JSON" id="idp11656656"></a>JSON file of jobs, to get a feel for the schema:</p>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code>
    </code><code class="nt">"jobs"</code><code class="p">:</code><code> </code><code class="p">[</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
        </code><code class="p">{</code><code>
            </code><code class="nt">"cpus"</code><code class="p">:</code><code> </code><code class="mf">0.5</code><code class="p">,</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
            </code><code class="nt">"mem"</code><code class="p">:</code><code> </code><code class="mi">100</code><code class="p">,</code><code>
            </code><code class="nt">"command"</code><code class="p">:</code><code> </code><code class="s2">"sleep 60; echo hello world"</code><code>
        </code><code class="p">}</code><code>
    </code><code class="p">]</code><code>
</code><code class="p">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>The JSON file should contain a JSON object with a single key, <code>jobs</code>. That key’s value should be a list of <code>Job</code> objects.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Each job object has three properties: <code>cpus</code>, <code>mem</code>, and <code>command</code>, which correspond to the eponymous fields in the <code>Job</code> class.</p></dd>
</dl>

<p>Now that we can load jobs up, let’s see how we <a data-type="indexterm" data-primary="offers" data-secondary="resourceOffers" id="o4ro"></a><a data-type="indexterm" data-primary="resourceOffers" id="ro4"></a>evolved <code>resourceOffers</code>. The new version is shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#revised_implementation_of_resourceoffers">Example&nbsp;4-9</a>.</p>
<div id="revised_implementation_of_resourceoffers" data-type="example">
<h5><span class="label">Example 4-9. </span>Revised implementation of resourceOffers</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">resourceOffers</code><code class="o">(</code><code class="n">SchedulerDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">java</code><code class="o">.</code><code class="na">util</code><code class="o">.</code><code class="na">List</code><code class="o">&lt;</code><code class="n">Offer</code><code class="o">&gt;</code><code> </code><code class="n">offers</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Job</code><code class="o">&gt;</code><code> </code><code class="n">pendingJobs</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Job</code><code> </code><code class="n">j</code><code> </code><code class="o">:</code><code> </code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="o">(</code><code class="o">!</code><code class="n">j</code><code class="o">.</code><code class="na">isSubmitted</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>                </code><code class="n">pendingJobs</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">j</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>        </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Offer</code><code> </code><code class="n">o</code><code> </code><code class="o">:</code><code> </code><code class="n">offers</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO4-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO4-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">pendingJobs</code><code class="o">.</code><code class="na">isEmpty</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO4-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO4-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>                </code><code class="n">driver</code><code class="o">.</code><code class="na">declineOffer</code><code class="o">(</code><code class="n">o</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>                </code><code class="k">break</code><code class="o">;</code><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>            </code><code class="n">Job</code><code> </code><code class="n">j</code><code> </code><code class="o">=</code><code> </code><code class="n">pendingJobs</code><code class="o">.</code><code class="na">remove</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO4-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO4-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>            </code><code class="n">TaskInfo</code><code> </code><code class="n">ti</code><code> </code><code class="o">=</code><code> </code><code class="n">j</code><code class="o">.</code><code class="na">makeTask</code><code class="o">(</code><code class="n">o</code><code class="o">.</code><code class="na">getSlaveId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="n">driver</code><code class="o">.</code><code class="na">launchTasks</code><code class="o">(</code><code>
</code><code>                </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">o</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">,</code><code>
</code><code>                </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">ti</code><code class="o">)</code><code>
</code><code>            </code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="n">j</code><code class="o">.</code><code class="na">setSubmitted</code><code class="o">(</code><code class="kc">true</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO4-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO4-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Because our <code>Job</code>s contain state information (i.e., whether or not they were just launched), we need to first calculate which jobs haven’t yet been launched.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>This loop allows us to find all the jobs that haven’t been submitted yet, and add them to <code>pendingJobs</code>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO4-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO4-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Now, we’re going to try to match jobs to offers.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO4-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO4-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>If we have no more jobs we want to launch, then we can decline the offer.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO4-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO4-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>If we reach this line, we have a job to launch. From here on, the code is similar to our first incarnation.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO4-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO4-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>Remember that we want to mark the job as submitted, or else we could accidentally double-submit the job.</p></dd>
</dl>

<p>This version of <code>resourceOffers</code> shows us several useful patterns.
Every framework needs to keep track of the running tasks and work that it wants to do in the future.
For most frameworks, it will be most convenient to have a single data structure that tracks all ongoing work.
This data structure will include both running and pending tasks.
Of course, when you actually want to launch a task, you’ll need to calculate the specific set of tasks that are still pending.
In this example, after each resource offer, we compute the set of pending tasks.
Later in this chapter, we’ll look at other architectures for tracking this information.</p>

<p>The other pattern that every framework uses is looping over all the offers, matching offers to pending work until one or the other is exhausted.
But you might be thinking: <code>resourceOffers</code> requires a lot of care, and this framework still fails to handle it effectively!
You’d be absolutely correct, which is why we’re going to look at how to fix that problem <a data-type="indexterm" data-primary="offers" data-secondary="resourceOffers" data-startref="o4ro" id="idp10822400"></a><a data-type="indexterm" data-primary="resourceOffers" data-startref="ro4" id="idp11288752"></a><a data-type="indexterm" data-primary="schedulers" data-secondary="job implementation" data-startref="s4ji" id="idp11289696"></a><a data-type="indexterm" data-primary="job implementation" data-startref="ji4" id="idp11290912"></a>now.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Matching Tasks to Offers"><div class="sect1" id="idp10783184">
<h1>Matching Tasks to Offers</h1>

<p>As <a data-type="indexterm" data-primary="schedulers" data-secondary="matching tasks to offers" id="s4mtto"></a><a data-type="indexterm" data-primary="tasks" data-secondary="matching to offers" id="t4mto"></a><a data-type="indexterm" data-primary="offers" data-secondary="assigning tasks to" id="o4att"></a>we’ve been alluding to throughout this chapter, the assignment of tasks to offers is fraught with details that must be attended to.
For instance, we must ensure that the offer has all the necessary resources for our job, we must attempt to launch as many tasks as we can on each offer, and we must prioritize which task we’ll launch next.
The reason we want to match as many tasks as possible to each offer is that if we only match one task per offer, our scheduler will launch tasks at a slow rate. Specifically:</p>
<div data-type="equation">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/eq_1.png" alt="tasks launched per minute equals StartFraction number of slaves Over offer interval EndFraction" width="1229" height="100" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/eq_1.png">
</div>

<p>With the default offer interval of 1 second, if you have a five-slave cluster, you’ll only be able to launch at most 60 tasks per minute.
With properly implemented offer handling code, however, you could launch tens of thousands of tasks per minute!
For our example, we’re going to implement the first fit algorithm, since it requires very little code.
Then, we’ll learn about other algorithms, and various considerations therein. Let’s make the following change to our <code>resourceOffers</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="o">...</code> <code class="c1">// code unchanged</code>
<code class="n">driver</code><code class="o">.</code><code class="na">launchTasks</code><code class="o">(</code>
    <code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">o</code><code class="o">.</code><code class="na">getId</code><code class="o">()),</code>
    <code class="n">doFirstFit</code><code class="o">(</code><code class="n">o</code><code class="o">,</code> <code class="n">pendingJobs</code><code class="o">);</code>
<code class="o">);</code>
<code class="o">...</code> <code class="c1">// code unchanged</code></pre>

<p>Instead of directly taking a job, we’re going to compute the first fit of all the pending jobs to the given offer. The solution we find is a <code>List</code> of tasks, since the whole point is that we can launch multiple tasks on a single <a data-type="indexterm" data-primary="doFirstFit" id="dff4"></a><a data-type="indexterm" data-primary="first fit" id="ff4"></a>offer.</p>
<div data-type="tip" id="dofirstfit_semantics"><h1>doFirstFit’s Semantics</h1>
<p><code>doFirstFit</code> takes an <code>Offer</code> and a list of <code>Job</code>s and returns a list of <code>TaskInfo</code>s that we can launch on the cluster.
Note that <code>doFirstFit</code> is designed to remove all the <code>Job</code>s that it decides to match from the list of <code>Job</code>s passed into it.</p>
</div>

<p>Obviously, the interesting part is the implementation of <code>doFirstFit</code> (<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#first_fit_offer_packing">Example&nbsp;4-10</a>).
The idea of first fit is this: given the amount of space available in an offer, we’ll add tasks that fit in whatever space is left in the offer.
When we decide to add a task, we’ll deduct its space usage from the remaining space.
Once we can’t fit any more tasks into the offer, we’ll remove all the matched <code>Job</code>s from the list of <code>Job</code> provided as an argument, and we’ll return the <code>TaskInfo</code>s that will launch those <code>Job</code>s.</p>
<div id="first_fit_offer_packing" data-type="example">
<h5><span class="label">Example 4-10. </span>First-fit offer packing</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="n">List</code><code class="o">&lt;</code><code class="n">TaskInfo</code><code class="o">&gt;</code><code> </code><code class="nf">doFirstFit</code><code class="o">(</code><code class="n">Offer</code><code> </code><code class="n">offer</code><code class="o">,</code><code> </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Job</code><code class="o">&gt;</code><code> </code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">TaskInfo</code><code class="o">&gt;</code><code> </code><code class="n">toLaunch</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Job</code><code class="o">&gt;</code><code> </code><code class="n">launchedJobs</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="kt">double</code><code> </code><code class="n">offerCpus</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO5-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO5-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kt">double</code><code> </code><code class="n">offerMem</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code>
</code><code>    </code><code class="c1">// We always need to extract the resource info from the offer.
</code><code>    </code><code class="c1">// It's a bit annoying in every language.
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Resource</code><code> </code><code class="n">r</code><code> </code><code class="o">:</code><code> </code><code class="n">offer</code><code class="o">.</code><code class="na">getResourcesList</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO5-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO5-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">r</code><code class="o">.</code><code class="na">getName</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">equals</code><code class="o">(</code><code class="s">"cpus"</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">offerCpus</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="n">r</code><code class="o">.</code><code class="na">getScalar</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getValue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code> </code><code class="k">else</code><code> </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">r</code><code class="o">.</code><code class="na">getName</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">equals</code><code class="o">(</code><code class="s">"mem"</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">offerMem</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="n">r</code><code class="o">.</code><code class="na">getScalar</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getValue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="c1">// Now, we will pack jobs into the offer
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Job</code><code> </code><code class="n">j</code><code> </code><code class="o">:</code><code> </code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="kt">double</code><code> </code><code class="n">jobCpus</code><code> </code><code class="o">=</code><code> </code><code class="n">j</code><code class="o">.</code><code class="na">getCpus</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="kt">double</code><code> </code><code class="n">jobMem</code><code> </code><code class="o">=</code><code> </code><code class="n">j</code><code class="o">.</code><code class="na">getMem</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">jobCpus</code><code> </code><code class="o">&lt;</code><code class="o">=</code><code> </code><code class="n">offerCpus</code><code> </code><code class="o">&amp;</code><code class="o">&amp;</code><code> </code><code class="n">jobMem</code><code> </code><code class="o">&lt;</code><code class="o">=</code><code> </code><code class="n">offerMem</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO5-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO5-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>            </code><code class="n">offerCpus</code><code> </code><code class="o">-</code><code class="o">=</code><code> </code><code class="n">jobCpus</code><code class="o">;</code><code>
</code><code>            </code><code class="n">offerMem</code><code> </code><code class="o">-</code><code class="o">=</code><code> </code><code class="n">jobMem</code><code class="o">;</code><code>
</code><code>            </code><code class="n">toLaunch</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">j</code><code class="o">.</code><code class="na">makeTask</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getSlaveId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="n">j</code><code class="o">.</code><code class="na">setSubmitted</code><code class="o">(</code><code class="kc">true</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="n">launchedJobs</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">j</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO5-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO5-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Job</code><code> </code><code class="n">j</code><code> </code><code class="o">:</code><code> </code><code class="n">launchedJobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">j</code><code class="o">.</code><code class="na">launch</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO5-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO5-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="n">jobs</code><code class="o">.</code><code class="na">removeAll</code><code class="o">(</code><code class="n">launchedJobs</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">toLaunch</code><code class="o">;</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO5-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO5-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We’ll keep track of how many resources are remaining in the offer in these variables.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO5-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO5-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>You must iterate over all the resources in the offer to find the ones whose names match the type of resource you care about, and only then can you extract the value. The reason this cannot be a map is that you can receive multiple resources of the same name; for example, you could receive both reserved and unreserved memory resources from a slave.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO5-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO5-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Here, we check to see if the offer still has enough resources remaining to launch our task. If it does, we’ll deduct those resources from our method’s internal count, add the <code>TaskInfo</code> to the list of tasks we will launch, and mark the job as submitted.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO5-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO5-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>In order to support <code>doFirstFit</code> semantics, we add all jobs we’ll launch to a list, so that we can remove all those elements from the original list of all pending jobs.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO5-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO5-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p><code>Job</code> has methods that help us track its instances’ progress through their state machine. We’ll go over this in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#expanded_job_listing">Example&nbsp;4-11</a>.</p></dd>
</dl>

<p>First fit is usually the best algorithm to use when matching tasks to offers.
You might think that this won’t always utilize offers as efficiently as if you put more work into trying to optimize matching the offers.
That’s absolutely true, but consider the following:
a cluster either has sufficient or insufficient resources for launching every pending task.
If there are plenty of resources, then first fit should always be able to launch every task.
If, on the other hand, there are not enough resources, nothing would be able to launch every task. Thus, it’s a good idea to write code to choose which task to run next, so that you can maintain the target <a data-type="indexterm" data-primary="doFirstFit" data-startref="dff4" id="idp12154224"></a><a data-type="indexterm" data-primary="first fit" data-startref="ff4" id="idp12155200"></a>quality of service.
Only if there are just barely enough resources does more sophisticated packing begin to make sense.
Unfortunately for us, this problem—known more generally as <a data-type="indexterm" data-primary="knapsack problem" id="idp12156464"></a>the <em>knapsack problem</em>—is a notorious NP-complete problem.
NP-complete problems are those problems for which it can be proved that an optimal solution will take an extremely long time to find, and there’s not a clever trick in existence to solve the problem faster.<sup><a data-type="noteref" id="idp12148944-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12148944" class="totri-footnote">3</a></sup></p>

<p>Actually, the situation isn’t so bad.
In fact, although it’s impossible to solve the packing problem <em>perfectly</em> and quickly, there are several techniques that give “good enough” results and aren’t too tricky to implement.
For some frameworks, all tasks will be bottlenecked on a single resource: either CPUs (for compute-bound workloads, like data analysis) or memory (i.e., caches like memcached or Redis).
As a result, when we try to pack our resources, we can simplify the packing problem to a single dimension: the most constrained dimension.
Once we’ve done this, we can use techniques such as the fully polynomial time greedy approximation scheme for the 0/1 knapsack problem.<sup><a data-type="noteref" id="idp12151712-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12151712" class="totri-footnote">4</a></sup></p>








<section data-type="sect2" data-pdf-bookmark="Bridging the Semantic Gap Between Offers and Jobs"><div class="sect2" id="idp12075968">
<h2>Bridging the Semantic Gap Between Offers and Jobs</h2>

<p>Now, we’ve got a pretty cool framework.
It takes a JSON configuration file filled with the jobs we want to run, and it submits those jobs to the Mesos cluster efficiently.
We have a problem, though—what if a job fails?
At the moment, we’ll just see a bit of output in the terminal indicating that the task failed, succeeded, or was lost.
We want to add support for retries: when a job fails, we’ll resubmit it in the hope that it will succeed this time.
Eventually, however, we’ll give up and consider it truly failed.
To this end, we’re going to expand our <code>Job</code> class so that instead of simply having a Boolean property <code>submitted</code>, it will <a data-type="indexterm" data-primary="job states" id="js4"></a>have a <code>JobState</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code> <code class="kd">enum</code> <code class="n">JobState</code> <code class="o">{</code>
    <code class="n">PENDING</code><code class="o">,</code>
    <code class="n">STAGING</code><code class="o">,</code>
    <code class="n">RUNNING</code><code class="o">,</code>
    <code class="n">SUCCESSFUL</code><code class="o">,</code>
    <code class="n">FAILED</code>
<code class="o">}</code></pre>

<p>We need to increase the number of states a job can be in in order to support retries.
Before, we would simply launch unsubmitted jobs.
Now, we’ll need to track the exact part of the task lifecycle a job is in, and resubmit it only if it has already failed.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#valid_transitions_of_jobstate">Figure&nbsp;4-4</a> illustrates the valid state transitions.</p>

<figure><div id="valid_transitions_of_jobstate" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0404.png" alt="Valid Transitions of JobState" width="1245" height="348" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0404.png">
<h6><span class="label">Figure 4-4. </span>Valid transitions of JobState</h6>
</div></figure>

<p>We’ll also have to expand the <code>Job</code> class to internally keep track of retries and the job’s state. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#expanded_job_listing">Example&nbsp;4-11</a> shows the new methods that will implement the preceding state transition diagram.</p>
<div id="expanded_job_listing" data-type="example">
<h5><span class="label">Example 4-11. </span>State transition methods for Job</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Job</code> <code class="o">{</code>
    <code class="c1">// previous fields elided</code>
    <code class="kd">private</code> <code class="kt">int</code> <code class="n">retries</code><code class="o">;</code>

    <code class="kd">private</code> <code class="nf">Job</code><code class="o">()</code> <code class="o">{</code>
        <code class="n">status</code> <code class="o">=</code> <code class="n">JobState</code><code class="o">.</code><code class="na">PENDING</code><code class="o">;</code>
        <code class="n">id</code> <code class="o">=</code> <code class="n">UUID</code><code class="o">.</code><code class="na">randomUUID</code><code class="o">().</code><code class="na">toString</code><code class="o">();</code>
        <code class="n">retries</code> <code class="o">=</code> <code class="mi">3</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">launch</code><code class="o">()</code> <code class="o">{</code>
        <code class="n">status</code> <code class="o">=</code> <code class="n">JobState</code><code class="o">.</code><code class="na">STAGING</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">started</code><code class="o">()</code> <code class="o">{</code>
        <code class="n">status</code> <code class="o">=</code> <code class="n">JobState</code><code class="o">.</code><code class="na">RUNNING</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">succeed</code><code class="o">()</code> <code class="o">{</code>
        <code class="n">status</code> <code class="o">=</code> <code class="n">JobState</code><code class="o">.</code><code class="na">SUCCESSFUL</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">fail</code><code class="o">()</code> <code class="o">{</code>
        <code class="k">if</code> <code class="o">(</code><code class="n">retries</code> <code class="o">==</code> <code class="mi">0</code><code class="o">)</code> <code class="o">{</code>
            <code class="n">status</code> <code class="o">=</code> <code class="n">JobState</code><code class="o">.</code><code class="na">FAILED</code><code class="o">;</code>
        <code class="o">}</code> <code class="k">else</code> <code class="o">{</code>
            <code class="n">retries</code><code class="o">--;</code>
            <code class="n">status</code> <code class="o">=</code> <code class="n">JobState</code><code class="o">.</code><code class="na">PENDING</code><code class="o">;</code>
        <code class="o">}</code>
    <code class="o">}</code>
<code class="o">}</code></pre></div>

<p>We’ve decided to give every job three retries.
To simplify the implementation of the state changes of the job, we have four functions to move between states: <code>launch()</code>, <code>started()</code>, <code>succeed()</code>, and <code>fail()</code>.
These functions will be called, respectively, when we submit the task to Mesos, when it starts, and when it succeeds or fails. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#enhanced_statusupdate_handler">Example&nbsp;4-12</a> shows how we move between states.</p>
<div data-type="example" id="enhanced_statusupdate_handler">
<h5><span class="label">Example 4-12. </span>Enhanced statusUpdate handler</h5>
<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">statusUpdate</code><code class="o">(</code><code class="n">SchedulerDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">TaskStatus</code><code> </code><code class="n">status</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="c1">// We'll see if we can find a job this corresponds to
</code><code>        </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Job</code><code> </code><code class="n">j</code><code> </code><code class="o">:</code><code> </code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-1d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-1d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">j</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">equals</code><code class="o">(</code><code class="n">status</code><code class="o">.</code><code class="na">getTaskId</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getValue</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-1d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>                </code><code class="k">switch</code><code> </code><code class="o">(</code><code class="n">status</code><code class="o">.</code><code class="na">getState</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>                    </code><code class="k">case</code><code> </code><code class="nl">TASK_RUNNING:</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-2d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-2d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                        </code><code class="n">j</code><code class="o">.</code><code class="na">started</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>                        </code><code class="k">break</code><code class="o">;</code><code>
</code><code>                    </code><code class="k">case</code><code> </code><code class="nl">TASK_FINISHED:</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-3d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-3d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>                        </code><code class="n">j</code><code class="o">.</code><code class="na">succeed</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>                        </code><code class="k">break</code><code class="o">;</code><code>
</code><code>                    </code><code class="k">case</code><code> </code><code class="nl">TASK_FAILED:</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-4d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-4d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>                    </code><code class="k">case</code><code> </code><code class="nl">TASK_KILLED:</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-5d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-5d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>                    </code><code class="k">case</code><code> </code><code class="nl">TASK_LOST:</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-6d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-6d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>                    </code><code class="k">case</code><code> </code><code class="nl">TASK_ERROR:</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-7d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-7d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code>                        </code><code class="n">j</code><code class="o">.</code><code class="na">fail</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>                        </code><code class="k">break</code><code class="o">;</code><code>
</code><code>                    </code><code class="k">default</code><code class="o">:</code><code>
</code><code>                        </code><code class="k">break</code><code class="o">;</code><code>
</code><code>                </code><code class="o">}</code><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-1d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-1d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Typically, one should store a mapping between the <code>TaskID</code> and the <code>Job</code>, rather than doing a linear search.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-2d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-2d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>This <a contenteditable="false" data-type="indexterm" data-primary="tasks" data-secondary="statuses" id="idp12808560"></a>task status, <em>running</em>, means that we’ve received confirmation that the task was successfully started by the slave.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-3d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-3d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>A <em>finished</em> task is one that completed without reporting any kind of error.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-4d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-4d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p><em>Failed</em> tasks are those that did not complete successfully, and whose termination was initiated through a normal codepath by the task itself. For example, if a task that is supposed to download a file wasn’t able to do so, it should report its status as failed.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-5d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-5d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p><em>Killed</em> tasks are those that did not complete successfully because the scheduler told them to stop. When a scheduler performs preemption or allows a user to request the early termination of a task, that task should report the status killed.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-6d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-6d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>When a task is <em>lost</em>, that means that an unexpected error occurred. That could be due to the slave unexpectedly going offline, or an executor that exited before it sent a <code>TASK_FINISHED</code>, <code>TASK_KILLED</code>, or <code>TASK_KILLED</code> message.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-7d" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-7d"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>This is a very rare case, indicating a problem with the task descriptor itself. You can look in the <code>TaskStatus</code>’s <code>message</code> field for <a contenteditable="false" data-type="indexterm" data-primary="tasks" data-secondary="matching to offers" data-startref="t4mto" id="idp12839248"></a><a contenteditable="false" data-type="indexterm" data-primary="schedulers" data-secondary="matching tasks to offers" data-startref="s4mtto" id="idp12840704"></a><a contenteditable="false" data-type="indexterm" data-primary="offers" data-secondary="assigning tasks to" data-startref="o4att" id="idp12842160"></a>details.</p></dd>
</dl>
</div>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Adding High Availability"><div class="sect1" id="scheduler_ha">
<h1>Adding High Availability</h1>

<p>At <a data-type="indexterm" data-primary="job states" data-startref="js4" id="idp12845952"></a><a data-type="indexterm" data-primary="schedulers" data-secondary="adding high availability" id="s4aha"></a><a data-type="indexterm" data-primary="high availability" id="ha4"></a>this point, our scheduler-only framework is nearly feature-complete.
We are loading jobs from configuration files, launching them on Mesos, and automatically restarting them when they fail.
Now it’s time to add the final feature: high availability.</p>

<p>High availability means that when the scheduler process fails, the framework as a whole continues to run.
This is accomplished via the cooperation of three subfeatures:</p>
<ol>
<li>
<p>The scheduler will use leader election so that we can run multiple instances and have a fallback instance automatically take over when the current leader fails.</p>
</li>
<li>
<p>The scheduler must synchronize its state to shared, distributed storage, so that the newly elected leader can pick up where the last one left off.</p>
</li>
<li>
<p>The scheduler must opt into a few Mesos features that will ensure that running tasks are unaffected by scheduler failure.</p>
</li>

</ol>

<p>For this example, we’re going to use <a data-type="indexterm" data-primary="ZooKeeper" id="idp12853376"></a>ZooKeeper to provide our leader election and distributed storage, since Mesos clusters usually<sup><a data-type="noteref" id="idp12854224-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12854224" class="totri-footnote">5</a></sup> come with a ZooKeeper cluster.
Furthermore, we’re going to use <a data-type="indexterm" data-primary="Apache Curator" id="idp12855600"></a><a data-type="indexterm" data-primary="Curator" id="idp12856208"></a>the <a href="http://curator.apache.org/">Apache Curator</a> library to interact with ZooKeeper, since it handles many of the challenges of the included ZooKeeper API.<sup><a data-type="noteref" id="idp12857696-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12857696" class="totri-footnote">6</a></sup> Since this isn’t meant to be a production-quality framework, we’ll hardcode all our framework’s data to reside under the <code>/sampleframework</code> path in ZooKeeper.
For production-quality frameworks, you should make the location of all data configurable in ZooKeeper. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#simple_leader_election">Example&nbsp;4-13</a> shows how we add basic <a data-type="indexterm" data-primary="leader election" id="le4"></a>leader election to our <code>main</code> function.</p>
<div id="simple_leader_election" data-type="example">
<h5><span class="label">Example 4-13. </span>Simple leader election</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">main</code><code class="o">(</code><code class="n">String</code><code> </code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code> </code><code class="n">args</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">Exception</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">CuratorFramework</code><code> </code><code class="n">curator</code><code> </code><code class="o">=</code><code> </code><code class="n">CuratorFrameworkFactory</code><code class="o">.</code><code class="na">newClient</code><code class="o">(</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>            </code><code class="n">args</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code class="o">,</code><code>
</code><code>            </code><code class="k">new</code><code> </code><code class="nf">RetryOneTime</code><code class="o">(</code><code class="mi">1000</code><code class="o">)</code><code>
</code><code>    </code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">curator</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>
</code><code>    </code><code class="n">LeaderLatch</code><code> </code><code class="n">leaderLatch</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">LeaderLatch</code><code class="o">(</code><code class="n">curator</code><code class="o">,</code><code> </code><code class="s">"/sampleframework/leader"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="n">leaderLatch</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>    </code><code class="n">leaderLatch</code><code class="o">.</code><code class="na">await</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO6-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO6-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>
</code><code>    </code><code class="c1">// The previous main implementation goes here
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Here, <a data-type="indexterm" data-primary="LeaderLatch" id="ll4"></a>we see how to create a new instance of Curator. It takes the address of the ZooKeeper cluster and a <code>RetryPolicy</code> as arguments. While we are using the <code>RetryOneTime</code> policy in this book, this is probably not the right choice for <span class="keep-together">production</span> frameworks. Instead, the <code>ExponentialBackoffRetry</code> or <code>BoundedExponentialBackoffRetry</code> policies are more robust choices.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Note that you must explicitly <code>start()</code> the Curator framework.<sup><a data-type="noteref" id="idp12964608-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12964608" class="totri-footnote">7</a></sup></p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Next, we create a <code>LeaderLatch</code> for our framework, which we’ll put under the ZooKeeper path we chose for our framework, <code>/sampleframework</code>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Never forget to <code>start()</code> Curator components—this is the #1 pitfall.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO6-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO6-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>The <code>await()</code> method on a started <code>LeaderLatch</code> will not return until we are the leader.</p></dd>
</dl>
<div data-type="warning" epub:type="warning" id="leader_latch_selector"><h1>LeaderLatch Is Nice, but LeaderSelector Is Better</h1>
<p>A <code>LeaderLatch</code> is a very easy way to add leader election to an application.
You simply call <code>await()</code>, and when it returns, you’re the leader!
Unfortunately, if you do this, your application will not always behave correctly.
Leaders can be deposed not only when they crash, but also when they are disconnected from the network.
As a result, a properly implemented user of leader election needs to be constantly checking whether it’s still the leader, and then recreating the leader latch after it’s deposed.
A better option for building robust leader election is <code>LeaderSelector</code>, another class in Curator.
<code>LeaderSelector</code> <a data-type="indexterm" data-primary="LeaderSelector" id="idp13012640"></a>has a listener-based API that notifies you whenever you become the leader or lose leadership.
This book doesn’t use <code>LeaderSelector</code> because it requires substantially more scaffolding code to <a data-type="indexterm" data-primary="LeaderLatch" data-startref="ll4" id="idp13013888"></a><a data-type="indexterm" data-primary="leader election" data-startref="le4" id="idp13014736"></a>use.</p>
</div>

<p>Unfortunately, it’s not enough to simply allow multiple instances of our framework to elect a leader from amongst themselves.
Our goal is to have the new leader actually become the same framework as before.
To do this, we’ll need to inform Mesos that our scheduler supports failover.
In addition, when the new leader registers, it needs to tell Mesos that it’s the new scheduler for our framework.
In Mesos, schedulers are identified by <a data-type="indexterm" data-primary="FrameworkID" id="fid4"></a>their <code>FrameworkID</code>, an optional value in <a data-type="indexterm" data-primary="FrameWorkInfo" id="idp13018144"></a>the <code>FrameworkInfo</code>.
The <code>FrameworkID</code> must be assigned by Mesos in order to ensure it remains unique for each framework.
Now, we’ll need to actually store the <code>FrameworkID</code> when it’s assigned, so that future leaders can reuse it.</p>

<p>We’re going to store the <code>FrameworkID</code> in the ZooKeeper node <code>id</code> under our <code>/sampleframework</code> path.
When we start up, we’ll first check to see if there’s already a saved <code>FrameworkID</code>; if so, we’ll start up using that.
Otherwise, we’ll operate as before, and allow the Mesos master to assign a <code>FrameworkID</code> (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#using_stored_fid">Example&nbsp;4-14</a>).
In addition, we will store whatever <code>FrameworkID</code> Mesos informs us we registered with, so that future leaders can reuse that ID.
We can store that <code>FrameworkID</code> unconditionally, since it will never change after the first assignment, and thus is idempotent.<sup><a data-type="noteref" id="idp13024432-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13024432" class="totri-footnote">8</a></sup></p>
<div id="using_stored_fid" data-type="example">
<h5><span class="label">Example 4-14. </span>Using a stored FrameworkID with FrameworkInfo</h5>

<pre data-type="programlisting" data-code-language="java"><code class="n">FrameworkInfo</code><code class="o">.</code><code class="na">Builder</code><code> </code><code class="n">frameworkInfoBuilder</code><code> </code><code class="o">=</code><code> </code><code class="n">FrameworkInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>    </code><code class="o">.</code><code class="na">setUser</code><code class="o">(</code><code class="s">""</code><code class="o">)</code><code>
</code><code>    </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"Useless Remote BASH"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO7-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO7-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>
</code><code class="k">try</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">curatorData</code><code> </code><code class="o">=</code><code> </code><code class="n">curator</code><code class="o">.</code><code class="na">getData</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">forPath</code><code class="o">(</code><code class="s">"/sampleframework/id"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO7-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO7-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>    </code><code class="n">frameworkInfoBuilder</code><code class="o">.</code><code class="na">setId</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">String</code><code class="o">(</code><code class="n">curatorData</code><code class="o">,</code><code> </code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">KeeperException</code><code class="o">.</code><code class="na">NoNodeException</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="c1">// Don't set the FrameworkID </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO7-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO7-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code class="c1">
</code><code class="o">}</code><code>
</code><code>
</code><code class="n">FrameworkInfo</code><code> </code><code class="n">frameworkInfo</code><code> </code><code class="o">=</code><code> </code><code class="n">frameworkInfoBuilder</code><code>
</code><code>    </code><code class="o">.</code><code class="na">setFailoverTimeout</code><code class="o">(</code><code class="mi">60</code><code class="o">*</code><code class="mi">60</code><code class="o">*</code><code class="mi">24</code><code class="o">*</code><code class="mi">7</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO7-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO7-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>    </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO7-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO7-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We start with our builder, the same as usual.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO7-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO7-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We attempt to fetch the stored <code>FrameworkID</code>. If this node doesn’t exist in ZooKeeper, we throw a <code>KeeperException.NoNodeException</code>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO7-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO7-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>If there wasn’t a stored <code>FrameworkID</code>, we allow Mesos to assign it.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO7-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO7-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>We must configure the framework to have a failover timeout, in seconds. In this case, we allow failover to happen for up to a week. This means we’ve got a week to reconnect a new scheduler for this framework after shutting down the previous scheduler. This timeout should be set to help you survive a worst-case scenario when you need enough time to recover the system after a catastrophe. After this timeout, requests to register with the old <code>FrameworkID</code> will be met with an error about registering a finished framework, and all tasks that were running under that framework will be killed.</p></dd>
</dl>

<p>Now, we need to update our <code>registered</code> scheduler callback to store the <code>FrameworkID</code>. The new version is shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#storing_the_fid">Example&nbsp;4-15</a>.</p>
<div id="storing_the_fid" data-type="example">
<h5><span class="label">Example 4-15. </span>Storing the FrameworkID</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">registered</code><code class="o">(</code><code class="n">SchedulerDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">FrameworkID</code><code> </code><code class="n">frameworkId</code><code class="o">,</code><code>
</code><code>                                 </code><code class="n">MasterInfo</code><code> </code><code class="n">masterInfo</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Registered with framework id "</code><code> </code><code class="o">+</code><code> </code><code class="n">frameworkId</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">try</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">curator</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">creatingParentsIfNeeded</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">forPath</code><code class="o">(</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO8-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO8-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>            </code><code class="s">"/sampleframework/id"</code><code class="o">,</code><code>
</code><code>            </code><code class="n">frameworkId</code><code class="o">.</code><code class="na">getBytes</code><code class="o">(</code><code class="o">)</code><code>
</code><code>        </code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">KeeperException</code><code class="o">.</code><code class="na">NodeExistsException</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="c1">// Do nothing </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO8-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO8-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code class="c1">
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO8-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO8-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We attempt to store the data of the <code>FrameworkID</code> to the predetermined location.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO8-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO8-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>If we catch this exception, it means that we’ve already created the node <code>/sampleframework/id</code>. In this case, we’ll assume that means an earlier leader scheduler already stored the ID, so we’ll do nothing. If you’re using a different store than ZooKeeper, it may be more convenient to simply unconditionally store the ID every time, since it will never change.</p></dd>
</dl>

<p>Now, we’ve finally got a highly available framework with failover working.
Or at least, we would if the framework had any way to also synchronize its state with regard to which jobs are running.
To do this, we’ll need to add support for serializing and deserializing jobs from ZooKeeper.
We’ll store each job in ZooKeeper at <code>/sampleframework/jobs/$jobid</code>, where <code>$jobid</code> is the <code>id</code> field of the job.
Serialization can be trivially <a data-type="indexterm" data-primary="FrameworkID" data-startref="fid4" id="idp13217040"></a>implemented via JSON.</p>

<p>Now that our framework is highly available, we don’t want to always have to provide the set of jobs it should run.
In fact, we’d like to have our framework automatically pick up the monitoring of all previously provided jobs on the command line, and also optionally launch new jobs provided on the command line.
To do this, we’ll load jobs both from the command line (if provided) and from <a data-type="indexterm" data-primary="ZooKeeper" id="idp13215024"></a>ZooKeeper, as <a data-type="indexterm" data-primary="job data, loading" id="jdl4"></a>shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#loading_job_data">Example&nbsp;4-16</a>.</p>
<div id="loading_job_data" data-type="example">
<h5><span class="label">Example 4-16. </span>Loading job data</h5>

<pre data-type="programlisting" data-code-language="java"><code class="n">List</code><code class="o">&lt;</code><code class="n">Job</code><code class="o">&gt;</code><code> </code><code class="n">jobs</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO9-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO9-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>
</code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">args</code><code class="o">.</code><code class="na">length</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">1</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO9-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO9-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>    </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">Files</code><code class="o">.</code><code class="na">readAllBytes</code><code class="o">(</code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">args</code><code class="o">[</code><code class="mi">1</code><code class="o">]</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">JSONObject</code><code> </code><code class="n">config</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">JSONObject</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">String</code><code class="o">(</code><code class="n">data</code><code class="o">,</code><code> </code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">JSONArray</code><code> </code><code class="n">jobsArray</code><code> </code><code class="o">=</code><code> </code><code class="n">config</code><code class="o">.</code><code class="na">getJSONArray</code><code class="o">(</code><code class="s">"jobs"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code> </code><code class="n">i</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">jobsArray</code><code class="o">.</code><code class="na">length</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><code class="n">i</code><code class="o">+</code><code class="o">+</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">jobs</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">Job</code><code class="o">.</code><code class="na">fromJSON</code><code class="o">(</code><code class="n">jobsArray</code><code class="o">.</code><code class="na">getJSONObject</code><code class="o">(</code><code class="n">i</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">curator</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Loaded jobs from file"</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code><code>
</code><code>
</code><code class="c1">//Load jobs from ZK
</code><code class="k">try</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">id</code><code> </code><code class="o">:</code><code> </code><code class="n">curator</code><code class="o">.</code><code class="na">getChildren</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">forPath</code><code class="o">(</code><code class="s">"/sampleframework/jobs"</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO9-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO9-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">curator</code><code class="o">.</code><code class="na">getData</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                             </code><code class="o">.</code><code class="na">forPath</code><code class="o">(</code><code class="s">"/sampleframework/jobs/"</code><code> </code><code class="o">+</code><code> </code><code class="n">id</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO9-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO9-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>        </code><code class="n">JSONObject</code><code> </code><code class="n">jobJSON</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">JSONObject</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">String</code><code class="o">(</code><code class="n">data</code><code class="o">,</code><code> </code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">Job</code><code> </code><code class="n">job</code><code> </code><code class="o">=</code><code> </code><code class="n">Job</code><code class="o">.</code><code class="na">fromJSON</code><code class="o">(</code><code class="n">jobJSON</code><code class="o">,</code><code> </code><code class="n">curator</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO9-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO9-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>        </code><code class="n">jobs</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">job</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Loaded jobs from ZK"</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">Exception</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="c1">// Sample code isn't production ready </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO9-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO9-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code class="c1">
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO9-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO9-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We start by creating the <code>List</code> we’ll store all the <code>Job</code>s in.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO9-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO9-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We only run the original job loading code if a filename was passed on the command line.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO9-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO9-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>The <code>getChildren()</code> method in Curator allows us to get the names of all the child nodes of a path. These child nodes are saved after most state-changing methods, such as <code>launch()</code>, <code>started()</code>, and <code>succeed()</code>.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO9-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO9-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>For each job, we’ll fetch the serialized JSON representation from ZooKeeper.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO9-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO9-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>At this point, we can use the original JSON processing code to deserialize the <code>Job</code>. Note that we must provide every <code>Job</code> with a reference to the Curator now, since the <code>Job</code>s must serialize themselves.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO9-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO9-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>In real production code, you should probably handle exceptions.</p></dd>
</dl>

<p>We’ll also need to enhance our <code>Job</code>s to be able to save their state, as shown <a data-type="indexterm" data-primary="job data, loading" data-startref="jdl4" id="idp13739040"></a><a data-type="indexterm" data-primary="job serialization" id="jobser4"></a>in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#job_listing_with_save">Example&nbsp;4-17</a>.</p>
<div id="job_listing_with_save" data-type="example">
<h5><span class="label">Example 4-17. </span>Job serialization</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">Job</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="c1">// Previously defined fields elided
</code><code>    </code><code class="kd">private</code><code> </code><code class="n">String</code><code> </code><code class="n">id</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO10-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO10-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="kt">void</code><code> </code><code class="nf">saveState</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO10-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO10-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="n">JSONObject</code><code> </code><code class="n">obj</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">JSONObject</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">obj</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="s">"id"</code><code class="o">,</code><code> </code><code class="n">id</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO10-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO10-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="n">obj</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="s">"status"</code><code class="o">,</code><code> </code><code class="o">(</code><code class="n">status</code><code> </code><code class="o">=</code><code class="o">=</code><code> </code><code class="n">JobState</code><code class="o">.</code><code class="na">STAGING</code><code> </code><code class="o">?</code><code>
</code><code>            </code><code class="n">JobState</code><code class="o">.</code><code class="na">RUNNING</code><code> </code><code class="o">:</code><code> </code><code class="n">status</code><code class="o">)</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO10-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO10-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>        </code><code class="c1">// Storing other fields omitted for brevity
</code><code>        </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">obj</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getBytes</code><code class="o">(</code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">try</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO10-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO10-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>            </code><code class="n">curator</code><code class="o">.</code><code class="na">setData</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">forPath</code><code class="o">(</code><code class="s">"/sampleframework/jobs/"</code><code> </code><code class="o">+</code><code> </code><code class="n">id</code><code class="o">,</code><code> </code><code class="n">data</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">KeeperException</code><code class="o">.</code><code class="na">NoNodeException</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">curator</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                   </code><code class="o">.</code><code class="na">creatingParentsIfNeeded</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                   </code><code class="o">.</code><code class="na">forPath</code><code class="o">(</code><code class="s">"/sampleframework/jobs/"</code><code> </code><code class="o">+</code><code> </code><code class="n">id</code><code class="o">,</code><code> </code><code class="n">data</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>
</code><code>
</code><code>
</code><code>
</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">launch</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="c1">// ... previous code omitted ...
</code><code>        </code><code class="n">saveState</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO10-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO10-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="c1">// started(), succeed(), fail() are modified as above
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO10-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO10-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We need to include an identifier for each job, so that they can be looked up by a primary key in the database we sync them to.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO10-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO10-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We’ve added a method to save the state of the <code>Job</code> to an external store. In this case, we’re storing the JSON-formatted data to ZooKeeper.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO10-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO10-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We need to make sure to store all the fields to the database.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO10-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO10-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>We always store jobs that are in <code>STAGING</code> as if they were running. Since we can’t be sure whether a job in the <code>STAGING</code> state has launched successfully, we’ll assume it succeeded during a failover, so that we’ll either get a new <code>statusUpdate</code> if it finished in the meantime or a <code>TASK_LOST</code> after reconciliation.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO10-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO10-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>Curator’s API requires a different method to create a new ZooKeeper node and update its data.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO10-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO10-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>We need to make sure to save the <code>Job</code>’s state after every status update. Note that the addition of <code>saveState()</code> to the last line of <code>started()</code>, <code>succeed()</code>, and <code>fail()</code> is omitted in this code, but this must be done for a <a data-type="indexterm" data-primary="schedulers" data-secondary="adding high availability" data-startref="s4aha" id="idp13705792"></a><a data-type="indexterm" data-primary="high availability" data-startref="ha4" id="idp13707008"></a>working framework.</p></dd>
</dl>

<p>And there you have it!
Our job scheduler is now able to automatically fail over to waiting hot spares without impacting the running jobs or losing track of them—well, <a data-type="indexterm" data-primary="job serialization" data-startref="jobser4" id="idp13383456"></a>almost.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Adding Reconciliation"><div class="sect1" id="idp12844656">
<h1>Adding Reconciliation</h1>

<p>It <a data-type="indexterm" data-primary="schedulers" data-secondary="adding reconciliation" id="s4ar"></a><a data-type="indexterm" data-primary="reconciliation" id="r4"></a>turns out that there are still situations in which things can fall out of synchronization: these cases are explained in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#reconciliation_concepts">“Reconciliation During Failover”</a>.
This is the final piece missing from our robust, highly available Mesos scheduler.
Luckily, it’s easy to add reconciliation to a scheduler.
When implementing the <code>statusUpdate()</code> callback, you are mapping the Mesos state events to your framework’s state machine model.
As long as this state machine never moves out of the terminal states (e.g., <code>TASK_LOST</code>, <code>TASK_FINISHED</code>, <code>TASK_KILLED</code>, etc.), reconciliation shouldn’t require additional work.
Typically, you’ll want to run reconciliation periodically; I usually just run it on startup and every 30 minutes thereafter.
Reconciliation is a sort of catchall for any message loss—it ensures that even if some unknown bug or hardware failure causes your framework to fall out of sync with the state of the Mesos cluster, you’ll eventually correct that issue.</p>

<p>To reconcile, we will just generate a list of running tasks, along with the ID of the slave that they’re running on (for an explanation of why, see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#reconciliation_concepts">“Reconciliation During Failover”</a>).
Then, we’ll invoke <code>reconcileTasks()</code>.
Mesos will automatically send the responses to the <code>statusUpdate()</code> callback.
If you want to implement special handling of reconciliation-related status updates, you can check if the <code>reason</code> field of the status update is <code>TASK_RECONCILIATION</code>.
We don’t bother with that in our framework, because our framework’s task state machine is robust. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#reconciliation_of_running_tasks">Example&nbsp;4-18</a> shows how to reconcile the running tasks.</p>
<div id="reconciliation_of_running_tasks" data-type="example">
<h5><span class="label">Example 4-18. </span>Reconciliation of running tasks</h5>

<pre data-type="programlisting" data-code-language="java"><code class="n">List</code><code class="o">&lt;</code><code class="n">TaskStatus</code><code class="o">&gt;</code><code> </code><code class="n">runningTasks</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Job</code><code> </code><code class="n">job</code><code> </code><code class="o">:</code><code> </code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">job</code><code class="o">.</code><code class="na">getStatus</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">=</code><code class="o">=</code><code> </code><code class="n">JobState</code><code class="o">.</code><code class="na">RUNNING</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">TaskID</code><code> </code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">TaskID</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">job</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">SlaveID</code><code> </code><code class="n">slaveId</code><code> </code><code class="o">=</code><code> </code><code class="n">SlaveID</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="n">job</code><code class="o">.</code><code class="na">getSlaveId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO11-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO11-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Reconciling the task "</code><code> </code><code class="o">+</code><code> </code><code class="n">job</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">runningTasks</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">TaskStatus</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setSlaveId</code><code class="o">(</code><code class="n">slaveId</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setTaskId</code><code class="o">(</code><code class="n">id</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setState</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_RUNNING</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code><code>
</code><code class="n">driver</code><code class="o">.</code><code class="na">reconcileTasks</code><code class="o">(</code><code class="n">runningTasks</code><code class="o">)</code><code class="o">;</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO11-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO11-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Although we didn’t show the code for it, we must record the ID of the slave we believe each task is currently running on so that we can perform reconciliation.</p></dd>
</dl>

<p>At last, we have a complete implementation of a highly available Mesos scheduler that is robust to all kinds of failures: masters can crash, slaves can be disconnected from the network, and the scheduler itself can be killed and restarted.
In spite of any of those problems, the framework will endure, continually tracking, monitoring, and ensuring its tasks complete successfully.
We accomplished this through several means:</p>
<dl>
<dt>Jobs over tasks</dt>
<dd>
<p>We separated the notion of a job that we’d like to run from the Mesos task.
This allowed us to manage retries of a job, since the job’s success or failure wasn’t tied to a single attempt to run it.
This conceptual framework works equally well for long-running services: a service is a <em>goal</em> to run some number of instances of a program; a task is an instance, but it could fail and be replaced with another task.
If you’re interested in learning more about using goals to handle the reliability of scalable, distributed systems, this idea was pioneered by Joe Armstrong in his thesis on building reliable telephone systems.<sup><a data-type="noteref" id="idp14118880-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14118880" class="totri-footnote">9</a></sup></p>
</dd>
<dt>Persistent framework identity</dt>
<dd>
<p>We enabled different schedulers to automatically fail over by storing the identity of our framework: <a data-type="indexterm" data-primary="FrameworkID" id="idp13673280"></a>the <code>FrameworkID</code>.
This is the one part of framework management that we must do out-of-band from Mesos, since it must be propagated in spite of failures even within Mesos itself.</p>
</dd>
<dt>Shared job state</dt>
<dd>
<p>Whenever we received updates about the state of a job, we synchronized those updates with our distributed store of choice, ZooKeeper.
This ensured that newly elected leader schedulers would have the best possible information about the state of the cluster.</p>
</dd>
<dt>Retries for jobs</dt>
<dd>
<p>Sometimes, a Mesos slave machine just doesn’t work: perhaps it was misconfigured, or perhaps another task running on that slave is affecting its neighbors through a type of resource that Mesos can’t isolate.
To defend against these cases, we should always retry our actions.
However, usually we also want to give up if a job keeps failing, since that may indicate a problem with the job itself.</p>
</dd>
<dt>Reconciliation</dt>
<dd>
<p>Ultimately, things will go wrong that we didn’t predict.
In an attempt to handle these events (or at least eventually recover from them automatically), we used the Mesos reconciliation API to periodically attempt to clarify our state.
Although even reconciliation won’t handle every such issue, it is the best tool we have for handling unknown <a data-type="indexterm" data-primary="schedulers" data-secondary="adding reconciliation" data-startref="s4ar" id="idp13521296"></a><a data-type="indexterm" data-primary="reconciliation" data-startref="r4" id="idp13522432"></a>unknowns.</p>
</dd>
</dl>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Advanced Scheduler Techniques"><div class="sect1" id="idp13523888">
<h1>Advanced Scheduler Techniques</h1>

<p>Although<a data-type="indexterm" data-primary="schedulers" data-secondary="advanced techniques" id="s4at"></a> we’ve managed to implement a feature-complete, reliable scheduler, there are many other ways in which we could add features and robustness to our scheduler.
In this section, we’ll discuss further improvements that production-quality schedulers should consider implementing.</p>








<section data-type="sect2" data-pdf-bookmark="Distributed Communication"><div class="sect2" id="idp13354976">
<h2>Distributed Communication</h2>

<p>In our <a data-type="indexterm" data-primary="schedulers" data-secondary="distributed communication" id="s4atdc"></a><a data-type="indexterm" data-primary="distributed communication" id="dc4"></a>Useless Remote BASH, we only handled new jobs when a scheduler that had just become the leader was passed a file containing JSON job descriptors.
In real schedulers, we’ll want to be able to receive new jobs at any time.
Most commonly, work will be communicated to our scheduler via an HTTP API.</p>

<p>If you decide to allow your scheduler to receive work over HTTP, it’s better if both the leader and hot spare schedulers are all able to process HTTP requests.
This can be accomplished in several ways:</p>
<dl>
<dt>Shared database</dt>
<dd>
<p>In <a data-type="indexterm" data-primary="shared database design" id="idp14110656"></a>this design, the leader and hot spare schedulers all are able to read from and write to a shared database.
This way, they can all serve client requests.
Whenever a client modifies the database, however, we must ensure that the leading scheduler is notified.
Some databases support notifications; if your database doesn’t support this, the leading scheduler can frequently poll the database for updates so that it never lags too far behind the clients’ instructions.
The other solution for notifications is to use the leader election subsystem to identify the current leader, and then make a remote procedure call (RPC) to that leader so that it updates itself.</p>
</dd>
<dt>Redirect modification requests</dt>
<dd>
<p>HTTP <a data-type="indexterm" data-primary="redirection" id="idp14131776"></a>already supports redirection.
In this case, leader and hot spare schedulers can handle read-only requests, but requests that update the state of the framework can simply be redirected to the leading master with a 302 Found response.</p>
</dd>
<dt>The data is the truth</dt>
<dd>
<p>This <a data-type="indexterm" data-primary="data stores" id="idp13350288"></a>pattern is similar to the shared database pattern, but rather than providing an HTTP API, clients communicate directly with the data layer, and the scheduler is totally subservient to whatever data is in the data layer.
For instance, if you used Redis or RabbitMQ as your data layer, any client could add work to it, and the leading scheduler would periodically poll for new tasks it needs to launch and replicate all status updates to the data layer.</p>
</dd>
</dl>

<p>In practice, most framework authors reach for <a data-type="indexterm" data-primary="ZooKeeper" id="idp13420016"></a>ZooKeeper first.
ZooKeeper is a great choice for many types of frameworks, for the following reasons:</p>

<ul>
<li>
<p>It provides leader election primitives.</p>
</li>
<li>
<p>It stores arbitrary data.</p>
</li>
<li>
<p>It supports arbitrary transactions.</p>
</li>
<li>
<p>It’s highly available.</p>
</li>
<li>
<p>It can notify clients when data changes.</p>
</li>
<li>
<p>A Mesos cluster already has an instance.</p>
</li>
</ul>

<p>ZooKeeper’s main downside is that it can’t scale to hundreds of thousands of data elements.
For that use case, you’ll need to sacrifice the strong consistency it provides <a data-type="indexterm" data-primary="schedulers" data-secondary="distributed communication" data-startref="s4atdc" id="idp14089872"></a><a data-type="indexterm" data-primary="distributed communication" data-startref="dc4" id="idp14091088"></a>for other data stores like Cassandra, Redis, or MySQL.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Forced Failover"><div class="sect2" id="idp14092256">
<h2>Forced Failover</h2>

<p>At <a data-type="indexterm" data-primary="schedulers" data-secondary="forced failover" id="idp14093552"></a><a data-type="indexterm" data-primary="forced failover" id="idp14147904"></a>some point, you may want to make a framework that automatically forces failover to a new scheduler.
This could be useful in two cases:</p>
<ol>
<li>
<p>Your scheduler knows what the current running version is and will trigger a failover if it is a newer version, to simplify the upgrade process.</p>
</li>
<li>
<p>Your scheduler starts out running on the user’s command line, but it actually creates a task on the Mesos cluster that will take over for the command-line tool. For example, <a href="http://bit.ly/mesos-submit"><code>mesos-submit</code></a> (now deprecated) did this.</p>
</li>

</ol>

<p>If you want to trigger a failover, simply register your new scheduler with the existing <code>FrameworkID</code>.
When Mesos accepts the new scheduler’s registration, it will trigger the <code>error()</code> callback of the old scheduler, with the message <code>Framework failover</code>.
Unfortunately, this message string is the only way to distinguish a purposeful failover from an actual framework error.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Consolidating Offers"><div class="sect2" id="idp13336864">
<h2>Consolidating Offers</h2>

<p>One <a data-type="indexterm" data-primary="schedulers" data-secondary="consolidated offers" id="s4atco"></a><a data-type="indexterm" data-primary="offer consolidation" id="co4"></a><a data-type="indexterm" data-primary="fragmentation" id="idp14209008"></a>issue that some schedulers run into is offer fragmentation.
Offer fragmentation occurs when multiple frameworks are connected to the Mesos cluster, and one of them launches multiple tasks of similar (but not the same) size.
Usually, the Mesos master can consolidate free resources from each host.
Fragmentation occurs when the master isn’t able to do so.
The root cause is that the various fractions of the resources are repeatedly being offered to different connected frameworks, and thus are never idle long enough to consolidate.
This can manifest as, for example, a host having eight offers with one CPU each, rather than one eight-CPU offer.
To solve this problem, your framework must change the way it handles offers: rather than immediately using or declining offers, it can hold on to them temporarily in order to wait and see if any more offers come in on those hosts.
Remember, when you call <code>launchTasks</code>, you can pass it as many offers for the same slave as you’d like (see the note <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#combining_offers_tip">Combining Offers</a> following <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#resource_offers_urb">Example&nbsp;4-5</a>).</p>

<p>You can build offer consolidation as a form of middleware for your <code>resourceOffers</code> <a data-type="indexterm" data-primary="resourceOffers" id="idp14213648"></a><a data-type="indexterm" data-primary="offers" data-secondary="resourceOffers" id="idp14214384"></a>callback.
Instead of calling your original implementation of <code>resourceOffers</code>, first put all new offers into a map, keyed by slave, so that you can track all the offers for each slave.
Then, you can decide when to remove a group of offers from the map and pass them to your original <code>resourceOffers</code> callback.
When doing this, you should also make sure that you can’t accidentally hold on to an offer forever—you should still try to decline offers after a couple of minutes, to keep the whole cluster operating smoothly.</p>

<p>There are two broad classes of strategies for deciding when you should pass a group of offers along to the original <code>resourceOffers</code> implementation: you can pass along a group when it’s <em>big enough</em>, or when it’s been <em>long enough</em>.
If you choose the <em>big enough</em> strategy, you’ll need to keep track of the biggest task that you need to launch.
Then, when you finally receive enough offers on a single slave to satisfy the task, you can pass along the group of offers to the code that will launch the task.
If you choose the <em>long enough</em> strategy, you’ll also need to choose how long to hold on to an offer (typically, 15–60 seconds).
Then, when an offer is held for longer than the chosen time, you can pass all of that slave’s offers to your original <code>resourceOffers</code>, and hopefully that group will be big enough.</p>

<p>The benefit of the big enough strategy is that you’re guaranteed to launch your task when you find enough offers.
The downsides are that you still need to worry about liveness (occasionally declining old offers), and you need to track the size of pending tasks.
The strategy becomes even more complicated if you’d like to try to pack multiple tasks into an offer group, as you now need to keep track of many variables: the offers on each slave, the pending tasks, and the different ways those tasks could be packed into the offers.</p>

<p>On the other hand, the long enough strategy is simpler to implement: you don’t need to worry about the task sizes at all;
instead, you are assuming that you will eventually receive enough offers during the time window you chose to satisfy any pending task.
The downside of this strategy is that it could struggle to launch a very big task, since if you waited longer, you could’ve received the last necessary offer to succeed.</p>

<p>Ultimately, consolidating offers is not necessary until you reach a certain scale on your Mesos cluster.
It is, however, good to know how to diagnose this problem, and how to design a solution to it.
In production Mesos clusters I’ve operated, we’ve run into this problem and solved it successfully using the long enough strategy.</p>
<div data-type="tip"><h1>Fenzo, a Scheduling Library</h1>
<p><a href="https://github.com/Netflix/Fenzo">Fenzo</a> is a library released by Netflix in the summer of 2015.
For <a data-type="indexterm" data-primary="Fenzo" id="idp14195424"></a><a data-type="indexterm" data-primary="Netflix Fenzo" id="idp14196016"></a>Java-based schedulers, Fenzo provides a complete solution to offer buffering, multiple task launching, and hard and soft constraint matching.
Many, if not most, schedulers would probably benefit from using Fenzo to compute task assignments, rather than writing the offer buffering, packing, and placement routines <a data-type="indexterm" data-primary="schedulers" data-secondary="consolidated offers" data-startref="s4atco" id="idp14197152"></a><a data-type="indexterm" data-primary="offer consolidation" data-startref="co4" id="idp14198368"></a>themselves.</p>
</div>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Hardening Your Scheduler"><div class="sect2" id="idp14199696">
<h2>Hardening Your Scheduler</h2>

<p>In <a data-type="indexterm" data-primary="schedulers" data-secondary="hardening" id="idp14200880"></a>our example scheduler, we simply retry jobs on the next offer that we receive once they’ve failed.
Often, some job won’t run on a particular host due to some uniquely broken aspect of that host.
To protect against this type of repeated failure, you should track which hosts a job has failed on, and not retry the job on those hosts.
In practice, this protects against all kinds of host misconfiguration.</p>

<p>A job not working on a particular host isn’t the only host-related issue you could encounter.
Rarely (but what’s rare at scale?), you’ll <a data-type="indexterm" data-primary="black hole hosts" id="idp14203200"></a>get a <em>black hole host</em>: a host that causes every job it runs to fail, often extremely quickly.
Black hole hosts will rapidly exhaust all the retries for all the jobs you’re trying to run, resulting in spurious failures that require manual intervention.
To handle black hole hosts, you should track how many failures you’ve seen on each host in the past minute.
If that number exceeds some predetermined target, then you should stop accepting offers from that host entirely.
Some frameworks expect tasks to never fail (like long-running services), so seeing 20 failures from a single host in a minute bodes poorly for it.
On the other hand, some frameworks complete thousands of tasks every second; for these, 20 failures on a single host in a minute would be totally normal, and so they’d only <a data-type="indexterm" data-primary="blacklists" id="idp14154512"></a>blacklist a host after thousands of failures in a short duration.
Finally, when implementing a blacklist, make sure that you can receive notifications when hosts are blacklisted, and make sure that those hosts are automatically unblacklisted after a week.
If you don’t automatically notify and later unblock these hosts, you could accidentally forget about them and leave those resources idling forever, costing money but not doing any work.
Alternatively, you can use an automated system like <a href="https://github.com/twosigma/satellite">Satellite</a> to <a data-type="indexterm" data-primary="Satellite" id="idp14156480"></a>handle this situation for all frameworks.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Framework UI"><div class="sect2" id="idp14157472">
<h2>Framework UI</h2>

<p>Usually, <a data-type="indexterm" data-primary="schedulers" data-secondary="Framework UI" id="idp14158992"></a><a data-type="indexterm" data-primary="Framework UI" id="idp14160000"></a>frameworks have a web UI, since the browser is such a powerful platform for graphical interfaces.
The <code>FrameworkInfo</code> <a data-type="indexterm" data-primary="FrameWorkInfo" id="idp14161296"></a>protobuf has a field called <code>webui_url</code> that should be set to the URL that the UI is available on.
When you set this field, the Mesos UI will make the framework’s name in the UI a link to the provided <code>webui_url</code>.
If you use this feature, you should either ensure that the <code>webui_url</code> is managed behind a load balancer, or update it in the <code>FrameworkInfo</code> every time a new scheduler becomes the leader.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Allocating Ports"><div class="sect2" id="idp13984224">
<h2>Allocating Ports</h2>

<p>We <a data-type="indexterm" data-primary="schedulers" data-secondary="allocating ports" id="s4atap"></a><a data-type="indexterm" data-primary="port allocation" id="pa4"></a>only used scalar resources in our scheduler (i.e., CPUs and memory).
Mesos also supports range-type resources, the most common of which is ports.
Mesos manages the ports on the cluster to ensure that each task that needs to listen on a socket binds to a unique port, and to ensure that tasks that require specific ports won’t start on slaves for which those ports are already in use.
The available ports are encoded as a list of <code>[<em>begin</em>, <em>end</em>]</code> pairs of available ports; to use them, you simply add the subranges you’re interested in as resources.
For example, in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#port_allocation">Example&nbsp;4-19</a> we demonstrate a function, <code>findNPorts</code>, that finds <em>N</em> ports from the given offer and returns the resources that should be added to the <code>TaskInfo</code> that needs those ports.</p>
<div id="port_allocation" data-type="example">
<h5><span class="label">Example 4-19. </span>Port allocation</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Resource</code><code> </code><code class="nf">findNPorts</code><code class="o">(</code><code class="n">Offer</code><code> </code><code class="n">offer</code><code class="o">,</code><code> </code><code class="kt">int</code><code> </code><code class="n">n</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">numStillNeeded</code><code> </code><code class="o">=</code><code> </code><code class="n">n</code><code class="o">;</code><code>
</code><code>    </code><code class="n">Value</code><code class="o">.</code><code class="na">Ranges</code><code class="o">.</code><code class="na">Builder</code><code> </code><code class="n">ranges</code><code> </code><code class="o">=</code><code> </code><code class="n">Value</code><code class="o">.</code><code class="na">Ranges</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Value</code><code class="o">.</code><code class="na">Range</code><code class="o">&gt;</code><code> </code><code class="n">availablePorts</code><code> </code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">;</code><code>
</code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Resource</code><code> </code><code class="n">r</code><code> </code><code class="o">:</code><code> </code><code class="n">offer</code><code class="o">.</code><code class="na">getResourcesList</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">r</code><code class="o">.</code><code class="na">getName</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">equals</code><code class="o">(</code><code class="s">"ports"</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">availablePorts</code><code> </code><code class="o">=</code><code> </code><code class="n">r</code><code class="o">.</code><code class="na">getRanges</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getRangeList</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="k">while</code><code> </code><code class="o">(</code><code class="n">numStillNeeded</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">0</code><code> </code><code class="o">&amp;</code><code class="o">&amp;</code><code>
</code><code>                   </code><code class="n">availablePorts</code><code> </code><code class="o">!</code><code class="o">=</code><code> </code><code class="kc">null</code><code> </code><code class="o">&amp;</code><code class="o">&amp;</code><code>
</code><code>                   </code><code class="o">!</code><code class="n">availablePorts</code><code class="o">.</code><code class="na">isEmpty</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="n">Value</code><code class="o">.</code><code class="na">Range</code><code> </code><code class="n">portRange</code><code> </code><code class="o">=</code><code> </code><code class="n">availablePorts</code><code class="o">.</code><code class="na">remove</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="kt">long</code><code> </code><code class="n">numAvail</code><code> </code><code class="o">=</code><code> </code><code class="n">portRange</code><code class="o">.</code><code class="na">getEnd</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">-</code><code> </code><code class="n">portRange</code><code class="o">.</code><code class="na">getBegin</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>        </code><code class="kt">long</code><code> </code><code class="n">numWillUse</code><code> </code><code class="o">=</code><code> </code><code class="n">numAvail</code><code> </code><code class="o">&gt;</code><code class="o">=</code><code> </code><code class="n">numStillNeeded</code><code> </code><code class="o">?</code><code>
</code><code>                </code><code class="n">numStillNeeded</code><code> </code><code class="o">:</code><code> </code><code class="n">numAvail</code><code class="o">;</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>        </code><code class="n">ranges</code><code class="o">.</code><code class="na">addRange</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Range</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setBegin</code><code class="o">(</code><code class="n">portRange</code><code class="o">.</code><code class="na">getBegin</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>                </code><code class="o">.</code><code class="na">setEnd</code><code class="o">(</code><code class="n">portRange</code><code class="o">.</code><code class="na">getBegin</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">+</code><code> </code><code class="n">numWillUse</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="o">)</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>                </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">numStillNeeded</code><code> </code><code class="o">-</code><code class="o">=</code><code> </code><code class="n">numWillUse</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">numStillNeeded</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">0</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_creating_a_new_framework_for_mesos_CO12-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#callout_creating_a_new_framework_for_mesos_CO12-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code>        </code><code class="k">throw</code><code> </code><code class="k">new</code><code> </code><code class="nf">RuntimeException</code><code class="o">(</code><code class="s">"Couldn't satisfy "</code><code> </code><code class="o">+</code><code> </code><code class="n">n</code><code> </code><code class="o">+</code><code> </code><code class="s">" ports"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">Resource</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setName</code><code class="o">(</code><code class="s">"ports"</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Value</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">RANGES</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setRanges</code><code class="o">(</code><code class="n">ranges</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We first find the <code>Range</code>s that contain the available ports.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We will keep looking for ports as long as there are still available ports and we need them.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We will check the contiguous subranges one at a time.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>The contiguous subranges are inclusive; thus, if the subrange is <code>[10-20]</code>, there are actually 11 ports available.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>When deciding how many ports to use from this subrange, we will never exceed how many we still need or how many are available.</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>Remember that the range is inclusive, and beware the off-by-one error!</p></dd>
<dt><a class="co" id="callout_creating_a_new_framework_for_mesos_CO12-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co_creating_a_new_framework_for_mesos_CO12-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>It’s possible that we couldn’t find enough ports; better to blow up than return bad data.</p></dd>
</dl>

<p>Besides ranges, which can be tricky to work with, Mesos also has set-type resources.
Sets of resources currently only exist when defined on the slave command line.
They are represented as lists in the <code>Resource</code> protobuf, and they’re straightforward to use.
You can learn more about creating custom resource <a data-type="indexterm" data-primary="schedulers" data-secondary="allocating ports" data-startref="s4atap" id="idp14756272"></a><a data-type="indexterm" data-primary="port allocation" data-startref="pa4" id="idp14757520"></a>types in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#configuring_custom_resources">“Configuring Custom Resources”</a>.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Checkpointing"><div class="sect2" id="idp14759520">
<h2>Checkpointing</h2>

<p>Even <a data-type="indexterm" data-primary="schedulers" data-secondary="checkpointing" id="idp14760848"></a><a data-type="indexterm" data-primary="checkpointing" id="idp14591568"></a>though we should always strive to implement our frameworks to be robust against all kinds of errors, it’s actually possible to instruct Mesos to checkpoint status updates from tasks onto disk, in case the update coincides with a slave restart.
You can enable this by setting the <code>checkpoint</code> property of the <code>FrameworkInfo</code> to <code>true</code>.
This turns some slave crashes and restarts into unexceptional behavior.
I recommend always doing this, unless you expect to generate large numbers of status updates over short intervals.
Since checkpointing causes every status update to be written to disk, if you make thousands of status updates per second per slave, that would incur thousands of additional disk I/O operations per second per slave, which could degrade cluster performance.
You should benchmark your framework with and without checkpointing if you’re concerned about its performance impact; otherwise, it’s best to always use it.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="CommandInfo"><div class="sect2" id="commandinfo_details">
<h2>CommandInfo</h2>

<p>The <code>CommandInfo</code> <a data-type="indexterm" data-primary="CommandInfo" id="idp14597056"></a>protobuf describes how a process should be launched. We’ll examine <code>CommandInfo</code>’s two sides: fields related to launching a process, and fields related to setting up the environment for the process.</p>










<section data-type="sect3" data-pdf-bookmark="Launching a process"><div class="sect3" id="idp14263920">
<h3>Launching a process</h3>

<p><code>CommandInfo</code> supports <a data-type="indexterm" data-primary="process launching" id="idp14265920"></a>two ways to launch a process: through the <code>execv</code> syscall, and via the system’s default shell (such as Dash or Bash).
If you want to launch your process using <code>execv</code>, this will ensure that you can control the arguments to your process very precisely, and not worry about how shells interpret strings.
To launch the process directly, set the <code>value</code> to be the path to the executable, set the <code>arguments</code> to be the args array, and set <code>shell</code> to <code>false</code>.
If you’d like it to be launched via a shell, however (so that you can use shell operators like <code>&amp;&amp;</code>, <code>||</code>, and <code>|</code> to compose programs), you must set <code>shell</code> to <code>true</code>, and then the entire contents of the <code>value</code> will be invoked by running <code>/bin/sh -c "$value"</code>; <code>arguments</code> are ignored for shell commands.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Configuring the process’s environment"><div class="sect3" id="configuring_process_environment">
<h3>Configuring the process’s environment</h3>

<p>Mesos <a data-type="indexterm" data-primary="process environment" id="idp14351600"></a>allows you to control three additional aspects of the process’s environment: the user account that it runs as (via the <code>user</code> field, subject to the ACLs), the environment variables that the process sees (via the <code>environment</code> field, which is just a list of name/value pairs wrapped into a protobuf), and the filesystem state (via URIs).
This last parameter requires additional explanation: it allows you to specify any number of URIs that should be downloaded into the executor sandbox (the current working directory when the executor starts running).
You can choose whether those URIs should be executable, which is useful because you can instruct your <code>CommandInfo</code> to bootstrap and install the application’s binaries directly into the sandbox, obviating the need for a deployment system.
You can also specify whether to extract archive files, as Mesos understands those extensions and can download and unpack the application or additional resources automatically.
The extensions recognized are currently <em>.tgz</em>, <em>.tar.gz</em>, <em>.tbz2</em>, <em>.tar.bz2</em>, <em>.txz</em>, <em>.tar.xz</em>, and <em>.zip</em>.
By default, Mesos supports the URI schemes <em>hdfs://</em>, <em>http://</em>, <em>https://</em>, <em>ftp://</em>, <em>ftps://</em>, and <em>file://</em> (for use with NFS or other networked POSIX filesystems), as well as any other URI schemes that the installed Hadoop client supports (Hadoop is not a required dependency, though, and <em>hdfs://</em> will simply fail if it’s not installed).
You can add support for additional means of fetching binary dependencies by modifying <em>src/launcher/fetcher.cpp</em> accordingly.</p>
<div data-type="tip"><h6>Tip</h6>
<p>The task’s sandbox is always available in the environment variable <code>$MESOS_DIRECTORY</code>.</p>
</div>
</div></section>



</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp13352368">
<h1>Summary</h1>

<p>In <a data-type="indexterm" data-primary="schedulers" data-secondary="advanced techniques" data-startref="s4at" id="idp14464112"></a>this chapter, we learned how to implement the scheduler component of a Mesos framework.
The scheduler is responsible for launching tasks, monitoring those tasks, and interacting with the user.
Many frameworks only need to implement a scheduler; all the functionality necessary to build most distributed, scalable, clustered applications can be implemented by orchestrating the launching of worker processes.
We looked at a few example framework architectures, such as the <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#pool_of_servers">pool of servers scheduler</a>, <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#work_queue_scheduler_example">work queue scheduler</a>, and <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#job_processor_scheduler">job processor scheduler</a>.
Then, we walked through the implementation of a job processor.</p>

<p>To build the job processor scheduler, we had to use a database, ZooKeeper, to persist the state of the application.
Even though the scheduler API has many callbacks, we only needed to implement a handful of them to create a working system.
We separated the notion of jobs (what the user wants to do) from tasks (code that Mesos runs on the cluster).
This separation allowed us to easily build retries into our scheduler.
The scheduler also needed a basic optimization, offer packing, in order to avoid being too slow.</p>

<p>Once the scheduler was up and running, we added high availability by combining an external leader election library, Curator, with additional features of the Mesos framework registration API.
Unfortunately, once we gained the ability to fail over, we opened ourselves up to the possible loss of task status updates.
To resolve this, we implemented task reconciliation, which allowed the scheduler to always behave correctly during planned and unplanned failover scenarios.</p>

<p>After learning how to implement a reliable Mesos scheduler, we discussed additional considerations for production-quality frameworks should.
Since we usually have many instances of a scheduler running, and only one is the master, we looked at several designs for how clients can interact with the schedulers.
We learned about offer fragmentation, what causes it, and some strategies to ensure that a framework never fails to find big enough offers.
Besides CPUs and memory, many frameworks must allocate ports to their tasks: we learned about range-type resources, and how port allocation differs from CPU and memory scalar allocation.
Finally, we briefly discussed issues such as building a user interface for a framework, hardening a framework against unknowns, and automating failovers during maintenance.</p>

<p>At this point, you’re fully equipped to write a Mesos framework that can launch and monitor tasks, handle various types of failures and unexpected scenarios, and operate efficiently on your cluster.
Next, we’ll learn about how to increase the capabilities of frameworks by implementing custom executors, which will allow things like dynamically resizing containers and allowing tasks to share <a data-type="indexterm" data-primary="schedulers" data-startref="s4" id="idp14471936"></a>resources.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idp9873088"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9873088-marker" class="totri-footnote">1</a></sup> The name of this framework refers to it hardcoding the command that it runs; as an example of how to work with the Mesos APIs, it is very useful.</p><p data-type="footnote" id="idp10036688"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10036688-marker" class="totri-footnote">2</a></sup> Some projects to watch for purely native Mesos bindings are <a href="https://github.com/groupon/jesos">Jesos</a> for Java, <a href="https://github.com/wickman/pesos">Pesos</a> for Python, and <a href="https://github.com/mesos/mesos-go">Go bindings</a> for Go.</p><p data-type="footnote" id="idp12148944"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12148944-marker" class="totri-footnote">3</a></sup> NP-completeness is out of scope for this book, but you can start with <a href="https://en.wikipedia.org/wiki/NP-complete">the Wikipedia article</a>.</p><p data-type="footnote" id="idp12151712"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12151712-marker" class="totri-footnote">4</a></sup> This is also outside the scope of this book; for more information, see the <a href="http://en.wikipedia.org/wiki/Knapsack_problem">Wikipedia page</a> on the knapsack problem.</p><p data-type="footnote" id="idp12854224"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12854224-marker" class="totri-footnote">5</a></sup> There’s ongoing work to enable etcd as a ZooKeeper alternative. The issue is tracked on the Apache Mesos Jira as <a href="https://issues.apache.org/jira/browse/MESOS-1806">MESOS-1806</a>.</p><p data-type="footnote" id="idp12857696"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12857696-marker" class="totri-footnote">6</a></sup> The examples in the book are written against Curator 2.7.1, using <code>curator-framework</code> and <code>curator-recipes</code>.</p><p data-type="footnote" id="idp12964608"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12964608-marker" class="totri-footnote">7</a></sup> Somewhat confusingly, the Apache Curator’s API is also called a framework; however, it’s completely unrelated to Mesos frameworks!</p><p data-type="footnote" id="idp13024432"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13024432-marker" class="totri-footnote">8</a></sup> Operations that are idempotent have the same effect no matter whether you do them once or a thousand times. When building distributed systems, trying to make as many operations idempotent as possible reduces the chances of race conditions or unpredictable behavior when the network reorders and drops messages.</p><p data-type="footnote" id="idp14118880"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14118880-marker" class="totri-footnote">9</a></sup> Joe Armstrong, the author of <a href="http://www.erlang.org/download/armstrong_thesis_2003.pdf">Making reliable distributed systems in the presence of software errors</a>, is also the creator of Erlang. Even though most of us aren’t using Erlang, his ideas about goal-oriented programming and supervision pervade all reliable distributed systems, including Mesos and its close cousin from Google, Borg.</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch03.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">3. Porting an Existing Application to Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch05.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">5. Building a Mesos Executor</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch04.html" data-for-analytics="9781491926543:ch04.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#">Reset</a>
</div>
</div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch05.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch05.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom gr__safaribooksonline_com" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch05.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch05.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>5. Building a Mesos Executor - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch05.html"><meta name="description" content=" Chapter 5. Building a Mesos Executor Now you’ve seen how to build a scheduler for Mesos. However, there are some things that can’t be done with the scheduler ... "><meta property="og:title" content="5. Building a Mesos Executor"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="5. Building a Mesos Executor"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch05.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 5. Building a Mesos Executor Now you’ve seen how to build a scheduler for Mesos. However, there are some things that can’t be done with the scheduler ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch05.html" data-for-analytics="9781491926543:ch05.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch05.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch05.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch05.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%205.%20Building%20a%20Mesos%20Executor&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch05.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch04.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">4. Creating a New Framework for Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch06.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">6. Advanced Topics in Mesos</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 5. Building a Mesos Executor"><div class="chapter" id="ch_mesos_executor">
<h1><span class="label">Chapter 5. </span>Building a Mesos Executor</h1>


<p>Now <a data-type="indexterm" data-primary="executors" data-seealso="CommandExecutor" id="ex5"></a>you’ve seen how to build a scheduler for Mesos.
However, there are some things that can’t be done with the scheduler API alone.
For instance, perhaps you’d like to run several tasks in the same container.
Maybe your application has lifecycle messages for the scheduler, reporting on its progress or application-specific statistics.
Or perhaps you’d like to layer additional functionality into the executed task.
In order to accomplish these things, you need to write a custom Mesos executor.</p>

<p>This is what we’ll learn how to do in this chapter.
Initially, we’ll simply provide the functionality of the built-in <code>CommandExecutor</code>, which we learned about at the end of the last chapter.
Then, we’ll add support for heartbeats to enable faster failure detection.
Finally, we’ll discuss potential designs for progress reporting, improved logging, and running multiple tasks in the same container.</p>






<section data-type="sect1" data-pdf-bookmark="The Executor"><div class="sect1" id="idp14478096">
<h1>The Executor</h1>

<p>We’ve <a data-type="indexterm" data-primary="schedulers" data-secondary="defined" id="idp14479664"></a>already learned what a scheduler is: it’s the component that interacts with the Mesos masters and the framework’s clients, manages the running tasks, and handles failovers.
But what is an executor?
An executor has three <a data-type="indexterm" data-primary="executors" data-secondary="responsibilities" id="idp14481040"></a><a data-type="indexterm" data-primary="custom executors" data-see="executors" id="idp14481984"></a>responsibilities:</p>

<ul>
<li>
<p>Executing tasks as requested by the scheduler</p>
</li>
<li>
<p>Keeping the scheduler informed of the status of those tasks</p>
</li>
<li>
<p>Handling other requests from the scheduler</p>
</li>
</ul>
<div data-type="warning" epub:type="warning"><h1>You Probably Don’t Want to Do This</h1>
<p>Writing executors is very tedious.
Unfortunately, the only way to test whether the communication between your scheduler and executors is working is to start a new instance of your framework on a Mesos cluster.
Furthermore, correctly implementing health checks, process management, and concurrency is very tricky.
I strongly encourage you to think about how you could leverage the <code>CommandExecutor</code> rather than building your own executor.
Nevertheless, there are many problems that can only be solved by writing an executor.</p>
</div>








<section data-type="sect2" data-pdf-bookmark="Building a Work Queue’s Worker"><div class="sect2" id="idp14237456">
<h2>Building a Work Queue’s Worker</h2>

<p>Recall <a data-type="indexterm" data-primary="schedulers" data-secondary="work queue design" id="idp14238752"></a><a data-type="indexterm" data-primary="executors" data-secondary="versus work queue scheduler" id="idp14239760"></a><a data-type="indexterm" data-primary="executors" data-secondary="custom-built, reasons for" id="ex5rfcb"></a>that the <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#work_queue_scheduler_example">work queue scheduler</a> needs individual workers to execute the work items.
When we discussed it earlier, I suggested using an external queuing system, like Redis or RabbitMQ, that your worker processes could connect with directly, but that’s not the only way to build it.
Using a custom executor, you could instead send tasks directly to the executor.
If you’re using RabbitMQ or Redis, there’s not much advantage to doing this;
however, if you chose to store your state in a database like Postgres, you might not be able to easily scale to thousands of connections from every worker.
As a result, you could instead simply have the scheduler send multiple tasks to the same executor.</p>

<p>This has upsides and downsides. On the one hand, it could allow you to avoid adding yet another piece of infrastructure (a queuing layer) to solve your scaling problems.
On the other hand, it’s now your responsibility to implement the queuing semantics you want in your scheduler, which is much more challenging than relying on battle-tested queues.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Running Pickled Tasks"><div class="sect2" id="ex_running_pickled_tasks">
<h2>Running Pickled Tasks</h2>
<div data-type="tip"><h1>What Is a Pickled Task?</h1>
<p>Serialized <a data-type="indexterm" data-primary="pickled tasks" id="pt5"></a><a data-type="indexterm" data-primary="tasks" data-secondary="pickled" id="t5p"></a>code or configuration data that represents a task is known as a pickled task.
For example, sending RPCs requires a way to serialize a task’s parameters so that it can be transmitted across the network.
Many languages support sending bytecode, executable source code, or other data.
The term “pickle” comes from Python’s serialization library.</p>
</div>

<p>Many of us are using the <a data-type="indexterm" data-primary="Java Virtual Machine (JVM)" id="idp14250224"></a><a data-type="indexterm" data-primary="Docker" id="idp14250896"></a>Java Virtual Machine (JVM) or Docker to run our code.
Due to their potentially long initialize time, we may want to provide generated code to an executor.
For example, it might take 45 seconds to start a JVM with all the classes we need:
this is not something we’d like to do thousands of times per second.
In order to avoid the 45-second overhead for each task, it’d be nice to reuse the JVMs for tasks on the same host.
With a custom executor, it is possible to read raw bytes from each task and deserialize them into executable code.
Then, the executor can simply run that code, reusing the whole JVM.
For short tasks, this could be the difference between a task taking 10 seconds or 55 seconds:
this is one of the tricks that enables Spark’s low latency.</p>

<p>This approach can also be used to partially mitigate the challenge of writing an executor: you need only write the “pickle executor” once.
After you’ve written it, you can benefit from the dynamic resizability of the executor (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#multiple_tasks">“Multiple Tasks”</a>), and you won’t need to debug the communications again.
Note that this doesn’t require building a custom executor—you could also communicate pickled tasks through an out-of-band mechanism;
the only downside is that you’d lose the ability to dynamically resize <a data-type="indexterm" data-primary="pickled tasks" data-startref="pt5" id="idp14254240"></a><a data-type="indexterm" data-primary="tasks" data-secondary="pickled" data-startref="t5p" id="idp14255184"></a>the container.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Sharing Resources"><div class="sect2" id="idp14256656">
<h2>Sharing Resources</h2>

<p>Imagine <a data-type="indexterm" data-primary="executors" data-secondary="sharing resources" id="idp14257984"></a><a data-type="indexterm" data-primary="resources" data-secondary="sharing" data-seealso="multitenancy" id="idp14258992"></a><a data-type="indexterm" data-primary="tasks" data-secondary="sharing work" data-see="resources, sharing" id="idp14260208"></a>writing an application where each task reads a large static dataset and a small user-provided dataset, crunches the numbers, and returns the result.
This could be used for running a series of simulations or training a machine learning model.
A custom executor could be used to easily share a large static dataset, and still benefit from Mesos’s resource accounting and automatic cleanup when the executor terminates.
To do this, you could configure the custom executor to initialize itself by downloading the large dataset into its sandbox and reserving enough memory for it to remain in the Filesystem’s in-memory block cache.
Then, the tasks you launch on that executor could memory map that dataset, so that they get in-memory, direct access.
This approach would reduce the bandwidth and disk costs of copying that dataset more times than necessary.</p>

<p>Another time that a custom executor could share resources is when building general purpose graphics processing unit (GPGPU) <a data-type="indexterm" data-primary="general purpose graphics processing unit (GPGPU) applications" id="idp14372960"></a>applications.
Frequently, you’ll only have one GPGPU in each slave.
If you used the <code>CommandExecutor</code> and made the GPGPU a custom resource (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#configuring_custom_resources">“Configuring Custom Resources”</a>), you’d only be able to run one task at a time on each slave;
however, you might want to manage the sharing of that GPGPU in an application-specific way.
To do that, you could use the pickled tasks pattern described in the previous section to ensure each task programmatically exposes when it needs to use the GPGPU.
Then, the custom executor could run all the tasks within the same container, so that it can broker and scheduler the tasks’ use of the GPGPU.</p>

<p>These are just a few examples of the ways in which you might want to try to share resources between tasks.
Of course, there are many other ways in which tasks can share their work, from common subproblems to shared caches.
Sometimes, the most efficient way to take advantage of these structures is to run them in the same container, which requires writing an executor.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Better Babysitting"><div class="sect2" id="idp14376448">
<h2>Better Babysitting</h2>

<p>Mesos <a data-type="indexterm" data-primary="executors" data-secondary="babysitting" id="idp14377280"></a>is engineered to maximize availability:
when a scheduler crashes, it can automatically fail over;
when a slave is upgraded, executors can automatically reconnect to the new version;
when a network link goes down, the slave and executors continue to run with their last known instructions.
For some applications, however, this isn’t actually the behavior you want.</p>

<p>At large scale, partial and unexpected failures can reveal subtle bugs that weren’t identified during testing and QA.
To reduce the impact of these unknown, unpredictable issues, you can require that every executor checks in with the scheduler periodically, and if some executor misses too many check-ins, it can be presumed <code>LOST</code> by the scheduler.</p>

<p>Suppose that a slave loses connectivity to the scheduler, but not to its databases.
An executor running on that slave might be able to continue uninterrupted, even though the scheduler can’t receive messages when its tasks finish.
This can cause the system to appear stuck to an administrator.</p>

<p>To solve this, we could add a <a data-type="indexterm" data-primary="heartbeats/heartbeating" id="idp14381104"></a><a data-type="indexterm" data-primary="executors" data-secondary="heartbeating" id="idp14381808"></a>heartbeating mechanism to the executor:
the executor will periodically let the scheduler know it’s still running, so that if an executor misses several heartbeats, the scheduler can presume the executor <code>LOST</code> and restart it on a healthy slave.
This is known as babysitting—constant, active supervision that helps to detect failures faster.
A custom executor can implement heartbeating functionality with the Mesos messaging APIs, ensuring that the overall system remains healthy.</p>
<div data-type="tip"><h1>Mesos-Native Heartbeating</h1>
<p>In an upcoming version after 0.25, Mesos will add native support for three types of health checks—HTTP requests, TCP connection checks, and running a command.
When these are enabled in the <code>TaskInfo</code>, they’ll send periodic <code>StatusUpdate</code>s. You might recognize these as the health checks that Marathon provides (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#health_checks">“Health Checks”</a>). The Mesos project often integrates useful functionality from frameworks back into the core.
See <a href="http://bit.ly/MESOS2533">MESOS-2533</a> and <a href="http://bit.ly/MESOS3567">MESOS-3567</a> for updates.</p>
</div>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Augmented Logging"><div class="sect2" id="idp14388752">
<h2>Augmented Logging</h2>

<p>The <a data-type="indexterm" data-primary="executors" data-secondary="augmented logging" id="idp14390000"></a><a data-type="indexterm" data-primary="logging, augmented" id="idp14391392"></a>final example of a custom executor’s usefulness is in augmenting the logging facilities of Mesos.
Mesos writes each process’s <code>stdout</code> and <code>stderr</code> to local files in the executor sandbox.
With a custom executor, the process’s <code>stdout</code> and <code>stderr</code> can <a data-type="indexterm" data-primary="stdout" id="idp14394032"></a><a data-type="indexterm" data-primary="stderr" id="idp14394768"></a>be forwarded to a centralized log repository or data storage location (such as HDFS, S3, or Logstash), allowing you to upgrade all <code>CommandExecutor</code>-based tasks to centrally store their logs.
However, this could also be accomplished by running a log redirector such as <a href="http://linux.die.net/man/1/logger"><code>logger</code></a>, which connects a process’s <code>stdout</code> to <code>syslog</code>, <a data-type="indexterm" data-primary="syslog" id="idp14397888"></a>thus avoiding the need to make a custom <a data-type="indexterm" data-primary="executors" data-secondary="custom-built, reasons for" data-startref="ex5rfcb" id="idp14398752"></a>executor.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Rewriting the CommandExecutor"><div class="sect1" id="idp14478368">
<h1>Rewriting the CommandExecutor</h1>

<p>Now <a data-type="indexterm" data-primary="CommandExecutor" id="idp14401920"></a><a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" id="ex5rtce"></a>that we’ve seen some examples of when we’d want to write an executor, let’s take a look at how to actually do so.
We’re going to start by writing something very simple: an executor that is compatible with the built-in <code>CommandExecutor</code>.</p>

<p>We’ll start by looking at the skeleton of <code>MyExecutor</code>, our <code>CommandExecutor</code> clone. The imports and class declaration are <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="imports and class declaration" id="idp14405904"></a>presented in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_class_skeleton">Example&nbsp;5-1</a>.</p>
<div id="executor_class_skeleton" data-type="example">
<h5><span class="label">Example 5-1. </span>Imports and class declaration of MyExecutor</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">com</code><code class="o">.</code><code class="na">example</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.apache.mesos.*</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.apache.mesos.Protos.*</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.util.*</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.io.File</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.json.*</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.lang.ProcessBuilder.Redirect</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">MyExecutor</code><code> </code><code class="kd">implements</code><code> </code><code class="n">Executor</code><code class="o">,</code><code> </code><code class="n">Runnable</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="c1">// We'll discuss the inner bits as we go
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We’ll use <a data-type="indexterm" data-primary="JSON" id="idp14794288"></a>JSON to encode the task we want to run. This JSON will be read from the <code>TaskInfo</code> so that we know what to invoke.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The <code>ProcessBuilder</code> is <a data-type="indexterm" data-primary="ProcessBuilder" id="idp14798368"></a>the most convenient way to start a process in Java; we’ll use it to launch our application, and we’ll redirect the application’s <code>stdout</code> and <code>stderr</code> to separate log files from our executor.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Since there’s no callback API for finding out when a process finishes, we’ll start a thread to wait for the process—that’s why we implement<a data-type="indexterm" data-primary="Runnable" id="idp14834096"></a> <code>Runnable</code>.</p></dd>
</dl>

<p>The <code>main</code> method is <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="main method" id="idp14835984"></a>shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#main_of_myexecutor">Example&nbsp;5-2</a>.</p>
<div id="main_of_myexecutor" data-type="example" class="pagebreak-before">
<h5><span class="label">Example 5-2. </span>main of MyExecutor</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code> <code class="o">...</code> <code class="n">args</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
    <code class="n">Executor</code> <code class="n">executor</code> <code class="o">=</code> <code class="k">new</code> <code class="n">MyExecutor</code><code class="o">();</code>
    <code class="n">ExecutorDriver</code> <code class="n">driver</code> <code class="o">=</code> <code class="k">new</code> <code class="n">MesosExecutorDriver</code><code class="o">(</code><code class="n">executor</code><code class="o">);</code>
    <code class="n">driver</code><code class="o">.</code><code class="na">run</code><code class="o">();</code>
<code class="o">}</code></pre></div>

<p>Although it’s tempting to try to configure some things via the command line passed in to <code>main</code>, you’ll be thankful that all executor configuration comes from the Mesos APIs—this will simplify development in the long run by ensuring all configuration comes from a single source.
When the scheduler has total control over the executors, this simplifies development:
global (scheduler) changes and local (executor) changes are now managed from a single codebase, the scheduler’s.
This makes developing new features easier, and it simplifies operations, since the administrators need only to modify and reload the scheduler to make framework-wide changes.</p>

<p>As with the scheduler, in the <code>main</code> of our executor we create a corresponding driver to communicate with Mesos.
Unfortunately, this driver turns out to be a major annoyance.
When the framework calls <code>MesosExecutorDriver.start()</code>, it needs to have been started by a slave.
The slave injects an environment variable, <code>MESOS_SLAVE_PID</code>, <a data-type="indexterm" data-primary="MESOS_SLAVE_PID" id="idp14875168"></a>which is used to allow the executor to connect to the slave that started it and begin participating in the Mesos protocols.
As a result, if you want to test your executor, you need to implement a mock <code>ExecutorDriver</code>.
If you forget to do this, you’ll see a weird stack trace like this, regardless of what language you’re developing your executor in:</p>

<pre data-type="programlisting">F0605 21:32:01.538770 18480 os.hpp:173] Expecting 'MESOS_SLAVE_PID' in
environment variables
*** Check failure stack trace: ***
    @     0x7fc535912dfd  google::LogMessage::Fail()
    @     0x7fc535914c3d  google::LogMessage::SendToLog()
    @     0x7fc5359129ec  google::LogMessage::Flush()
    @     0x7fc535915539  google::LogMessageFatal::~LogMessageFatal()
    @     0x7fc5352c9ff0  os::getenv()
    @     0x7fc53534139b  mesos::MesosExecutorDriver::start()
    @     0x7fc5359068ee  Java_org_apache_mesos_MesosExecutorDriver_start
    @     0x7fc5390127f8  (unknown)</pre>

<p>We’ll block the main thread until our driver completes—when the task is finished, we’ll call <code>driver.stop()</code> elsewhere <a data-type="indexterm" data-primary="driver.stop()" id="idp14879120"></a>to ensure the executor exits correctly.
Since executors decouple the notion of tasks from the containers and processes that run them, it’s easy to forget that sending a <code>TASK_FINISHED</code> <a data-type="indexterm" data-primary="TASK_FINISHED" id="idp14880560"></a>doesn’t terminate the executor.
You should always have executors shut themselves down once they’ve finished their work, or have the scheduler explicitly manage their lifetime by killing their <a data-type="indexterm" data-primary="canary tasks" id="idp14881632"></a><a data-type="indexterm" data-primary="tasks" data-secondary="canary" id="idp14882304"></a>canary tasks (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#canary_tasks">“Canary tasks”</a>).</p>

<p>Just like for schedulers, many of the <a data-type="indexterm" data-primary="callbacks, ignoring" id="cb5i"></a>executor callbacks aren’t important to handle. <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ignoring_bunches_of_callbacks">Example&nbsp;5-3</a> lists the callbacks we can ignore for <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="ignoring callbacks" id="ex5rtceicb"></a>now.</p>
<div id="ignoring_bunches_of_callbacks" data-type="example">
<h5><span class="label">Example 5-3. </span>Ignoring callbacks</h5>

<pre data-type="programlisting" data-code-language="java"><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">frameworkMessage</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">data</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><code class="o">}</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">registered</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">ExecutorInfo</code><code> </code><code class="n">executorInfo</code><code class="o">,</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                           </code><code class="n">FrameworkInfo</code><code> </code><code class="n">frameworkInfo</code><code class="o">,</code><code> </code><code class="n">SlaveInfo</code><code> </code><code class="n">slaveInfo</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"registered executor "</code><code> </code><code class="o">+</code><code> </code><code class="n">executorInfo</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">disconnected</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><code class="o">}</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">shutdown</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><code class="o">}</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">reregistered</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">SlaveInfo</code><code> </code><code class="n">slaveInfo</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><code class="o">}</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO2-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO2-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">error</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">java</code><code class="o">.</code><code class="na">lang</code><code class="o">.</code><code class="na">String</code><code> </code><code class="n">message</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><code class="o">}</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO2-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO2-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Framework messages <a data-type="indexterm" data-primary="framework messages" id="fm5"></a>are a simple (but not guaranteed, as we’ll see in the upcoming sidebar) way to communicate between the scheduler and its executors by sending arbitrary data serialized as bytes. Note that framework messages aren’t routed to particular tasks.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>This is invoked the first time that an executor connects to the slave. The most common thing to do is get data from the <code>ExecutorInfo</code>, since that can carry executor configuration information in its <code>data</code> field, which contains arbitrary bytes.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>This is invoked when the slave disconnects from the executor, which typically indicates a slave restart. Rarely should an executor need to do anything special here.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO2-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO2-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>This callback informs the executor to gracefully shut down. It is called when a slave restart fails to complete within the grace period, or when the executor’s framework completes. The executor will be forcibly killed if shutdown doesn’t complete within 5 seconds (the default, configurable on the slave command line with <code>--executor_shutdown_grace_period</code>).</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO2-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO2-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>This callback is invoked after a successful slave restart; it contains the new slave’s information.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO2-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO2-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>This callback is invoked after a fatal error occurs. When this callback is invoked, the driver is no longer running.</p></dd>
</dl>

<p>As you can see, the executor can actually be a full participant in the slave checkpointing and recovery system; however, you can ignore this for almost all executors.
We’ll make use of some of these callbacks later, but for now, let’s continue by looking at how to actually <a data-type="indexterm" data-primary="executors" data-secondary="callbacks, ignoring" data-startref="ex5ci" id="idp15105296"></a><a data-type="indexterm" data-primary="callbacks, ignoring" data-startref="cb5i" id="idp15106384"></a>launch a task.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="framework_message">
<h5>Framework Messages Are Unreliable</h5>
<p><code>sendFrameworkMessage</code> <a data-type="indexterm" data-primary="sendFrameworkMessage" id="idp15109520"></a>is just a thin wrapper around the libprocess semantics (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#libprocess_and_actor_model">“Libprocess and the Actor Model”</a> for details), so delivery isn’t guaranteed.
This means that if you use <code>sendFrameworkMessage</code>, your framework must not rely on any guaranteed delivery of messages—you need to handle retries yourself.
But what’s an unreliable delivery useful for, anyway?
In spite of the lack of guarantees, the messages actually will be delivered in all but the most extreme failure conditions of the cluster.
This means that <code>sendFrameworkMessage</code> is great for all sorts of <a data-type="indexterm" data-primary="advisory messages" id="idp15112096"></a>advisory messages.</p>

<p>One such advisory message is <a data-type="indexterm" data-primary="heartbeats/heartbeating" id="idp15113088"></a>a task heartbeat. Your scheduler wants to know whether its tasks are continuing to make progress, or whether they’ve stalled or become deadlocked for whatever reason.
To detect this, simply send a framework message once per minute to the scheduler, and have the scheduler track which executors it hasn’t heard from for 5 or 10 minutes.
If a message is not delivered for some transient reason, we can assume the next one will probably succeed; however, if no messages are delivered over an extended period, that implies that there is a real issue with the executor (or that the network’s having other problems).
We’ll learn how to implement this in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_adding_heartbeats">“Adding Heartbeats”</a>.</p>

<p>Another use for framework messages is for providing <a data-type="indexterm" data-primary="updates" id="idp15115616"></a><a data-type="indexterm" data-primary="progress updates" id="idp15116224"></a>progress updates that will be consumed by users in the UI.
There are many communication strategies that ensure that it’s not problematic if one update is missed.
For instance, if each update is a completion percentage, the latest update will always subsume earlier updates (since it should always be greater than or equal to the previous value).
Generally, framework messages are good for progress reporting when newer updates supersede earlier ones, and the updates are being used for human, rather than programmatic, consumption.</p>
</div></aside>

<p>We’ll <a data-type="indexterm" data-primary="framework messages" data-startref="fm5" id="idp15117888"></a>start by looking at what data we’ll need to access throughout the executor’s implementation.
These are global variables that are defined in the <code>MyExecutor</code> class (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_class_skeleton">Example&nbsp;5-1</a>):</p>
<dl>
<dt><code>Process proc</code></dt>
<dd>
<p>We’ll need to store a reference to the process we launched so that we can wait for it to complete.</p>
</dd>
<dt><code>TaskID taskId</code></dt>
<dd>
<p>We also need to communicate the task’s status to Mesos: the driver API to communicate with our scheduler requires the <code>TaskID</code> as an argument.</p>
</dd>
<dt><code>ExecutorDriver driver</code></dt>
<dd>
<p>Of course, we’ll want to be able to use the driver, so we’ll store a reference to it as well.</p>
</dd>
</dl>

<p>Well-behaved executors should keep Mesos up-to-date with the status of their tasks.
Since sending <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="ignoring callbacks" data-startref="ex5rtceicb" id="idp15125712"></a><a data-type="indexterm" data-primary="status updates" id="idp15127040"></a><a data-type="indexterm" data-primary="updates" id="idp15127648"></a>status updates has some boilerplate, we’ll write a convenience method, shown <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="status update helper" id="idp15128384"></a>in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#status_update_convenience_method">Example&nbsp;5-4</a>.</p>
<div id="status_update_convenience_method" data-type="example">
<h5><span class="label">Example 5-4. </span>Status update helper</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">private</code> <code class="kt">void</code> <code class="nf">statusUpdate</code><code class="o">(</code><code class="n">TaskState</code> <code class="n">state</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">TaskStatus</code> <code class="n">status</code> <code class="o">=</code> <code class="n">TaskStatus</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">()</code>
        <code class="o">.</code><code class="na">setTaskId</code><code class="o">(</code><code class="n">taskId</code><code class="o">)</code>
        <code class="o">.</code><code class="na">setState</code><code class="o">(</code><code class="n">state</code><code class="o">)</code>
        <code class="o">.</code><code class="na">build</code><code class="o">()</code>
    <code class="n">driver</code><code class="o">.</code><code class="na">sendStatusUpdate</code><code class="o">(</code><code class="n">status</code><code class="o">);</code>
<code class="o">}</code></pre></div>

<p>Here, we simply construct a bare-bones task status and send it via the driver.
Sometimes, you’ll want to communicate additional information.
Like most Mesos protobufs, <code>TaskStatus</code> <a data-type="indexterm" data-primary="TaskStatus" id="idp15170416"></a>supports arbitrary data, as well as a human-readable message.</p>

<p>In order to keep this example simple, our executor will only support running a single task, after which it will exit.
We’ll enforce this invariant with a helper function, <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="ensuring a single task" id="idp15171760"></a>as seen in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ensure_one_launch_method">Example&nbsp;5-5</a>.</p>
<div id="ensure_one_launch_method" data-type="example">
<h5><span class="label">Example 5-5. </span>Ensuring a single task</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">private</code><code> </code><code class="kt">boolean</code><code> </code><code class="nf">ensureOneLaunch</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">TaskID</code><code> </code><code class="n">id</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="o">(</code><code class="k">this</code><code class="o">.</code><code class="na">taskId</code><code> </code><code class="o">!</code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="n">TaskStatus</code><code> </code><code class="n">status</code><code> </code><code class="o">=</code><code> </code><code class="n">TaskStatus</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setTaskId</code><code class="o">(</code><code class="n">id</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO3-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO3-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>            </code><code class="o">.</code><code class="na">setState</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_ERROR</code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">setMessage</code><code class="o">(</code><code class="s">"this executor only can run a single task"</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO3-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO3-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>            </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">sendStatusUpdate</code><code class="o">(</code><code class="n">status</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="kc">false</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code> </code><code class="k">else</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="kc">true</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We’ll return <code>true</code> if this is the first task, and <code>false</code> if it should be ignored.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The code that launches our task will set the value of <code>this.taskId</code>. Thus, we can assume that if <code>this.taskId</code> was already set, we’ve already launched a task, so this one is invalid.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO3-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO3-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Note that we use the <code>TaskID</code> <a data-type="indexterm" data-primary="TaskID" id="idp15336176"></a>of the newly requested task, not the running task.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO3-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO3-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>We’ll take advantage of the human-readable message in the status update to help the user diagnose why the task launch resulted in an error.</p></dd>
</dl>

<p><a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#start_process_defn">Example&nbsp;5-6</a> illustrates how we actually launch a process.
We’ll take the configuration JSON object as an input, and we’ll return the newly started process.
To help separate our logs, we’ll redirect the task process’s <code>stdout</code> and <code>stderr</code> to different files than the executor’s <code>stdout</code> and <code>stderr</code>.
For now, the task JSON will have only a single key: <code>"cmd"</code>, which is the command line to run the task.
We’ll invoke the task with a shell for <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="starting a process" id="idp15322720"></a>simplicity.</p>
<div id="start_process_defn" data-type="example">
<h5><span class="label">Example 5-6. </span>Starting a process</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">private</code><code> </code><code class="n">Process</code><code> </code><code class="nf">startProcess</code><code class="o">(</code><code class="n">JSONObject</code><code> </code><code class="n">cfg</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">Exception</code><code class="o">{</code><code>
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code><code> </code><code class="n">cmdArgs</code><code> </code><code class="o">=</code><code> </code><code class="n">Arrays</code><code class="o">.</code><code class="na">asList</code><code class="o">(</code><code class="s">"bash"</code><code class="o">,</code><code> </code><code class="s">"-c"</code><code class="o">,</code><code> </code><code class="n">cfg</code><code class="o">.</code><code class="na">getString</code><code class="o">(</code><code class="s">"cmd"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-1a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-1a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="n">ProcessBuilder</code><code> </code><code class="n">pb</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ProcessBuilder</code><code class="o">(</code><code class="n">cmdArgs</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-2a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-2a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>    </code><code class="n">File</code><code> </code><code class="n">stdoutFile</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">File</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">getenv</code><code class="o">(</code><code class="s">"MESOS_DIRECTORY"</code><code class="o">)</code><code class="o">,</code><code> </code><code class="s">"child_stdout"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-3a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="n">File</code><code> </code><code class="n">stderrFile</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">File</code><code class="o">(</code><code class="n">System</code><code class="o">.</code><code class="na">getenv</code><code class="o">(</code><code class="s">"MESOS_DIRECTORY"</code><code class="o">)</code><code class="o">,</code><code> </code><code class="s">"child_stderr"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="n">pb</code><code class="o">.</code><code class="na">redirectOutput</code><code class="o">(</code><code class="n">Redirect</code><code class="o">.</code><code class="na">to</code><code class="o">(</code><code class="n">stdoutFile</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-4a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>    </code><code class="n">pb</code><code class="o">.</code><code class="na">redirectError</code><code class="o">(</code><code class="n">Redirect</code><code class="o">.</code><code class="na">to</code><code class="o">(</code><code class="n">stderrFile</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">pb</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-1a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-1a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We build the argument vector for the process we will launch.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-2a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-2a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The <code>ProcessBuilder</code> API is a simple way to launch a process in Java.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-3a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-3a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>The path to the executor’s scratch space is placed into the environment variable <code>MESOS_DIRECTORY</code> by the slave. It’s best to write any output into this directory, since it’s automatically garbage collected when the slave needs to reclaim disk space after the executor exits.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-4a" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-4a"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>We redirect the task process’s output.</p></dd>
</dl></div>

<p>At this point, we’re finally ready to handle launching a task.
To do so, we must implement the <code>launchTask</code> callback <a data-type="indexterm" data-primary="launchTasks" id="idp15502880"></a><a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="implementing launchTask" id="ex5rtceilt"></a>of the <code>Executor</code> interface (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#launch_task_executor_impl">Example&nbsp;5-7</a>).</p>
<div id="launch_task_executor_impl" data-type="example">
<h5><span class="label">Example 5-7. </span>Implementing launchTask</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">launchTask</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">TaskInfo</code><code> </code><code class="n">task</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="k">this</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-1c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-1c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="k">try</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="o">(</code><code class="o">!</code><code class="n">ensureOneLaunch</code><code class="o">(</code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">task</code><code class="o">.</code><code class="na">getTaskId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-2c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-2c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                </code><code class="k">return</code><code class="o">;</code><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>
</code><code>            </code><code class="k">this</code><code class="o">.</code><code class="na">taskId</code><code> </code><code class="o">=</code><code> </code><code class="n">task</code><code class="o">.</code><code class="na">getTaskId</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-3c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-3c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>            </code><code class="k">this</code><code class="o">.</code><code class="na">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-3c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>
</code><code>            </code><code class="n">statusUpdate</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_STARTING</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-4c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-4c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>
</code><code>            </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">taskData</code><code> </code><code class="o">=</code><code> </code><code class="n">task</code><code class="o">.</code><code class="na">getData</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">toByteArray</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-5c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-5c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>            </code><code class="n">JSONObject</code><code> </code><code class="n">cfg</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">JSONObject</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">String</code><code class="o">(</code><code class="n">taskData</code><code class="o">,</code><code> </code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="k">this</code><code class="o">.</code><code class="na">proc</code><code> </code><code class="o">=</code><code> </code><code class="n">startProcess</code><code class="o">(</code><code class="n">cfg</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-3c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-6c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-6c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>
</code><code>            </code><code class="n">statusUpdate</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_RUNNING</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-4c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>
</code><code>            </code><code class="n">Thread</code><code> </code><code class="n">t</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Thread</code><code class="o">(</code><code class="k">this</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-7c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-7c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code>            </code><code class="n">t</code><code class="o">.</code><code class="na">setDaemon</code><code class="o">(</code><code class="kc">true</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="n">t</code><code class="o">.</code><code class="na">start</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">Exception</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">e</code><code class="o">.</code><code class="na">printStackTrace</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-8c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-8c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-1c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-1c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>To protect access to all global variables, we put a mutex around all the concurrent code in the executor.<sup><a data-type="noteref" id="idp15583072-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15583072" class="totri-footnote">1</a></sup></p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-2c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-2c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We check that this is the first task we’ve received. If it isn’t, we’ll do nothing and just <code>return</code>.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-3c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-3c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We store a few things to which we have access in this callback into global variables: the <code>TaskID</code>, the <code>ExecutorDriver</code>, and the <code>Process</code>, as explained earlier.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-4c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-4c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>As we process the task, we keep Mesos informed of our progress.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-5c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-5c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>The details of the task must be extracted and parsed.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-6c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-6c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>Finally, we can start the process.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-7c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-7c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>We’ll need to watch the process to know when it completes, and whether it completes successfully. We’ll look at the implementation of this completion monitoring thread next.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-8c" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-8c"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a></dt>
<dd><p>In real production code, you should try to make it easier to diagnose what goes wrong in executor code. This is easiest to do by also transmitting exceptions via <code>StatusUpdate</code> if they’re fatal.</p></dd>
</dl></div>

<p>At <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="implementing launchTask" data-startref="ex5rtceilt" id="idp15821792"></a>this point, we nearly know the entirety of how our executor goes about managing the lifecycle of its task.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_basic_thread_impl">Example&nbsp;5-8</a> illustrates how we track the completion of the <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="waiting for process to finish" id="idp15824112"></a>task.</p>
<div id="executor_basic_thread_impl" data-type="example">
<h5><span class="label">Example 5-8. </span>Waiting for the process to finish</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">run</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">exitCode</code><code class="o">;</code><code>
</code><code>    </code><code class="k">try</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">exitCode</code><code> </code><code class="o">=</code><code> </code><code class="n">proc</code><code class="o">.</code><code class="na">waitFor</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">Exception</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">exitCode</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">99</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="k">this</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">proc</code><code> </code><code class="o">=</code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>            </code><code class="k">return</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>        </code><code class="n">proc</code><code> </code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">exitCode</code><code> </code><code class="o">=</code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>            </code><code class="n">statusUpdate</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_FINISHED</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code> </code><code class="k">else</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code>            </code><code class="n">driver</code><code class="o">.</code><code class="na">sendStatusUpdate</code><code class="o">(</code><code class="n">TaskStatus</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setTaskId</code><code class="o">(</code><code class="n">taskId</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setState</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_FAILED</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">setMessage</code><code class="o">(</code><code class="s">"Process exited with code "</code><code> </code><code class="o">+</code><code> </code><code class="n">exitCode</code><code class="o">)</code><code>
</code><code>                    </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">stop</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO4-8" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO4-8"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p><code>waitFor()</code> will block until the process terminates, and it returns the process’s exit code.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>If <code>waitFor()</code> throws an exception for some reason, we’ll assume something went terribly wrong and use a distinctive exit code to signal that.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>As mentioned before, the mutex on <code>this</code> protects access to the global variables.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>If we reach this point and <code>proc</code> is <code>null</code>, this is a special signal that means that process was killed by <code>killTask</code> (which we haven’t seen yet). In that case, our work’s already done.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>By setting <code>proc</code> to <code>null</code>, we set that special signal from above.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>When the process exits with a successful status, we report that the task finished (remember, <code>FINISHED</code> is a successful status in Mesos).</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>Otherwise, we know that the task failed, and so we send a <code>FAILED</code> status.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO4-8" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO4-8"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a></dt>
<dd><p>We <code>stop()</code> the executor driver at this point, so that our <code>main</code> function can return and the executor will gracefully shut down.</p></dd>
</dl>

<p>We’ve seen how our new executor handles accepting a task, starting a process, and sending the appropriate status updates when that process finishes.
All we have left is to handle requests from the scheduler to kill the task early.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_killtask_impl">Example&nbsp;5-9</a> shows how to handle <a data-type="indexterm" data-primary="killTask" id="idp15980688"></a><a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="implementing killTask" id="idp15981360"></a>a <code>killTask</code> message.</p>
<div id="executor_killtask_impl" data-type="example">
<h5><span class="label">Example 5-9. </span>Implementation of killTask</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">killTask</code><code class="o">(</code><code class="n">ExecutorDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">TaskID</code><code> </code><code class="n">taskId</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="k">this</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-1e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-1e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">proc</code><code> </code><code class="o">!</code><code class="o">=</code><code> </code><code class="kc">null</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-2e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-2e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                </code><code class="o">&amp;</code><code class="o">&amp;</code><code> </code><code class="n">taskId</code><code class="o">.</code><code class="na">equals</code><code class="o">(</code><code class="k">this</code><code class="o">.</code><code class="na">taskId</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-3e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-3e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>            </code><code class="n">proc</code><code class="o">.</code><code class="na">destroy</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-4e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-4e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>            </code><code class="n">statusUpdate</code><code class="o">(</code><code class="n">TaskState</code><code class="o">.</code><code class="na">TASK_KILLED</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-5e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-5e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>            </code><code class="n">proc</code><code> </code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">stop</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-1e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-1e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>As mentioned before, we must protect all access to global variables with a mutex.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-2e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-2e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>If <code>proc</code> is <code>null</code>, then the process has already died, either because it finished or because of an earlier <code>killTask</code>.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-3e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-3e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We should also ensure that the task we’re running is the task we’re supposed to kill. This isn’t strictly necessary for our one-task executor, but it protects us from programming errors in the scheduler, in which we send kill messages to the wrong executor.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-4e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-4e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>We kill the process.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-5e" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-5e"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>We inform Mesos that the task was killed as per the user’s request. Note the possible race condition if the thread crashes after calling <code>destroy()</code> but before sending the status update: Mesos might believe the task is still running. This is why we set <code>proc</code> to <code>null</code> afterward—it will ensure that a second kill message from the scheduler will cause the <code>TASK_KILLED</code> message to be resent.</p></dd>
</dl>
</div>

<p>We have now seen the entirety of how to implement a basic executor with functionality similar to the <code>CommandExecutor</code>.
Of course, you might be wondering how to actually use this executor from your scheduler.
To integrate this executor with our example scheduler from <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#chapter_creating_new_scheduler">Chapter&nbsp;4</a>, we’ll simply need to update the <code>makeTask</code> method of the <code>Job</code> object, as <a data-type="indexterm" data-primary="makeTask" id="idp16209872"></a><a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-tertiary="makeTask updating" id="ex5rtceilt2"></a>shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#custom_executor_maketask">Example&nbsp;5-10</a>.</p>
<div id="custom_executor_maketask" data-type="example">
<h5><span class="label">Example 5-10. </span>Enhanced makeTask for our new executor</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="n">TaskInfo</code><code> </code><code class="nf">makeTask</code><code class="o">(</code><code class="n">SlaveID</code><code> </code><code class="n">targetSlave</code><code class="o">,</code><code> </code><code class="n">FrameworkID</code><code> </code><code class="n">fid</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">TaskID</code><code> </code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">TaskID</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="k">this</code><code class="o">.</code><code class="na">id</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">ExecutorID</code><code> </code><code class="n">eid</code><code> </code><code class="o">=</code><code> </code><code class="n">ExecutorID</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="k">this</code><code class="o">.</code><code class="na">id</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">CommandInfo</code><code> </code><code class="n">ci</code><code> </code><code class="o">=</code><code> </code><code class="n">CommandInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="s">"java -jar /path/to/custom/executor.jar"</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">ExecutorInfo</code><code> </code><code class="n">executor</code><code> </code><code class="o">=</code><code> </code><code class="n">ExecutorInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="o">.</code><code class="na">setExecutorId</code><code class="o">(</code><code class="n">eid</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setFrameworkId</code><code class="o">(</code><code class="n">fid</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">setCommand</code><code class="o">(</code><code class="n">ci</code><code class="o">)</code><code>
</code><code>        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="n">JSONObject</code><code> </code><code class="n">cfg</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">JSONObject</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">try</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">cfg</code><code class="o">.</code><code class="na">put</code><code class="o">(</code><code class="s">"cmd"</code><code class="o">,</code><code> </code><code class="k">this</code><code class="o">.</code><code class="na">command</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">TaskInfo</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>            </code><code class="c1">// ... Elided unchanged code ... </code><a class="co" id="co_building_a_mesos_executor_CO5-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code class="c1">
</code><code>            </code><code class="o">.</code><code class="na">setExecutor</code><code class="o">(</code><code class="n">executor</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>            </code><code class="o">.</code><code class="na">setData</code><code class="o">(</code><code class="n">ByteString</code><code class="o">.</code><code class="na">copyFrom</code><code class="o">(</code><code class="n">cfg</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getBytes</code><code class="o">(</code><code class="s">"UTF-8"</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO5-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO5-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>            </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">Exception</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">e</code><code class="o">.</code><code class="na">printStackTrace</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">throw</code><code> </code><code class="k">new</code><code> </code><code class="nf">RuntimeException</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We need to explicitly assign our executor an ID. The <code>CommandExecutor</code> uses the same ID for the task and executor, so we’ll do that too.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>You’ll need to build the custom executor’s <em>.jar</em> and distribute it to your slaves. In the next section, we’ll look at some approaches to this.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>The <code>ExecutorInfo</code> requires several pieces of information, including the <code>FrameworkID</code>. The scheduler was trivially modified to pass it to <code>makeTask</code>.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>The unchanged configuration to the <code>TaskInfo</code> is not repeated here (refer back to <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#maketask_urb">Example&nbsp;4-3</a>). We did, however, drop the <code>.setCommand(...)</code>, since now we’re setting the executor.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p><code>TaskInfo</code> must have exactly one of the command or executor set, but never both—that’s an error.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO5-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO5-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>Finally, we include the JSON configuration of the task.</p></dd>
</dl>

<p>That’s all there is to it!
Now we’ve enhanced our scheduler from <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#chapter_creating_new_scheduler">Chapter&nbsp;4</a> to support our new, custom <a data-type="indexterm" data-primary="executors" data-secondary="reimplementing the CommandExecutor" data-startref="ex5rtce" id="idp16388176"></a>executor.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Bootstrapping Executor Installation"><div class="sect1" id="idp14400848">
<h1>Bootstrapping Executor Installation</h1>

<p>One <a data-type="indexterm" data-primary="executors" data-secondary="deployment solutions" id="ex5ds"></a><a data-type="indexterm" data-primary="executors" data-secondary="scalability issues" id="ex5si"></a>challenge in creating your own executor is deploying the binaries everywhere.
We’ll look at four solutions to this problem, and weigh their pros and cons:</p>
<dl>
<dt>Use HDFS, S3, or another non-POSIX store</dt>
<dd>
<p>Any Mesos executor can list a set of URIs that will be downloaded and optionally unzipped into the local working directory before the executor is launched.
Mesos has built-in support for HTTP, FTP, and HDFS stores to download files (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#configuring_process_environment">“Configuring the process’s environment”</a>).
As a result, you can easily host your applications on a local <a data-type="indexterm" data-primary="HDFS storage" id="idp16257552"></a>HDFS cluster, <a data-type="indexterm" data-primary="Amazon S3 storage" id="idp16258352"></a>Amazon S3, or another data store to avoid the need to deploy any new technologies, as the other strategies might require.
The challenge is that this data store must be sufficiently scalable to be able to deliver the container to every concurrently launching task.
A common reason that a newly developed framework falls over during scalability testing is that it launches hundreds of executors simultaneously;
these executors all simultaneously request their binaries from a single server, which kills the server.
This is commonly known as <a data-type="indexterm" data-primary="thundering herd problem" id="idp16259744"></a>the <a href="http://bit.ly/thunderingherdwiki">thundering herd problem</a>.
Make sure that you sufficiently replicate the server that offers the binaries, or use a system with proven scalability, like S3.</p>

<p>The “next-level” version of this approach is to actually host the binaries in the scheduler process itself, by having the scheduler run an embedded HTTP server.
Of course, this will exacerbate the thundering herd problem.
The solution is to have the scheduler stagger the launch times of tasks, to ensure that the server is never overwhelmed.
This is done by waiting for a random duration before submitting the launch to Mesos.</p>
</dd>
<dt>Use a <a data-type="indexterm" data-primary="configuration management systems" id="idp16526464"></a>configuration management system</dt>
<dd>
<p>Many Mesos clusters will be deployed using a configuration management system like <a data-type="indexterm" data-primary="Chef" id="idp16527888"></a><a data-type="indexterm" data-primary="Puppet" id="idp16528592"></a><a data-type="indexterm" data-primary="Ansible" id="idp16529264"></a>Chef, Puppet, or Ansible.
If this applies to your cluster, then you can also use that system to push your executor binaries out to every slave in your Mesos cluster.
The benefit to this is that you can ensure that the binaries are always immediately available to launch tasks—you don’t need to wait for them to download or run the risk of an untimely network failure that causes your tasks to become <code>LOST</code>.
The downside, however, is that deploying and upgrading to a new version of the executor is more difficult.
Of course, you’ll want to version every deployed executor (to ensure that multiple versions can be running concurrently, during upgrades);
nevertheless, it can be extremely tedious during development to wait for the executor to be pushed out to all slaves.</p>
</dd>
<dt>Use a shared POSIX filesystem</dt>
<dd>
<p>Often, <a data-type="indexterm" data-primary="POSIX shared filesystems" id="idp16532528"></a><a data-type="indexterm" data-primary="shared filesystems" id="idp16533232"></a>a compute cluster already has a shared POSIX-compatible filesystem.
Some popular choices here are <a href="http://bit.ly/NFSwiki">NFS</a> and <a href="http://www.gluster.org/">GlusterFS</a>.
The shared filesystem approach is similar to the configuration management approach: in both cases, your executor exists at a known path.
The benefit of having that path be on a shared filesystem is that you don’t need to wait for the configuration management system to actually push the binaries out to every slave;
instead, you can immediately launch the executor as soon as it has been copied onto the shared filesystem.
The downside is that it can be difficult to scale the shared filesystem, and if it fails, your entire cluster goes down.</p>
</dd>
<dt>Use Docker</dt>
<dd>
<p>Mesos has first-class support for <a data-type="indexterm" data-primary="Docker" data-secondary="for executor deployment" id="idp16244624"></a>Docker containers (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#docker_support">“Using Docker”</a>), which are themselves a way to ship around complete binary images.
Once you Dockerize your executor, you can start that container on any slave in the cluster.
The challenge here is the Docker repository:
you must find a Docker repository (be it <a href="https://hub.docker.com/">Docker Hub</a> or a self-hosted one) that can host your Docker containers
with sufficient scalability and security.
The most common pitfall with this approach is the time to download a Docker <a data-type="indexterm" data-primary="executors" data-secondary="scalability issues" data-startref="ex5si" id="idp16247664"></a>container:
when a Docker container takes 10 minutes to download, the executor launch might time out.
This has the symptom of unpredictable, transient <code>LOST</code> tasks.</p>
</dd>
</dl>

<p>Now that we’ve reviewed several options, how do you choose the right one?
If you are already heavily using Docker, then I recommend continuing with Docker to host your Mesos executors.
Otherwise, if you have a shared POSIX filesystem, that option offers the fastest and easiest development.
If you would rather avoid the challenge of setting up a shared POSIX filesystem for this purpose, then serving the binaries from HDFS or S3 still offers rapid deployment, and nearly everyone has this capability.
Using a configuration management system does centralize deployment, but it dramatically slows down your ability to redeploy a newer or older version of an executor, and so it is an option of last resort.</p>
<div data-type="tip"><h1>Fetcher Cache</h1>
<p>In Mesos 0.23, a <a data-type="indexterm" data-primary="fetcher cache" id="idp16252048"></a>new feature called the <em>fetcher cache</em> was released.
The fetcher cache seeks to reduce the load on S3, HDFS, or other filesystems by caching executor downloads on every slave, so that they’re downloaded only once per slave.
Although this doesn’t eliminate the scalability challenges with shared filesystems, it should help a lot.
To fully take advantage of the fetcher cache and improve scalability, ensure that your scheduler staggers the launch of executors.
That way, there will never be too many simultaneous requests to the shared filesystem, and the fetcher cache will further reduce the load.
The fetcher cache guarantees that each artifact will be fetched once per slave; even if multiple executors request an artifact, they’ll all wait for the single download.</p>

<p>To use the fetcher cache, you simply set <code>cache</code> to <code>true</code> in your <code>URI</code> protobuf in the <code>TaskInfo</code>.
The fetcher cache is isolated by user, since it simply uses the URI as the key.
In the future, there will be a way to bypass or purge the cache, but in the meantime, each URI should be unique for each different version of the resource’s content.</p>
</div>

<p>In any case, remember that your scheduler specifies exactly from where and how to fetch and launch the executor.
Consequently, each version of a scheduler can choose to launch different forwards- and/or backwards-compatible versions of the executor.
By ensuring that your scheduler always launches a compatible executor, you can generally avoid internal version mismatches in your <a data-type="indexterm" data-primary="executors" data-secondary="deployment solutions" data-startref="ex5ds" id="idp16551568"></a><a data-type="indexterm" data-primary="executors" data-secondary="scalability issues" data-startref="ex5si" id="idp16552656"></a>frameworks.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Adding Heartbeats"><div class="sect1" id="executor_adding_heartbeats">
<h1>Adding Heartbeats</h1>

<p>One <a data-type="indexterm" data-primary="heartbeats/heartbeating" id="hh5"></a><a data-type="indexterm" data-primary="executors" data-secondary="adding heartbeats" id="ex5ah"></a>of the advantages of the Mesos architecture is that temporary communication disruptions don’t affect the operation of the running executors.
We often leverage this functionality when designing for high availability, since each executor can continue to process its work or service client requests in spite of other failures.
When building a pool of servers scheduler, for example (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#pool_of_servers">“Pool of Servers Scheduler”</a>), this is exactly the behavior we want.
On the other hand, sometimes we want to ensure that every executor is running so that we can react quickly to failures—after all, there’s no way to distinguish a temporary and permanent network blip.<sup><a data-type="noteref" id="idp16559136-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16559136" class="totri-footnote">2</a></sup></p>

<p>We’ll ensure that every executor is functioning by requiring them to heartbeat every so often (the period will depend on how quickly we want to react to failures).
To heartbeat, we’ll use <a data-type="indexterm" data-primary="framework messages" id="idp16560848"></a>framework messages, which have several interesting features and caveats:</p>

<ul>
<li>
<p>Framework messages are unreliable: there’s no guarantee they’re ever delivered.</p>
</li>
<li>
<p>Framework messages are scalable: they usually use an optimized transmission mechanism directly from the executor to the scheduler, thus avoiding bottlenecking at the master.</p>
</li>
<li>
<p>Framework messages can carry an arbitrary binary payload: you can serialize any data you’d like into them, such as progress updates.</p>
</li>
<li>
<p>Framework messages are between executors and schedulers: it’s up to you to include the task ID in the binary payload if you want to send messages about a particular task on an executor.</p>
</li>
</ul>

<p>First, let’s add heartbeats to our executor, as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#heartbeats_on_the_executor">Example&nbsp;5-11</a>.</p>
<div id="heartbeats_on_the_executor" data-type="example">
<h5><span class="label">Example 5-11. </span>Heartbeats on the executor</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">main</code><code class="o">(</code><code class="n">String</code><code> </code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code> </code><code class="n">args</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="c1">// ... snip ...
</code><code>    </code><code class="n">Timer</code><code> </code><code class="n">timer</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Timer</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO6-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO6-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="n">timer</code><code class="o">.</code><code class="na">schedule</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">TimerTask</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">run</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">driver</code><code class="o">.</code><code class="na">sendFrameworkMessage</code><code class="o">(</code><code class="k">new</code><code> </code><code class="kt">byte</code><code class="o">[</code><code class="mi">1</code><code class="o">]</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO6-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO6-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code class="o">,</code><code> </code><code class="mi">0</code><code class="o">,</code><code> </code><code class="mi">5000</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO6-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO6-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="c1">// ... snip ...
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO6-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO6-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We create a new <code>Timer</code> when our executor starts up to manage the heartbeats.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO6-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO6-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>The task we create will simply send a framework message without any interesting data. In a production framework, you could include useful information here, such as when the message was sent (to track the message delivery delay) or what the completion percentage of each of the executor’s tasks is.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO6-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO6-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We start this task immediately, sending a heartbeat every 5 seconds. To increase scalability, heartbeats are often sent every 30 seconds or every few minutes.</p></dd>
</dl>

<p>Although it’s easy to send heartbeats on the executor, we also need to augment the scheduler.
First, we enhance the <code>Job</code> to <a data-type="indexterm" data-primary="jobs, automatically self-destructing" id="idp16657952"></a>automatically fail itself when it doesn’t receive a heartbeat in time, as seen in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#automatically_sd_job">Example&nbsp;5-12</a>.</p>
<div id="automatically_sd_job" data-type="example">
<h5><span class="label">Example 5-12. </span>Automatically self-destructing Job</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">Job</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="n">Timer</code><code> </code><code class="n">timer</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Timer</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="n">TimerTask</code><code> </code><code class="n">missedHeartbeatTask</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>    </code><code class="c1">// ... snip ...
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">heartbeat</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">missedHeartbeatTask</code><code> </code><code class="o">!</code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code>            </code><code class="n">missedHeartbeatTask</code><code class="o">.</code><code class="na">cancel</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>        </code><code class="n">missedHeartbeatTask</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">HeartbeatTask</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="n">timer</code><code class="o">.</code><code class="na">schedule</code><code class="o">(</code><code class="n">missedHeartbeatTask</code><code class="o">,</code><code> </code><code class="mi">20000</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Job</code><code> </code><code class="nf">fromJSON</code><code class="o">(</code><code class="n">JSONObject</code><code> </code><code class="n">obj</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">Job</code><code> </code><code class="n">job</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Job</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="c1">// ... snip ...
</code><code>        </code><code class="n">job</code><code class="o">.</code><code class="na">heartbeat</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">job</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">succeed</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="c1">// ... snip ...
</code><code>        </code><code class="n">missedHeartbeatTask</code><code class="o">.</code><code class="na">cancel</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">fail</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="c1">// ... snip ...
</code><code>        </code><code class="n">missedHeartbeatTask</code><code class="o">.</code><code class="na">cancel</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="kd">class</code><code> </code><code class="nc">HeartbeatTask</code><code> </code><code class="kd">extends</code><code> </code><code class="n">TimerTask</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-8" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-8"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a><code>
</code><code>        </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">run</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Heartbeat missed; failing"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>            </code><code class="n">fail</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO7-9" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO7-9"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/9.png" alt="9" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/9.png"></a><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>Each <code>Job</code> will now have a <code>Timer</code> to manage the expiration of its latest heartbeat.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We must store the <code>TimerTask</code> that will cause the current instance of the <code>Job</code> to fail, so that we can cancel it when we receive a heartbeat.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>The <code>heartbeat()</code> method will get called every time we receive a heartbeat from the executor.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p>Every time we receive a heartbeat, we must cancel the current task, since if that task ran we’d fail the <code>Job</code>.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-5" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-5"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/5.png" alt="5" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/5.png"></a></dt>
<dd><p>When we receive the heartbeat, we schedule the next failure due to lack of heartbeat in 20 seconds. Since we expect a heartbeat every 5 seconds, this should only run if we miss several heartbeats in a row.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-6" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-6"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/6.png" alt="6" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/6.png"></a></dt>
<dd><p>When we first create the <code>Job</code>, we heartbeat it once to ensure that it fails if the executor never starts running.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-7" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-7"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/7.png" alt="7" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/7.png"></a></dt>
<dd><p>When the task finishes, we cancel the pending failure task, since it’s no longer relevant.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-8" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-8"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/8.png" alt="8" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/8.png"></a></dt>
<dd><p>A <code>HeartbeatTask</code> <a data-type="indexterm" data-primary="HeartbeatTask" id="idp16977872"></a>is a subclass of <code>TimerTask</code>. We only need to implement the <code>run()</code> method, which is only called if the task isn’t canceled before its time is up.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO7-9" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO7-9"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/9.png" alt="9" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/9.png"></a></dt>
<dd><p>If our task does get to run, we just <code>fail()</code> the <code>Job</code>, which will cause the <code>Job</code> to get rescheduled later.</p></dd>
</dl>

<p>Now that our <code>Job</code> has been enhanced to track heartbeats, all we need to do is pass along <a data-type="indexterm" data-primary="framework messages" id="idp16983616"></a>framework messages from the scheduler to the proper <code>Job</code>.
To do this, we’ll implement the <code>frameworkMessage</code> <a data-type="indexterm" data-primary="frameworkMessage" id="idp16985120"></a>callback in the scheduler, as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#implementing_frameworkmessage_for_heartbeats">Example&nbsp;5-13</a>.</p>
<div id="implementing_frameworkmessage_for_heartbeats" data-type="example">
<h5><span class="label">Example 5-13. </span>Implementing frameworkMessage for heartbeats</h5>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">frameworkMessage</code><code class="o">(</code><code class="n">SchedulerDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">ExecutorID</code><code> </code><code class="n">executorId</code><code class="o">,</code><code>
</code><code>                             </code><code class="n">SlaveID</code><code> </code><code class="n">slaveId</code><code class="o">,</code><code> </code><code class="kt">byte</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">data</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">String</code><code> </code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="n">executorId</code><code class="o">.</code><code class="na">getValue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO8-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO8-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="kd">synchronized</code><code> </code><code class="o">(</code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Job</code><code> </code><code class="n">j</code><code> </code><code class="o">:</code><code> </code><code class="n">jobs</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO8-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO8-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">j</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>                </code><code class="n">j</code><code class="o">.</code><code class="na">heartbeat</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_building_a_mesos_executor_CO8-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#callout_building_a_mesos_executor_CO8-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_building_a_mesos_executor_CO8-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO8-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>For the example executor in this chapter (and for the <code>CommandExecutor</code>), we set the executor ID to be equal to the job ID and the task ID.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO8-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO8-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Since we don’t care about the data in the framework message, we simply scan through all the current jobs to find if one of them has the same ID as the executor that just sent the heartbeat.</p></dd>
<dt><a class="co" id="callout_building_a_mesos_executor_CO8-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#co_building_a_mesos_executor_CO8-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Once we find a match, we call the <code>heartbeat()</code> method on that <code>Job</code>, so that the <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#automatically_sd_job">Example&nbsp;5-12</a> code can do its thing.</p></dd>
</dl>

<p>This is all it takes to add basic heartbeating functionality to your framework.
Of course, there are several enhancements that should be made in a production-quality system.
Firstly, the heartbeat mechanism shown here creates one timer for every <code>Job</code>’s heartbeat; for a system with hundreds of <code>Job</code>s, every <code>Job</code> can share the same <code>Timer</code> to ensure scalability since each <code>Timer</code> creates a new thread.
Secondly, this heartbeat system doesn’t actually kill the non-heartbeating <code>Job</code>s; it just treats them as dead.
We should always kill the executors that aren’t heartbeating by using the <code>killTask</code> <a data-type="indexterm" data-primary="killTask" id="idp17124448"></a>API, or else we could end up with orphaned or zombie executors, which will consume resources indefinitely on the cluster without doing any useful work.
Finally, when we’re not sure if an executor was properly killed, we should be careful not to start an executor with a duplicate ID on a slave.
We should actually track all the executor IDs we’ve used, and generate a new, unique ID for each executor.
With the preceding code, you can encounter undefined behavior when you try to relaunch a <code>Job</code> on the same slave when the earlier executor is still running but believed dead due to lack of heartbeats.</p>

<p>Now, we’ve seen how to build a simple executor by leveraging the task-level and executor-level APIs.
We’ve even added an additional functionality, heartbeats, that wasn’t possible with the built-in executor.
In the next few sections, we’ll look at other advanced features that we can add to our <a data-type="indexterm" data-primary="heartbeats/heartbeating" data-startref="hh5" id="idp17126784"></a><a data-type="indexterm" data-primary="executors" data-secondary="adding heartbeats" data-startref="ex5ah" id="idp17127632"></a>executors.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Advanced Executor Features"><div class="sect1" id="idp16554368">
<h1>Advanced Executor Features</h1>

<p>As <a data-type="indexterm" data-primary="executors" data-secondary="advanced features" id="ex5af"></a>you’ve probably discovered by now, it’s difficult to write an executor.
Unlike most software that we write, the executor is particularly challenging to test, since we need to build it, package it, and ship it across our cluster, at which point we must wait to see whether it correctly interacts with our scheduler.</p>

<p>Before we start looking at additional features we can add to our executor, keep in mind that an executor doesn’t have to make its task a subprocess.
In fact, it’s quite common to have tasks run in the same process as the executor—this can lead to greater efficiency and a simpler design.
The only reason we split our executor and task into different processes was simply so that we could imitate the behavior of the built-in <code>CommandExecutor</code> in Mesos.</p>








<section data-type="sect2" data-pdf-bookmark="Progress Reporting"><div class="sect2" id="executor_adv_progress_reporting">
<h2>Progress Reporting</h2>

<p>In <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_adding_heartbeats">“Adding Heartbeats”</a>, <a data-type="indexterm" data-primary="progress reporting" id="pr5"></a><a data-type="indexterm" data-primary="executors" data-secondary="progress reporting" id="ex5pr"></a>we briefly touched on the idea that, in addition to using periodic framework messages to detect whether an executor is still running and accessible, we could include periodic status updates in those messages.
However, we don’t only have to use framework messages for this: the <code>TaskStatus</code> <a data-type="indexterm" data-primary="TaskStatus" id="idp17138496"></a>message also has a <code>data</code> field, and it too can be used to send updates about a task.
Furthermore, it is possible to send multiple <code>TaskStatus</code> updates for the same status (i.e., <code>TASK_RUNNING</code>, <code>TASK_STARTING</code>, etc.) but with different values in the <code>data</code> field to reliably send a task’s internal status changes.
For instance, we may want to have our tasks report that they’re <code>RUNNING</code> with the <code>data</code> value “initializing” when they start to initialize themselves, and then send a new status update that they’re <code>RUNNING</code> with the <code>data</code> value “ready” when they’re ready to begin processing requests.
Let’s look at the reasons we might consider to choose whether to communicate progress updates with status messages or framework updates.</p>

<p>Framework messages <a data-type="indexterm" data-primary="framework messages" id="idp17143440"></a>are highly scalable, because they are transmitted directly from the executors to the scheduler.
Since the Mesos master typically doesn’t process or forward framework messages,<sup><a data-type="noteref" id="idp17144368-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17144368" class="totri-footnote">3</a></sup> the throughput of these messages is limited by the scheduler’s ability to consume them.
Furthermore, since framework messages aren’t guaranteed to be reliable, during periods of high load, Mesos can choose to drop some messages in order ensure that higher-priority messages can proceed.
These features make framework messages a great choice when <a data-type="indexterm" data-primary="scalability" id="idp17145552"></a>scalability is the primary concern.</p>

<p>Of course, that scalability comes at a price: as mentioned, sometimes framework messages get dropped.
Status updates, <a data-type="indexterm" data-primary="status updates" id="idp17146800"></a>on the other hand, are guaranteed to be delivered.
But this guarantee comes at a steep performance cost: every status update must be checkpointed to disk on the slave before it’s sent, and then a second disk write must take place to mark the update as having been successfully sent.
Furthermore, the slaves must keep track of all outstanding status updates, so that if a scheduler is temporarily offline when the status update would have been delivered, the slave can retransmit it later.
This checkpointing and tracking, along with the periodic retransmissions of unacknowledged status updates, gives status updates their reliability, making them suitable for notifying the scheduler of important lifecycle events in tasks, at the cost of far greater resource usage and susceptibility to bottlenecks at the master’s and the slave’s disks.</p>

<p>Thus, the main criterion for whether framework messages or status updates are more suitable is whether every update completely subsumes all earlier updates.
For example, if the goal was to report on the percent completed of a task, then missing the 49% update is irrelevant once the 50% update has been received (since the 50% update implies that 49% has already passed).
For this purpose, framework messages are a good choice.
On the other hand, if a task is reporting when various subtasks have been completed, each update is unique and they all should be delivered to the scheduler.
For this purpose, status updates are more <a data-type="indexterm" data-primary="progress reporting" data-startref="pr5" id="idp17149424"></a><a data-type="indexterm" data-primary="executors" data-secondary="progress reporting" data-startref="ex5pr" id="idp17150272"></a>appropriate.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Adding Remote Logging"><div class="sect2" id="idp17151616">
<h2>Adding Remote Logging</h2>

<p>One <a data-type="indexterm" data-primary="remote logging" id="idp17152864"></a><a data-type="indexterm" data-primary="executors" data-secondary="remote logging" id="idp17153472"></a>often-encountered problem in building distributed systems is figuring out “<em>What the hell happened</em>?”
This is so challenging because logs tend to be scattered across the cluster; this makes searching the logs for an error message much harder, since now we also need to search the cluster for the log.
Furthermore, we often need to correlate several logs to identify how the interaction between multiple programs in our cluster resulted in failure.
The most common way to mitigate this issue is to send all logs to a central repository, which then assists us in analyzing, searching, and correlating these logs.
Some popular technologies for doing this are <a href="http://www.splunk.com/">Splunk</a>, <a href="https://www.elastic.co/products/logstash">Logstash</a>, and <a href="https://papertrailapp.com/">Papertrail</a>.<sup><a data-type="noteref" id="idp17157280-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17157280" class="totri-footnote">4</a></sup></p>

<p>Recall how we used <code>ProcessBuilder.redirectOutput()</code> to send the <code>stdout</code> and <code>stderr</code> of our process to a file—we could instead get the <code>InputStream</code>s directly from the resultant process so that we can send the outputs anywhere.
Once you’re writing your own executor, you have complete control over where your executor’s logs get sent, and where your tasks’ logs get sent.
For many applications, since there’s only one task per executor, we want to send the executor and task logs to the same place.
For other applications, however, we can actually send the task and executor logs to different places.
This is useful when you want to be able to debug tasks separately from one another, and don’t want to see all of an executor’s tasks’ logs intermingled.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Multiple Tasks"><div class="sect2" id="multiple_tasks">
<h2>Multiple Tasks</h2>

<p>Mesos executors are <a data-type="indexterm" data-primary="multiple tasks, running" id="mtr5"></a><a data-type="indexterm" data-primary="executors" data-secondary="running multiple tasks" id="ex5rmt"></a>designed to run multiple tasks.
To run a task on an existing executor, you can launch that task the same as normal, except that you’ll use an identical <code>ExecutorInfo</code> as the executor that’s already running on that slave.
To help you reuse executors, every offer has a field called <code>executor_ids</code>, <a data-type="indexterm" data-primary="executor_ids" id="idp17166064"></a>which contains all of the <code>ExecutorID</code>s of the executors currently running on that slave; however, it’s still up to you to store all the <code>ExecutorInfo</code>s and include them in your task descriptors.
The master will validate the <code>TaskInfo</code>, so if you provide an <code>ExecutorInfo</code> that doesn’t match the executor you want to launch on, the task will fail immediately with a <code>TASK_ERROR</code>.</p>
<div data-type="tip" id="executors_can_resize_containers"><h1>Resizing Containers</h1>
<p>A <a data-type="indexterm" data-primary="containerizers" id="idp17170192"></a><a data-type="indexterm" data-primary="executors" data-secondary="resizing containers" id="idp17170800"></a>powerful feature of executors is that their size is always the sum of all the tasks they’re running and the executor’s resources.
A custom executor is the only way to easily dynamically resize containers depending on what work they’re performing.
Of course, there’s no free lunch: you’ll need to keep track of which slave each executor is running on, and you’ll need to use an offer from the existing executor’s slave when you want to scale its container up.</p>
</div>










<section data-type="sect3" data-pdf-bookmark="Executors with expensive state"><div class="sect3" id="idp17172528">
<h3>Executors with expensive state</h3>

<p>Typically, <a data-type="indexterm" data-primary="executors" data-secondary="with expensive states" data-secondary-sortas="expensive" id="idp17173664"></a>reusing executors is done when the executor contains some sort of expensive-to-construct state.
For instance, the executors can be maintaining a local cache of a large amount of data that’s stored in a slow external filesystem, like S3.
In this case, the executor can be responsible for downloading that data, and then each task can access that data as a local file, which will be much faster than reading it over the network.
Of course, there’s always a trade-off: if you run multiple tasks at the same time on that executor, those tasks will run in the same container—you’ll be giving up the strong isolation guarantee between tasks that Mesos usually provides!
If you are confident that the tasks won’t accidentally consume more of the container’s resources than they should, this is a workable solution.
If, however, you’re like most developers and occasionally write bugs, this is a risky proposition, in that it opens up your framework to unanticipated interference and potential nondeterminism.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Multistage initialization"><div class="sect3" id="idp17176160">
<h3>Multistage initialization</h3>

<p>A less <a data-type="indexterm" data-primary="executors" data-secondary="multistage initialization" id="idp17177296"></a><a data-type="indexterm" data-primary="multistage initialization" id="idp17178144"></a><a data-type="indexterm" data-primary="initialization, multistage" id="idp17178752"></a>common situation in which multiple tasks are used on the same executor is when the executor has a complex initialization process.
Rather than sending status updates as the initialization occurs, as suggested in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#executor_adv_progress_reporting">“Progress Reporting”</a>, the scheduler can treat each step of the initialization as a separate task.
This way, the initialization logic can be managed on the scheduler, rather than on the executor.
Although you’ll occasionally see this technique used, I recommend against it.
It is easier to implement the initialization state machine in the executor itself.
This has the additional benefits of removing the need to implement parts of the state machine in the executor and other parts in the scheduler, and it reduces the dependency of the framework on a reliable network during executor initialization.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Canary tasks"><div class="sect3" id="canary_tasks">
<h3>Canary tasks</h3>

<p>There is, <a data-type="indexterm" data-primary="canary tasks" id="idp17182896"></a><a data-type="indexterm" data-primary="executors" data-secondary="canary tasks" id="idp17183504"></a><a data-type="indexterm" data-primary="tasks" data-secondary="canary" id="idp17184352"></a>however, one situation in which an additional task on the executor is absolutely necessary: when we need to receive prompt notification that an executor that may not be presently running any tasks (but is waiting for new ones) has shut down or crashed.
As mentioned in our discussion of <code>Scheduler</code> callbacks (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#noop_cb_urb">Example&nbsp;4-6</a>), the callback you might think would tell you when an executor is lost is never actually called.
Therefore, to detect when an executor disappears, we instead run a canary task on it.
That way, when an executor shuts down or crashes or its slave deactivates, we’ll receive a <code>TASK_LOST</code> from the canary task, which tells us that the executor is lost.
Of course, if you don’t need to promptly detect that the executor has been lost, you could always just assume executors are gone if you don’t see an offer from them within some timeout.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="When should we use them?"><div class="sect3" id="idp17187824">
<h3>When should we use them?</h3>

<p>The capability for executors to launch multiple tasks is a lesser-used feature, for good reason.
The APIs can be challenging to use, due to the need to store the <code>ExecutorInfo</code>s for reuse.
Ultimately, multiple tasks should only be used in the following situations:</p>

<ul>
<li>
<p>When it’s necessary to dynamically change the amount of resources used by an executor as its workload varies</p>
</li>
<li>
<p>When the executor’s state is so expensive to construct that it’s acceptable to throw away the Mesos isolation functionality to save on reinitialization costs</p>
</li>
<li>
<p>When the failure of an executor that might not be running any tasks must be detected rapidly</p>
</li>
</ul>

<p>Use this feature carefully, as it can make debugging very <a data-type="indexterm" data-primary="multiple tasks, running" data-startref="mtr5" id="idp17193120"></a><a data-type="indexterm" data-primary="executors" data-secondary="running multiple tasks" data-startref="ex5rmt" id="idp17193968"></a><a data-type="indexterm" data-primary="executors" data-secondary="advanced features" data-startref="ex5af" id="idp17195056"></a>difficult.</p>
</div></section>



</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp17196528">
<h1>Summary</h1>

<p>Executors are the Mesos abstraction for a framework’s workers.
They should be used when a framework requires richer interaction between its scheduler and workers.
Building an executor is usually very challenging, because of the need to frequently deploy new builds to the cluster during development.
By surmounting these challenges, you can build custom executors to enable frameworks to dynamically scale the containers in which their tasks are running, to efficiently share expensive resources, and to provide an easy API to send messages between the scheduler and workers.</p>

<p>In this chapter, after reviewing some of the reasons one might build an executor, we implemented an executor that was mostly compatible with the built-in Mesos <code>CommandExecutor</code> and which we integrated with the job scheduler from <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#chapter_creating_new_scheduler">Chapter&nbsp;4</a>.
Then, we added heartbeats, which allowed us to more rapidly detect certain types of partial failures on the cluster, resulting in a better experience for the humans that must wait for their jobs to complete.</p>

<p>Finally, we looked at some advanced uses of custom executors: how to choose between framework messages and status updates, considerations when integrating with centralized distributed logging systems, and how and why to develop executors that support <a data-type="indexterm" data-primary="executors" data-seealso="CommandExecutor" data-startref="ex5" id="idp17201056"></a>multiple tasks.</p>

<p>Now that we’ve looked across the entire spectrum of building applications on Mesos—utilizing existing frameworks, building application-specific schedulers, creating rich executors—we’ll move on to more advanced topics, such as Mesos internals, Docker integration, and exotic, cutting-edge APIs.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idp15583072"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15583072-marker" class="totri-footnote">1</a></sup> Java concurrency is beyond the scope of this book, so you’ll just have to trust me that this works.</p><p data-type="footnote" id="idp16559136"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16559136-marker" class="totri-footnote">2</a></sup> This is known as the <a href="http://the-paper-trail.org/blog/a-brief-tour-of-flp-impossibility/">FLP impossibility result</a>.</p><p data-type="footnote" id="idp17144368"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17144368-marker" class="totri-footnote">3</a></sup> Technically, the Mesos master will sometimes process framework messages. This can lead to a bottleneck in rare cases, but the optimized bypass of the master is almost always used.</p><p data-type="footnote" id="idp17157280"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17157280-marker" class="totri-footnote">4</a></sup> You can read a summary and comparison of centralized logging solutions at <a href="http://bit.ly/centralizedlogging">Jason Wilder’s blog</a>.</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch04.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">4. Creating a New Framework for Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch06.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">6. Advanced Topics in Mesos</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch05.html" data-for-analytics="9781491926543:ch05.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#">Reset</a>
</div>
</div></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch06.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch06.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom gr__safaribooksonline_com" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch06.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch06.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>6. Advanced Topics in Mesos - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch06.html"><meta name="description" content=" Chapter 6. Advanced Topics in Mesos Although you now know the ropes of building applications on Mesos, you’ve probably got even more questions than when you started: What is ... "><meta property="og:title" content="6. Advanced Topics in Mesos"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="6. Advanced Topics in Mesos"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch06.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 6. Advanced Topics in Mesos Although you now know the ropes of building applications on Mesos, you’ve probably got even more questions than when you started: What is ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch06.html" data-for-analytics="9781491926543:ch06.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch06.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch06.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch06.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%206.%20Advanced%20Topics%20in%20Mesos&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch06.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch05.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">5. Building a Mesos Executor</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch07.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">7. The Future of Mesos</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 6. Advanced Topics in Mesos"><div class="chapter" id="idp14473472">
<h1><span class="label">Chapter 6. </span>Advanced Topics in Mesos</h1>


<p>Although you now know the ropes of building applications on Mesos, you’ve probably got even more questions than when you started:</p>

<ul>
<li>
<p>What is the internal architecture of Mesos?</p>
</li>
<li>
<p>How does Mesos handle failures?</p>
</li>
<li>
<p>How can I use Docker with Mesos?</p>
</li>
</ul>

<p>In this chapter, we’ll learn more about all these things, so that you can build even more sophisticated, reliable systems.</p>






<section data-type="sect1" data-pdf-bookmark="Libprocess and the Actor Model"><div class="sect1" id="libprocess_and_actor_model">
<h1>Libprocess and the Actor Model</h1>

<p>At <a data-type="indexterm" data-primary="actor model" id="am6"></a><a data-type="indexterm" data-primary="Mesos" data-secondary="internal architecture" id="m6ia"></a>a high level, Mesos is a hybrid strongly consistent/eventually consistent system, based on the message passing actor model, written in C++.</p>

<p>The actor model is a paradigm for programming concurrent and distributed systems.
In the actor model, the developer implements <em>processes</em> or <em>actors</em>, which are single-threaded modules of code that process messages one at a time.
While processing a message, an actor can send messages to other actors or create new actors.
Actors can only send messages to those whose process identifiers (PIDs) they know.
When an actor spawns another actor, it learns the PID of the newly created actor.
In order to get more PIDs, actors must send the PIDs to one another in messages.</p>

<p>The actor model framework that Mesos uses is called <a data-type="indexterm" data-primary="libprocess" id="lp6"></a>libprocess, and it was written by Ben Hindman at the same time he wrote Mesos.<sup><a data-type="noteref" id="idp17214768-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17214768" class="totri-footnote">1</a></sup>
Libprocess is a C++ API that provides actor model semantics and uses HTTP to communicate.
Since everything speaks HTTP, it’s easy to interface with libprocess.</p>

<p>Libprocess messages are just protobufs over HTTP, and can benefit from the headers, content negotiation, and routing features therein.
A libprocess process is identified by its PID, which is written as the hostname and the port of the actor.</p>
<div data-type="tip"><h1>Fun Fact</h1>
<p>In order to support the asynchronous semantics that the actor model requires, libprocess uses a neat trick: it turns out that HTTP status code 202 means that the request has been accepted and is being asynchronously processed.</p>
</div>

<p>For most users of Mesos, you’ll need to understand nothing about libprocess and actors.
If, however, you are using advanced containerization techniques (like Docker bridged networking) or have multiple network interfaces, you may need to configure the <code>LIBPROCESS_IP</code> and <code>LIBPROCESS_PORT</code> environment variables for the Mesos masters and slaves.
These environment variables allow you to control which network interface the masters, slaves, and other libprocess actors bind to, so that their messages can successfully reach <a data-type="indexterm" data-primary="libprocess" data-startref="lp6" id="idp17220016"></a><a data-type="indexterm" data-primary="actor model" data-startref="am6" id="idp17220864"></a><a data-type="indexterm" data-primary="Mesos" data-secondary="internal architecture" data-startref="m6ia" id="idp17221712"></a>each other.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="The Consistency Model"><div class="sect1" id="idp17223056">
<h1>The Consistency Model</h1>

<p>Let’s <a data-type="indexterm" data-primary="consistency model" id="cm6"></a>talk more about the consistency model of Mesos.
Where does it lie on the <a data-type="indexterm" data-primary="CAP theorem" id="idp17225408"></a>CAP theorem?<sup><a data-type="noteref" id="idp17226144-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17226144" class="totri-footnote">2</a></sup>
What guarantees do we get, as users and developers of Mesos?
The answer to this question isn’t simple.
For this section, we’re going to look at a Mesos cluster with three masters, the registry feature enabled, and the slave checkpointing and recovery features enabled.
Really, any feature related to reliability and persistence will be assumed to be enabled, since they form the basis of Mesos’s robust consistency model.</p>

<p>Consider the block diagram of Mesos while a framework is running a task in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#mesos_message_flows">Figure&nbsp;6-1</a>.
There are four parts: the master, the slave, the framework’s scheduler, and the framework’s executor.
There are three communication links: between the master and the scheduler, between the master and the slave, and between the slave and the executor.
Let’s analyze the failure modes of each of these in turn.</p>

<figure><div id="mesos_message_flows" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0601.png" alt="Block diagram of message flows for Mesos" width="459" height="293" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0601.png">
<h6><span class="label">Figure 6-1. </span>Message flows for a framework</h6>
</div></figure>








<section data-type="sect2" data-pdf-bookmark="How Is Slave Failure Handled?"><div class="sect2" id="idp17231440">
<h2>How Is Slave Failure Handled?</h2>

<p>First, <a data-type="indexterm" data-primary="failures" data-secondary="slaves" id="f6s"></a><a data-type="indexterm" data-primary="slaves" data-secondary="lifecycle and failure of" id="s6lafo"></a>let’s look at the lifecycle of the slave, and see how various failures are handled.
Initially, when a new slave starts up, it connects to Mesos and asks to register by sending a <code>Register</code> message to the master.
The master then stores the slave’s information in the registry, and once that operation has committed, it sends a <code>Register</code>ed message to the slave, thus informing the slave that it’s successfully joined the Mesos cluster.
At this point, the master can begin to offer the slave’s resources to the connected schedulers.</p>

<p>Suppose now that the slave crashes.
In this case, the master will soon stop receiving the slave heartbeats, and after the configured timeout, the slave will be recognized as being “dead” and will be removed from the registry.
As a consequence, even if the slave was only temporarily partitioned from the network, as soon as it resumes heartbeating or attempts to reconnect to the master, the master will politely inform the slave to kill itself.<sup><a data-type="noteref" id="idp17237056-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17237056" class="totri-footnote">3</a></sup>
At this point, let’s hope that you’re running your slave under a supervisor such as <a data-type="indexterm" data-primary="SupervisorD" id="idp17238000"></a><a data-type="indexterm" data-primary="Monit" id="idp17238608"></a><a data-type="indexterm" data-primary="SystemD" id="idp17239216"></a>Supervisord, Monit, or SystemD.
When the slave restarts, it’ll generate a new random slave ID for itself, at which point it’ll be able to successfully register as a new slave (see the following sidebar).
When a slave crashes, any tasks that were running on the slave originally are <code>LOST</code>, since the slave is dead.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="failstopmodel">
<h5>Fail-Stop Versus Fail-Recover</h5>
<p>When academic <a data-type="indexterm" data-primary="fail-stop versus fail-recover models" id="idp17242144"></a>researchers design new robust distributed algorithms, they typically work within one of two different models of the world: fail-stop or fail-recover.
In the fail-stop model, whenever a machine crashes, it stays crashed forever; that machine never, ever returns to life.
In the fail-recover model, machines that crash are allowed to return to life.
As you can tell, the fail-recover model matches reality far more closely—after all, we fix and restart machines when they break; we don’t just send them to the dumpster (or vendor) after their first problem!
Unfortunately, it turns out that the fail-recover model makes it very hard to prove whether any algorithms actually work, so much research is done within the fail-stop model.
Interestingly, Mesos slaves emulate the fail-stop model with a clever trick—when you start a slave, its ID is not just the hostname of the machine it runs on;
it is uniquely generated.
This means that if a slave crashes and then restarts, it will get a new slave ID, and thus appear fresh to Mesos.
This makes it much easier to reason about the behavior of Mesos.
It’s worth noting that the checkpointing feature of Mesos allows us, when we intend it, to let a restarted slave appear to be the old version.
In this case, we treat the restart of the slave just like a brief network partition, rather than a crash.</p>
</div></aside>
</div></section>













<section data-type="sect2" data-pdf-bookmark="How Is Master Failure Handled? (Or, the Registry)"><div class="sect2" id="master_registry">
<h2>How Is Master Failure Handled? (Or, the Registry)</h2>

<p>Now, <a data-type="indexterm" data-primary="failures" data-secondary="slaves" data-startref="f6s" id="idp17246464"></a><a data-type="indexterm" data-primary="slaves" data-secondary="lifecycle and failure of" data-startref="s6lafo" id="idp17247552"></a><a data-type="indexterm" data-primary="masters" data-secondary="failure of" id="m6fo"></a><a data-type="indexterm" data-primary="failures" data-secondary="masters" id="f6m"></a><a data-type="indexterm" data-primary="slaves" data-secondary="master failures and" id="s6amf"></a>let’s look at what happens if the master crashes.
First and foremost, we know this isn’t a big deal, as Mesos is built to handle all sorts of distributed failures.
Plus, we’ve got those redundant backup masters around anyway, right?
After the current master crashes, a new leading master is elected.
Gradually the <a data-type="indexterm" data-primary="slaves" data-secondary="registration" id="idp17252368"></a>slaves will discover this information through the course of their regular communication with the masters.
Since the slaves are heartbeating periodically, they’ll see their heartbeats fail to connect or get rejected (depending on whether the old leader is down or merely restarted and now just a spare).
The slaves will query ZooKeeper again to learn of the new master.
At this point a slave will use a different RPC to connect to the new master, called <code>Reregister</code>, <a data-type="indexterm" data-primary="Reregister" id="idp17254192"></a>since the slave believes itself to already be registered but no longer connected.
When the new leader receives this RPC, it checks the registry to confirm that this slave is indeed live.
If it is, it accepts the slave’s registration; however, if the slave was not in the registry, then it will tell the slave to kill itself so that it can be revived with a new slave ID and rejoin the cluster as a new slave without any baggage.</p>

<p>You might wonder why we need the registry and the reregistration process.
Let’s look at what happens if we remove reregistration and the registry.
Reregistration’s an easy one: if a slave can’t reregister, then a master crash and subsequent failover will always force the slave to register as a new slave because (as discussed in the preceding sidebar) Mesos uses a fail-stop model.
This means killing all the tasks on that slave.
Needless to say, instantly killing all tasks across the entire cluster when the master needs to restart or fail over isn’t ideal, and defeats the purpose of using a highly available cluster operating system.</p>

<p>Now, let’s consider what happens if we remove the registry.
Suppose that a slave stops heartbeating due to a network partition, and the old leader decides that slave is dead, meaning all tasks on it are considered <code>LOST</code>.
Then, the masters fail over to a new leader, and at that time the slave, which was previously not sending heartbeats, miraculously manages to start sending heartbeats again.
Now, the new leader will receive the slave’s reregistration and accept it.
But wait!
The old leader thought that slave was dead, and sent the scheduler <code>LOST</code> messages about all of the tasks on that slave.
Now we’ve gotten into an unfortunate situation where tasks in the <code>LOST</code> state seem to magically resurrect; this is a bug because <code>LOST</code> is a terminal state for the tasks.
The registry allows us to ensure that tasks can never move out of the <code>LOST</code> <a data-type="indexterm" data-primary="Lost state" id="idp17259664"></a>state (or any terminal state) back into a nonterminal state: the old leader marks the slave dead in the registry so that the new leader will know to reject the reregistration.</p>

<p>One thing you might be thinking at this point is, “It sure seems like the masters will have to do a ton of bookkeeping to track what state every task on every slave is in, and store that in the registry.”
And you’d be right, except that the masters don’t actually store any task information in the registry.
Since the registry allows us to know which slaves are valid, Mesos allows those slaves to be the trusted, canonical sources of information about their tasks.
So, when a master failover occurs, the new leader has no information about what tasks are running (and actually, the Mesos UI will reflect this, so don’t be worried if it takes a couple of minutes after a master failure to see all your tasks again).
Over time, as the slaves reregister and report in, the master will rebuild its in-memory picture of the state of the cluster.</p>

<p>There’s one more consideration for the <a data-type="indexterm" data-primary="registry, strict/nonstrict modes" id="idp17262320"></a><a data-type="indexterm" data-primary="strict mode" id="idp17262928"></a><a data-type="indexterm" data-primary="nonstrict mode" id="idp17263536"></a>registry, however: <em>strict</em> and <em>nonstrict mode</em>.
So far, I’ve only been describing the strict registry mode, since that’s the safe, always correct logic.
Unfortunately, there’s an annoying limitation with the strict registry: you cannot add new slaves to the master until all slaves have either checked in or timed out (typically, there’s a 90-second grace period for slaves to reregister with a newly elected master).
If, however, you use the nonstrict registry, then your frameworks must deal with a very challenging case during reconciliation.
In the next section, we’ll learn about all the cases that <a data-type="indexterm" data-primary="masters" data-secondary="failure of" data-startref="m6fo" id="idp17265632"></a><a data-type="indexterm" data-primary="failures" data-secondary="masters" data-startref="f6m" id="idp17266720"></a><a data-type="indexterm" data-primary="slaves" data-secondary="master failures and" data-startref="s6amf" id="idp17267808"></a>can occur.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Reconciliation During Failover"><div class="sect2" id="reconciliation_concepts">
<h2>Reconciliation During Failover</h2>

<p>At <a data-type="indexterm" data-primary="failures" data-secondary="reconciliation during" id="f6rd"></a><a data-type="indexterm" data-primary="reconciliation" id="rec6"></a><a data-type="indexterm" data-primary="task reconciliation" id="tr6"></a><a data-type="indexterm" data-primary="schedulers" data-secondary="reconciliation and" id="s6ra"></a>this point you’re probably satisfied with the idea that Mesos will keep its state nice and consistent.
Well, you shouldn’t be, because there’s still one problem as yet unexplored: how do the frameworks stay in sync with the Mesos cluster during transient failures?
For instance, what happens if a master marks a slave as dead and then crashes, thus missing its chance to inform the schedulers about all the tasks on that slave that have just reached the <code>LOST</code> state (because their slave died)?
After all, the leader’s state about the tasks is 100% derived from the slaves’ state, and the new leader has no idea what status updates have or haven’t already been sent.</p>

<p>The answer to this dilemma lies in the reconciliation feature.
Reconciliation is how a scheduler can check with the master to see whether the scheduler’s belief about the state of the cluster matches the master’s belief about the state of the cluster.
A scheduler is allowed to, at any time, ask the master to <code>reconcileTasks</code>—this is an RPC that allows the scheduler to provide a list of all the tasks and their statuses to the master, and the master to provide corrections for any tasks for which it knows a newer status.
Typically, reconciliation waits until the master is no longer waiting for slaves to check in (as would happen during a master failover); however, we’ll see now how the nonstrict mode of the registry complicates this.</p>
<div data-type="tip" id="always_provide_slaveid_reconciliation"><h1>Always Provide the Slave ID</h1>
<p>Always provide the <a data-type="indexterm" data-primary="slave ID" id="idp17278864"></a>slave ID to <a data-type="indexterm" data-primary="reconcileTasks" id="idp17279600"></a>the <code>reconcileTasks</code> RPC, even though it’s optional.
If you choose not to specify the slave ID, you may have to wait for up to two minutes for a response, since Mesos will wait until every registered slave has checked in or timed out.
Also, you may erroneously receive a <code>TASK_LOST</code> <a data-type="indexterm" data-primary="TASK_LOST" id="idp17281376"></a>message for some tasks, and later see those tasks resurrect.
Rather than dealing with the excess latency and edge cases, just provide the slave ID for every reconciliation.</p>
</div>

<p>Task reconciliation can only provide details about a task when it’s in a nonterminal state.
Of course, the main reason to reconcile is to determine whether tasks are still running, or if they’ve moved to a terminal state.
Whenever a task is in a terminal state, reconciliation for that task can always claim that it is <code>LOST</code>, when in fact it may have reached some other terminal status.
It’s the framework developer’s responsibility to combine the information from reconciliation with other information, such as external services with which a successful task may have stored data, to determine what the true result of the completed task was.</p>
<div data-type="warning" epub:type="warning" id="reconciling_completed_tasks"><h1>Reconciling Completed Tasks</h1>
<p>You should be careful to always ignore a <code>TASK_LOST</code> message from reconciliation when you’ve previously seen a different terminal status for that task.</p>
</div>

<p>As long as the task is not in a terminal state, reconciliation will result in the latest state for that task being sent (is either <code>TASK_STAGING</code> if the task hasn’t sent any status update yet, or whatever the latest status update was).
When the task is terminal, reconciliation is invalid.
When the task’s state is unknown to the master, however, the behavior is a bit trickier. There are a few situations to consider:</p>
<dl>
<dt>Task is unknown, but its slave is known</dt>
<dd>
<p>In this case, the reconciliation mechanism will report that the task has been <code>LOST</code>.
This is logical because it means that the task has entered a terminal state.</p>
</dd>
<dt>Task is unknown, and the slave is in the registry but hasn’t reregistered</dt>
<dd>
<p>This situation happens after a master failure before the slave has had a chance to check in.
Mesos will simply wait to send a response to the request for reconciliation until it’s heard from the slave, as it can’t know what has happened to the task since the previous master crashed.</p>
</dd>
<dt>Task is unknown, and the slave is not in the registry</dt>
<dd>
<p>If you follow the advice about always providing the slave ID to <code>reconcileTasks</code> and you are using the strict registry, you’ll never have to deal with this confusing case.
When this happens, Mesos can’t know if it’s ever going to hear from the slave, since that very slave may exist but not yet have been included in the registry.
As a result, Mesos will report that the task is <code>LOST</code>, but you may see other status updates for that task if the slave registers later on.
<em>This includes the chance that the task could appear to resurrect with a <code>RUNNING</code> status, or complete with a <code>FINISHED</code> or <code>FAILED</code> state!</em>
Using the strict option for the registry completely prevents this case from ever occurring, and as such it is strongly recommended to run in strict <a data-type="indexterm" data-primary="task reconciliation" data-startref="tr6" id="idp17294448"></a><a data-type="indexterm" data-primary="schedulers" data-secondary="reconciliation and" data-startref="s6ra" id="idp17295296"></a><a data-type="indexterm" data-primary="reconciliation" data-startref="rec6" id="idp17296384"></a><a data-type="indexterm" data-primary="consistency model" data-startref="cm6" id="idp17297232"></a><a data-type="indexterm" data-primary="failures" data-secondary="reconciliation during" data-startref="f6rd" id="idp17298080"></a>mode.</p>
</dd>
</dl>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Containerizers"><div class="sect1" id="idp17299424">
<h1>Containerizers</h1>

<p>As <a data-type="indexterm" data-primary="containerizers" data-secondary="Docker" id="cont6"></a><a data-type="indexterm" data-primary="Docker" data-secondary="containerizers" id="d6c"></a>you know, Mesos has first-class support for Docker.
But what does that mean?
I mean, Docker can basically be run by a <code>docker run ...</code> on the command line, so what else needs to be done?
Since Docker itself wants to manage the entire container, from the <code>chroot</code>, namespaces, and cgroups on through the entire userspace, it will conflict with the default Mesos containers.
Because of this, Mesos has added support for <em>containerizers</em>, a pluggable mechanism to allow Mesos’s containerization subsystem to be extensible: the original Mesos LXC/cgroups-based containers were ported to the containerizer API, Docker was added as the first new containerizer, and now there’s a well-documented protocol for adding new containerizers, such as KVM virtual machines.</p>








<section data-type="sect2" data-pdf-bookmark="Using Docker"><div class="sect2" id="docker_support">
<h2>Using Docker</h2>

<p>In order to use the Docker containerizer, you must include it on the Mesos slave’s command line. For example, <code>mesos-slave --containerizers=docker,mesos ...</code> would allow Docker and plain Mesos containers on that slave.</p>

<p>You’ll probably also want to increase the executor registration timeout, so that Mesos doesn’t think that your container failed when it’s actually still downloading.
Five minutes is a good conservative starting point for ensuring that your Docker images have enough time to download.
Thus, you’ll end up with a slave command line like:</p>

<pre data-type="programlisting">mesos-slave --containerizers=docker,mesos \
    --executor_registration_timeout=5mins ...</pre>

<p>Using Docker with your application is very simple—once you’ve enabled support for Docker, you just need to set the <code>container</code> field (of type <code>ContainerInfo</code>) in the <code>TaskInfo</code> or <code>ExecutorInfo</code>.</p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>Confusingly, the message <code>CommandInfo.ContainerInfo</code> is not the correct message—you want to set the top-level <code>ContainerInfo</code> in <code>mesos.proto</code> that has Docker-related fields.</p>
</div>

<p>To use Docker, set the <code>type</code> of the <code>ContainerInfo</code> to <code>DOCKER</code>, and set the <code>docker</code> field to an instance of the <code>ContainerInfo.Docker</code> message, which should have the <code>image</code> property set to your Docker image’s name (e.g., <code>myusername/webapp</code>).
At this point, you can configure many Docker parameters, such as whether to use <code>HOST</code> or <code>BRIDGE</code> networking, what port mappings to use, or additional Docker command-line options.
If you’d like the Docker container to use the <code>docker run ...</code> specified in the Dockerfile, then you should set the <code>CommandInfo</code> of the <code>TaskInfo</code> to have <code>shell = false</code>.
If you set <code>shell = true</code>, then you’ll disable the <code>run</code> built into the Dockerfile, and instead the specified <code>command</code> will be run via <code>sh -c "<em>&lt;command&gt;</em>"</code>.</p>

<p>When you launch a Docker containerized task, the slave first fetches (and unpacks) all the specified URIs into the sandbox, and it pulls the Docker image locally.
Next, the slave launches the Docker image by running <code>docker</code>.
The <code>docker</code> command’s <code>HOME</code> environment variable is set to the sandbox, so that you can configure Docker via fetched URIs (as discussed in the following note).
The sandbox will be available inside the Docker image, and its path will be stored in the <code>MESOS_SANDBOX</code> environment variable as usual.
Finally, Docker’s <code>stdout</code> and <code>stderr</code> will be redirected to files named <code>stdout</code> and <code>stderr</code> in the Mesos sandbox.</p>
<div data-type="note" epub:type="note" id="Advanced_Docker_Configuration"><h1>Advanced Docker Configuration</h1>
<p>One <a data-type="indexterm" data-primary="Docker" data-secondary="advanced configuration" id="idp17325952"></a>thing you should be aware of is that the Docker containerizer always attempts to pull the Docker image down from the registry.
This means that you cannot use a local-only installed Docker image—you must have deployed it somewhere.
If you’d like to use a private registry, you can provide a <em>.dockercfg</em> file.
This file should be specified by a URI, so that the Mesos slave can use its automatic URL-fetching facilities to copy the <em>.dockercfg</em> into the <code>HOME</code> for the Docker process to use.</p>
</div>

<p>The same API works for Docker-based executors too, except that then your executor code can actually run inside the Docker container.
To achieve this, do the exact same thing as described here, but in the <code>ExecutorInfo</code> message instead of the <code>TaskInfo</code> <a data-type="indexterm" data-primary="containerizers" data-secondary="Docker" data-startref="cont6" id="idp17330032"></a><a data-type="indexterm" data-primary="Docker" data-secondary="containerizers" data-startref="d6c" id="idp17331120"></a>message.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="The New Offer API"><div class="sect1" id="idp17332464">
<h1>The New Offer API</h1>

<p>We’ve chosen to run Mesos because it allows us to flexibly allocate our workloads across our clusters, so that we can use our infrastructure more efficiently.
Sometimes, however, we want to make longer-term allocation decisions with Mesos.
For example, we may want to reserve certain machines to guarantee capacity for an application even when it’s not running tasks.
Of course, <a data-type="indexterm" data-primary="slave reservations" id="idp17334240"></a>slave reservations exist (as discussed in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#slave_reservations">“Static and Dynamic Slave Reservations”</a>), but this new API allows us to make reservations programmatically, without shutting down a slave.
We’ll need a way to manage these dynamically created reservations on the cluster, which is where the new API comes in.</p>

<p>The <code>launchTasks</code> <a data-type="indexterm" data-primary="launchTasks" id="lt6"></a>API that we first saw used in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#resource_offers_urb">Example&nbsp;4-5</a> has a drawback for some frameworks: once a task exits, whether normally or due to failure, its resources become available for other frameworks to claim.
In this section, we’ll take a look at the new offer API, which allows frameworks to dynamically reserve and release resources beyond the lifetimes of their tasks, as well as some of the additional features this API enables.</p>








<section data-type="sect2" data-pdf-bookmark="Framework Dynamic Reservations API"><div class="sect2" id="framework_dynamic_reservations">
<h2>Framework Dynamic Reservations API</h2>

<p>Dynamic reservations <a data-type="indexterm" data-primary="dynamic reservations API" id="drapi6"></a><a data-type="indexterm" data-primary="reservations" data-secondary="dynamic" id="r6d"></a><a data-type="indexterm" data-primary="slave reservations" data-secondary="dynamic" data-seealso="dynamic reservations API" id="idp17342928"></a>are a new feature that enables slave reservations to be made on the fly by frameworks that need to retain their resources through restarts (like databases and systems with strict SLAs).
Rather than using the <code>launchTasks</code> API, we’ll use the <code>acceptOffers</code> API.
<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#comparing_launchtasks_and_acceptoffers">Example&nbsp;6-1</a> illustrates two equivalent <code>launchTasks</code> and <code>acceptOffers</code> <a data-type="indexterm" data-primary="acceptOffers" id="ao6"></a>invocations.</p>
<div id="comparing_launchtasks_and_acceptoffers" data-type="example">
<h5><span class="label">Example 6-1. </span>Comparing launchTasks and acceptOffers</h5>

<pre data-type="programlisting" data-code-language="java"><code class="n">driver</code><code class="o">.</code><code class="na">launchTasks</code><code class="o">(</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">,</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">taskInfo</code><code class="o">)</code><code>
</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code class="c1">// Versus
</code><code>
</code><code class="n">Launch</code><code> </code><code class="n">launch</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Launch</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>                   </code><code class="o">.</code><code class="na">addTaskInfos</code><code class="o">(</code><code class="n">taskInfo</code><code class="o">)</code><code>
</code><code>                   </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="n">Operation</code><code> </code><code class="n">launchOp</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                        </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">LAUNCH</code><code class="o">)</code><code>
</code><code>                        </code><code class="o">.</code><code class="na">setLaunch</code><code class="o">(</code><code class="n">launch</code><code class="o">)</code><code>
</code><code>                        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code>
</code><code>
</code><code>
</code><code class="n">driver</code><code class="o">.</code><code class="na">acceptOffers</code><code class="o">(</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">,</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">launchOp</code><code class="o">)</code><code class="o">,</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="n">Filters</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO1-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO1-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a><code>
</code><code class="o">)</code><code class="o">;</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO1-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO1-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>First, we construct the actual command that we want to do with the offer—launching these tasks.</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO1-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO1-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Then, we construct the operation that we’ll send to Mesos—all the different commands represented by the <code>Offer.Operation</code> union. Note that <code>Operation</code> is a protobuf tagged union (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#mesos_proto_explanation">“Understanding mesos.proto”</a>).</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO1-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO1-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>Here, we’re only doing one operation on the offer. We could choose to specify a list of several operations, perhaps combining reserving resources, creating persistent volumes, and launching tasks into a single message.</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO1-4" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO1-4"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/4.png" alt="4" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/4.png"></a></dt>
<dd><p><code>acceptOffers</code> requires you to pass a <code>Filters</code> protobuf; feel free to just use the default, which does no filtering.</p></dd>
</dl>

<p>Besides using <code>acceptOffers</code> to launch a task, a framework can also reserve that task’s resources as a dynamic reservation.
When that task terminates, its resources are held in a reservation that’s valid only for this framework’s role.
This means that you can launch your production workload, and in spite of it not having preconfigured static reservations, machine reboots and transient failures will not permanently disrupt its capacity (for services that must maintain a strict SLA) or functionality (for services that need to retain their data, like databases).
Let’s enhance our Java snippet to also reserve those resources.
We’ll add another <code>Offer.Operation</code> to the list of operations we are performing on those offers, as seen in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#multiple_operations_acceptoffers">Example&nbsp;6-2</a>.</p>
<div id="multiple_operations_acceptoffers" data-type="example">
<h5><span class="label">Example 6-2. </span>Reserving resources and launching a task in a single acceptOffers</h5>

<pre data-type="programlisting" data-code-language="java"><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Launch</code><code> </code><code class="n">launch</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Launch</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>                                   </code><code class="o">.</code><code class="na">addTaskInfos</code><code class="o">(</code><code class="n">taskInfo</code><code class="o">)</code><code>
</code><code>                                   </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code> </code><code class="n">launchOp</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                              </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">LAUNCH</code><code class="o">)</code><code>
</code><code>                              </code><code class="o">.</code><code class="na">setLaunch</code><code class="o">(</code><code class="n">launch</code><code class="o">)</code><code>
</code><code>                              </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Reserve</code><code> </code><code class="n">reserve</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Reserve</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                                    </code><code class="o">.</code><code class="na">addAllResources</code><code class="o">(</code><code class="n">taskInfo</code><code class="o">.</code><code class="na">getResourcesList</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>
</code><code>                                    </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code> </code><code class="n">reserveOp</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                               </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">RESERVE</code><code class="o">)</code><code>
</code><code>                               </code><code class="o">.</code><code class="na">setReserve</code><code class="o">(</code><code class="n">reserve</code><code class="o">)</code><code>
</code><code>                               </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code class="n">driver</code><code class="o">.</code><code class="na">acceptOffers</code><code class="o">(</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">,</code><code>
</code><code>    </code><code class="n">Arrays</code><code class="o">.</code><code class="na">asList</code><code class="o">(</code><code class="n">reserveOp</code><code class="o">,</code><code> </code><code class="n">launchOp</code><code class="o">)</code><code class="o">,</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a><code>
</code><code>    </code><code class="n">Filters</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code>
</code><code class="o">)</code><code class="o">;</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO2-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO2-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>As before, we construct the launch operation.</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO2-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO2-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>We also need to construct the reserve operation; here, we’re simply copying all the resources from the launched task so that the reservation for the task will persist beyond the task’s lifetime.</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO2-3" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO2-3"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/3.png" alt="3" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/3.png"></a></dt>
<dd><p>We can pass multiple operations into an <code>acceptOffers</code>. This is equivalent to waiting for the reservation to be acknowledged and reoffered by the master, but it saves a round-trip across the network.</p></dd>
</dl>

<p>Now that we know how to reserve resources and launch tasks on them, a logical question pops up: how do we determine whether an offered resource is from an existing dynamic reservation?
Resources can have an additional field, <code>reservation</code>, that we can check to see if those resources been reserved, and by whom, as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#querying_resources_for_the_reservation_status">Example&nbsp;6-3</a>.</p>
<div id="querying_resources_for_the_reservation_status" data-type="example">
<h5><span class="label">Example 6-3. </span>Querying resources for the reservation status</h5>

<pre data-type="programlisting" data-code-language="java"><code class="k">if</code><code> </code><code class="o">(</code><code class="n">resource</code><code class="o">.</code><code class="na">hasReservation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="n">resource</code><code class="o">.</code><code class="na">getReservation</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getPrincipal</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code class="o">}</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO3-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO3-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>This call will return <code>true</code> if the resource is reserved.</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO3-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO3-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>If the resource was reserved, we can get the name of the principal that reserved it. The principal is often the same as the framework’s <code>user</code>.</p></dd>
</dl>
<div data-type="warning" epub:type="warning"><h1>Handling Reservations in Offers</h1>
<p>When using dynamic reservations, you may need to revise the code used to count how many resources are in an offer.
Take another look at <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#first_fit_offer_packing">Example&nbsp;4-10</a>.
Notice that we actually used <code>+=</code> every time we encountered a CPU or memory resource.
This ensures that we’ll be able to use both reserved and unreserved resources for launching our tasks.</p>
</div>

<p>Once a slave dies, the reservation will be automatically freed.
If your framework is tracking all the outstanding reservations, you can use the <code>slaveLost</code> callback to determine when a reservation on an old slave no longer exists.
If you no longer need a reservation, you can free it by using the unreserve operation in <code>acceptOffers</code>, as demonstrated in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#unreserving_resources">Example&nbsp;6-4</a>.</p>
<div id="unreserving_resources" data-type="example">
<h5><span class="label">Example 6-4. </span>Unreserving resources</h5>

<pre data-type="programlisting" data-code-language="java"><code class="n">List</code><code class="o">&lt;</code><code class="n">Resource</code><code class="o">&gt;</code><code> </code><code class="n">resources</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">Resource</code><code> </code><code class="n">r</code><code> </code><code class="o">:</code><code> </code><code class="n">offer</code><code class="o">.</code><code class="na">getResourcesList</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">r</code><code class="o">.</code><code class="na">hasReservation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">resources</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">r</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code><code>
</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Unreserve</code><code> </code><code class="n">unreserve</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Unreserve</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                                        </code><code class="o">.</code><code class="na">addAllResources</code><code class="o">(</code><code class="n">resources</code><code class="o">)</code><code> </code><a class="co" id="co_advanced_topics_in_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#callout_advanced_topics_in_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a><code>
</code><code>                                        </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code> </code><code class="n">unreserveOp</code><code> </code><code class="o">=</code><code> </code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                                </code><code class="o">.</code><code class="na">setType</code><code class="o">(</code><code class="n">Offer</code><code class="o">.</code><code class="na">Operation</code><code class="o">.</code><code class="na">Type</code><code class="o">.</code><code class="na">UNRESERVE</code><code class="o">)</code><code>
</code><code>                                </code><code class="o">.</code><code class="na">setUnreserve</code><code class="o">(</code><code class="n">unreserve</code><code class="o">)</code><code>
</code><code>                                </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>
</code><code class="n">driver</code><code class="o">.</code><code class="na">acceptOffers</code><code class="o">(</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">offer</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">,</code><code>
</code><code>    </code><code class="n">Collections</code><code class="o">.</code><code class="na">singletonList</code><code class="o">(</code><code class="n">unreserveOp</code><code class="o">)</code><code class="o">,</code><code>
</code><code>    </code><code class="n">Filters</code><code class="o">.</code><code class="na">newBuilder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code>
</code><code class="o">)</code><code class="o">;</code></pre></div>
<dl class="calloutlist">
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO4-1" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO4-1"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/1.png" alt="1" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/1.png"></a></dt>
<dd><p>We find all the previously reserved resources.</p></dd>
<dt><a class="co" id="callout_advanced_topics_in_mesos_CO4-2" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#co_advanced_topics_in_mesos_CO4-2"><img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/2.png" alt="2" width="12" height="12" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/2.png"></a></dt>
<dd><p>Here, we unreserve all of the resources that were previously reserved.</p></dd>
</dl>
<div data-type="warning" epub:type="warning"><h1>Reservations Are Forever</h1>
<p>If you don’t unreserve resources when you’re finished, Mesos will continue to hold those resources aside forever, until you unreserve them.
Dynamic reservations will leave beta once their administrative HTTP API is put into place.
The HTTP API will allow the Mesos cluster’s human operators to unreserve resources on a framework’s behalf.</p>
</div>

<p>The dynamic reservations API is a powerful tool for building even more robust applications on Mesos.
An HTTP API is available on the master as another way to manage dynamic reservations (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#dynamic_reservations">“Dynamic reservations”</a>).
This API makes it easy to alter reservations across the Mesos cluster on the fly.
It also makes it easy to unreserve resources a framework may have left behind after it was shut down for the last time.
Dynamic resources are just the start of the <code>acceptOffers</code> API; we’ll now look at the persistent <a data-type="indexterm" data-primary="dynamic reservations API" data-startref="drapi6" id="idp17901696"></a><a data-type="indexterm" data-primary="reservations" data-secondary="dynamic" data-startref="r6d" id="idp17567072"></a><a data-type="indexterm" data-primary="acceptOffers" data-startref="ao6" id="idp17568288"></a>volumes API.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Persistent Volumes for Databases"><div class="sect2" id="idp17339552">
<h2>Persistent Volumes for Databases</h2>

<p>Until <a data-type="indexterm" data-primary="persistent volumes API" id="idp17591072"></a>recently, Mesos could only run services that didn’t need to store data to disk.
That’s because there was no way to reserve the chunk of disk necessary.
As of Mesos 0.23, reserving disks is now possible.</p>

<p>Remember from <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#chapter_1">Chapter&nbsp;1</a>, you can think of Mesos as a deployment system.
Wouldn’t it be great if our MySQL databases automatically backed themselves up and created new read replicas as needed?
Or if we could have simple, self-service REST APIs to create new Riak and Cassandra clusters?
There’s been work ongoing since 2014 to build database frameworks for Mesos.
The issue with those frameworks is that every host has to have special data partitions created and managed outside of Mesos.
With persistent volumes, projects like Apache Cotton (for MySQL) and the Cassandra and Riak Mesos frameworks will be able to independently bootstrap and maintain themselves.</p>

<p>In Mesos’s design, disk space is ephemeral and isolated for every task.
This is usually a good thing, unless you want to store data persistently.
To solve this, Mesos introduced a new subtype of disk resources, called a <em>volume</em>.
A <a data-type="indexterm" data-primary="volume" id="idp17740192"></a>volume is simply a chunk of disk that is allocated for a task and mounted at a specified location.
The API for doing this is essentially the same as the Marathon API for mounting host volumes, see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#mounting_host_volumes">“Mounting host volumes”</a>.
You can even create a volume that isn’t persistent, which will be useful in the future when multiple independent disks can be exposed to Mesos.
Now, we’ll look at how to create and use persistent volumes.</p>

<p>There are two <code>acceptOffers</code> <code>Operation</code>s that are used to create and destroy persistent volumes.
Unsurprisingly, they’re called <code>Create</code> and <code>Destroy</code>.
Persistent volumes can only be created on disk resources that have been reserved.
Typically, you’ll reserve the resources, create the volumes, and launch the tasks in a single <code>acceptOffers</code>, as shown in <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#multiple_operations_acceptoffers">Example&nbsp;6-2</a>.</p>

<p>A persistent volume resource is the same as a regular disk resource (see <a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#custom_resources_info">“Resources”</a>), but it has the field <code>disk</code> configured with the appropriate <code>DiskInfo</code>.
The <code>DiskInfo</code> names the persistent volume so that it can be mounted by name via the nested string subfield <code>persistence.id</code>.
The <code>Volume</code> of the <code>DiskInfo</code> should have the mode <code>RW</code> (as of Mesos 0.24, only <code>RW</code> is supported).
The <code>container_path</code> field of the <code>Volume</code> will specify where the container will be mounted in the task’s sandbox.</p>

<p>The persistent volume API is so new that no production frameworks have been written using it yet.
It has limitations, such as that the volumes must always be mounted <code>RW</code>, and there’s no way to expose multiple disks or have any disk or I/O isolation.
The API will remain backward-compatible even as new features and functionality are added, though;
because of this, projects such as Apache Cotton are already integrating persistent volumes into their codebases.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp17892960">
<h1>Summary</h1>

<p>Mesos offers sophisticated, well-thought-out APIs for many different use cases.
First, we discussed the internal architecture of Mesos at a high level, to help us understand why things are built the way they are.
We then dove into a thorough analysis of how Mesos maintains internal and external consistency.
By understanding the consistency model, we can build far more robust and failure-tolerant frameworks.</p>

<p>Next, we learned about the reconciliation process that is used to synchronize frameworks with the Mesos master.
By understanding the mechanisms of the reconciliation process, it’s possible to understand how to eventually guarantee consistency across a Mesos cluster, what types of inconsistencies can occur, and how to interpret those inconsistencies.</p>

<p>Then, we moved on to Mesos’s integration with Docker, a popular application containerization and deployment format.
By integrating containerization into frameworks, we can leverage broader ecosystems, such as all Dockerized applications.</p>

<p>Finally, we looked at dynamic reservations and persistent volumes, features enabled by the new <code>acceptOffers</code> API.
Dynamic reservations allow us to far more easily guarantee capacity for critical workloads.
Persistent volumes allow us to build database frameworks for Mesos that can persist their data in spite of unanticipated failures and faults throughout the system.</p>

<p>At this point, we’ve covered a variety of topics and techniques that are useful in building applications on Mesos today.
In the next chapter, we’re going to look at what’s coming for Mesos tomorrow.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idp17214768"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17214768-marker" class="totri-footnote">1</a></sup> It appeared as a component of <a href="http://lithe.eecs.berkeley.edu/">the Lithe project</a>.</p><p data-type="footnote" id="idp17226144"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17226144-marker" class="totri-footnote">2</a></sup> The CAP theorem is a theoretical result about the possible and impossible behaviors of distributed systems. You can read about it in <a href="http://bit.ly/gilbert_lynch">“Brewer’s Conjecture and the Feasibility of Consistent, Available, Partition-Tolerant Web Services,”</a> by Seth Gilbert and Nancy Lynch.</p><p data-type="footnote" id="idp17237056"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17237056-marker" class="totri-footnote">3</a></sup> Note that if the slave reconnects within its configured timeout, the slave and all its tasks will continue as normal. This behavior is what zero-downtime live upgrades of Mesos rely on.</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch05.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">5. Building a Mesos Executor</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch07.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">7. The Future of Mesos</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch06.html" data-for-analytics="9781491926543:ch06.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#">Reset</a>
</div>
</div></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ch07.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ch07.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ch07.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ch07.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>7. The Future of Mesos - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch07.html"><meta name="description" content=" Chapter 7. The Future of Mesos Mesos has come a long way. It started out as a graduate student project at the University of California, Berkley, but since then, it ... "><meta property="og:title" content="7. The Future of Mesos"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="7. The Future of Mesos"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch07.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Chapter 7. The Future of Mesos Mesos has come a long way. It started out as a graduate student project at the University of California, Berkley, but since then, it ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch07.html" data-for-analytics="9781491926543:ch07.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch07.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch07.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch07.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%207.%20The%20Future%20of%20Mesos&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ch07.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch06.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">6. Advanced Topics in Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ix01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Index</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 7. The Future of Mesos"><div class="chapter" id="idp18119216">
<h1><span class="label">Chapter 7. </span>The Future of Mesos</h1>


<p>Mesos has come a long way.
It started out as a graduate student project at the University of California, Berkley, but since then, it’s been rolled out in production across hundreds of thousands of machines, attracting scores of developers to its ecosystem.
We’ve learned about building applications on Mesos today, but where is Mesos going?
In this chapter, we’ll look at several current initiatives in the Mesos ecosystem that stand to become critical and valuable features of Mesos.</p>






<section data-type="sect1" data-pdf-bookmark="Multitenant Workloads"><div class="sect1" id="idp18121424">
<h1>Multitenant Workloads</h1>

<p>Before we discuss multitenancy, let’s look at a motivating problem: noisy neighbors.
Noisy neighbors are a problem in real life as well as in distributed systems with multiple users (tenants).
When an apartment building’s walls are too thin, you can hear your neighbors blaring music through the walls.
Analogously, when a system doesn’t provide sufficient isolation (i.e., thick walls), your application’s performance can be adversely affected by other applications running on the same machine.
For example, multiple CPU-intensive applications running on the same machine could all compete to use every CPU, resulting in reduced overall performance.
As a result, it’s hard for the users or cluster operators to predict the performance of their applications—whereas if those applications were running in containers, they’d each be guaranteed a share of the CPU, reducing the unpredictability of their performance.</p>

<p><em>Multitenancy</em> <a data-type="indexterm" data-primary="multitenancy" id="m7"></a>refers to when a single resource (in our case, a Mesos cluster and the resources on its slaves) must be shared by many users, and the associated problems when those users accidentally monopolize what should be shared.
You want a system that is designed for multitenancy, because it’s much easier to have Mesos manage the isolation of resources rather than relying on users to carefully write cooperative applications.</p>

<p>Today, many Mesos installations benefit from containerization by isolating different applications from one another;
in the future, more and more Mesos clusters will be isolating different users or customers from one another.
Many large enterprises have struggled with multitenancy problems.
For example, many companies administer and run separate Hadoop clusters for each team that needs a cluster.
Why don’t they just share one big cluster?
Frequently, it’s not possible for each team to achieve the level of service and performance they need if they can’t predict how much the cluster will be utilized at any point.
Separate clusters isolate the teams from one another, ensuring that each always can fully utilize the resources it needs.
The separation of their systems is a solution to the noisy neighbor problem; however, since they’re not sharing, the companies have to buy many more computers.</p>

<p>Mesos can serve multitenant workloads by allowing many users to share the same physical hardware (or VMs); with Mesos, <a data-type="indexterm" data-primary="Linux containers" id="idp18000272"></a><a data-type="indexterm" data-primary="containerizers" data-secondary="Linux" id="idp18000976"></a>Linux containers provide the isolation.
Linux containers are a technology based on cgroups, open sourced by Google to enable high-performance isolation of multiple workloads on the same machine.
Through projects like CoreOS, Docker, and Mesos, Linux containers have grown from an interesting but difficult to use technology into a powerful, popular, lightweight isolation mechanism.
Although cgroups initially only provided support for isolating CPUs and memory, more and more Linux kernel subsystems are being integrated.
For instance, in July 2014, Mesos added deep integration with the Linux network isolation stack.
This allows for Mesos to be configured to control and isolate network bandwidth usage between containers running on the cluster.
Currently, there is ongoing work to bring isolation to disk I/O usage between containers.
Over time, we’ll see Mesos get more and more isolation features added, which will continue to reduce the noisy neighbor problem in multitenant workloads.</p>

<p>There are also Mesos frameworks being built to solve multitenancy problems at a higher level, to make it easier for enterprises to achieve good isolation between different users of a shared Mesos cluster.
For example, <a href="https://github.com/apache/incubator-myriad">Myriad</a> <a data-type="indexterm" data-primary="Myriad" id="idp18004560"></a><a data-type="indexterm" data-primary="eBay Myriad" id="idp18005296"></a><a data-type="indexterm" data-primary="YARN" id="idp18005968"></a>was started in 2014 by eBay to run YARN on Mesos.
YARN is the resource manager for <a data-type="indexterm" data-primary="Hadoop" id="idp18006768"></a>Hadoop 2.0.
With Myriad, a single REST API request is all that’s needed to create a new, fully isolated YARN cluster in Mesos.
Thus, if you deploy Myriad, when a new team needs a Hadoop cluster for experimentation or production, there’s nearly no administrative or operational cost.
Another multitenant Mesos framework is <a href="https://github.com/twosigma/cook">Cook</a>, <a data-type="indexterm" data-primary="Cook" id="idp18130160"></a>written by the author of this book and open sourced by <a data-type="indexterm" data-primary="Two Sigma Cook" id="idp18131024"></a>Two Sigma in 2015.
Cook is a preemptive job scheduler; it’s designed to allow any user to use as many resources as are available, but automatically scale that user back if other users’ demand for capacity increases later.</p>

<p>Another way that Mesos supports multitenancy is through resource reservations.
<a data-type="indexterm" data-primary="resource reservations" id="idp18132320"></a><a data-type="indexterm" data-primary="reservations" id="idp18133024"></a>Reservations can be used to enable and enforce minimum quotas in multitenant environments, making them the strongest guarantee in a multitenant environment, at the cost of dynamic flexibility.
If you believe that generally users won’t monopolize the entire Mesos cluster, you can not bother with reservations and allow any framework to scale itself up or down freely.
When some users have production-critical service-level agreements that must be met, you can use reservations to guarantee them specific resources.
As of version 0.25, Mesos has added RESTful HTTP APIs so that cluster operators can easily create reservations for users on the fly, to simplify guaranteeing resources to particular users and workloads.
There’s also an initiative to add a RESTful quota API to Mesos, so that operators can allow Mesos to figure out reservations for them, based on high-level guidelines on how many resources each role should be limited to.</p>

<p>Mesos offers many features for building more robust multitenant systems.
It in<span class="keep-together">tegrates</span> with the Linux kernel’s resource isolation mechanisms to provide low-level isolation between tasks on the cluster.
Framework authors are also aware of this problem, and more and more frameworks are coming out to simplify the management of multitenant clusters.
Resource reservations are the most powerful tool for solving multitenancy problems: they absolutely guarantee a tenant resources, at the expense of preventing other users from accessing those resources.
Now, what if there was a way for a resource to be reserved but still shared if it wasn’t currently needed?
In the next section, we’ll look at the oversubscription feature Mesos added in <a data-type="indexterm" data-primary="multitenancy" data-startref="m7" id="idp18136528"></a>version 0.23.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Oversubscription"><div class="sect1" id="idp18137760">
<h1>Oversubscription</h1>

<p>What <a data-type="indexterm" data-primary="oversubscription" id="os7"></a><a data-type="indexterm" data-primary="resources" data-secondary="optimization" data-see="oversubscription" id="idp18140368"></a>does it mean to utilize a cluster at 100%?
To some, we’re at 100% utilization when we have no more free resources on our Mesos cluster.
However, even when a framework reserves a resource for a task (such as a web server), that task might not fully use all those resources.
In fact, on most clusters, the actual usage is only 10–30%.
To counter this, the Mesos oversubscription feature was created.
It allows for Mesos clusters to automatically utilize their reserved but unused resources.<sup><a data-type="noteref" id="idp17976224-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp17976224" class="totri-footnote">1</a></sup></p>

<p>To understand oversubscription, let’s first <a data-type="indexterm" data-primary="slack (of resources)" id="s7"></a><a data-type="indexterm" data-primary="resources" data-secondary="slack of" id="r7so"></a>define <em>slack</em>.
Slack is the difference between what resources you think you’re using and what you’re actually using (<a data-type="xref" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#allocation_and_usage_slack_of_cpus_and_memory">Figure&nbsp;7-1</a>).
Everyone’s goal is to reduce slack: slack is just waste, where resources could be doing something productive, but instead sit idle.
There are two kinds of slack on a Mesos cluster:</p>
<dl>
<dt>Allocation slack</dt>
<dd>
<p>Allocation slack <a data-type="indexterm" data-primary="allocation slack" id="as7"></a>is the difference between the resources available on the cluster and the resources that are reserved by frameworks.
Mesos was engineered to address this type of slack efficiently, by repeatedly reoffering resources to all connected frameworks.
This way, if one framework didn’t want or couldn’t make use of some resources, another framework could have the chance to use those resources.
Some frameworks, such as Spark, take advantage of this by launching many small tasks that use few resources, so that they can get tiny allocations on many machines, driving cluster utilization up and exploiting those resources for their users.</p>
</dd>
<dt>Usage slack</dt>
<dd>
<p>Usage <a data-type="indexterm" data-primary="usage slack" id="us7"></a>slack is the difference between the reserved resources and what resources are actually used.
For instance, if a web server reserves two CPUs, it may be using nearly no resources if it’s an off-peak time where it doesn’t have many requests to process.
The oversubscription feature is designed to allow Mesos to reduce this type of slack as well.</p>
</dd>
</dl>

<figure><div id="allocation_and_usage_slack_of_cpus_and_memory" class="figure">
<img src="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/assets/baom_0701.png" alt="" width="1181" height="810" data-mfp-src="/library/view/building-applications-on/9781491926543/assets/baom_0701.png">
<h6><span class="label">Figure 7-1. </span>Allocation and usage slack of CPUs and memory</h6>
</div></figure>

<p>In some ways, Mesos has become a victim of its own success: allocation slack can be dramatically reduced on Mesos clusters, with commercial production clusters reporting allocation slacks of 5–15%, which is much lower than the 20–30% seen with earlier systems.
So, a consortium of companies, including Twitter, Mesosphere, and Intel, set out to build a system that would enable Mesos to reduce usage slack.
The result of their work is the Mesos oversubscription system, which applies control theory to usage slack on many <a data-type="indexterm" data-primary="allocation slack" data-startref="as7" id="idp17990976"></a>resources.</p>

<p>To enable oversubscription, Mesos added a new type of resource offer: a <em>revocable</em> offer.
Revocable offers <a data-type="indexterm" data-primary="revokable offers" id="idp17993136"></a><a data-type="indexterm" data-primary="offers" data-secondary="revokable" id="idp17993840"></a>are exactly like normal offers, except that tasks launched on revocable offers can be killed by Mesos at any time.
By default, frameworks won’t receive any revocable offers; they can opt in by adding the <code>REVOCABLE_RESOURCES</code> capability to their <code>FrameworkInfo</code>s when they register.
If the Mesos cluster has also been configured to enable the oversubscription mechanism, then any opted-in frameworks will see another type of offer along with normal offers:
these special offers will have their <code>revocable</code> field populated, which means they can be canceled at any time.
Note that currently an executor must have only revocable or normal resources; a mix of revocable and nonrevocable tasks cannot be launched on the same executor.</p>

<p>The oversubscription system is comprised of two pluggable components: the resource estimator, <a data-type="indexterm" data-primary="resource estimator" id="idp18032064"></a>and the <a data-type="indexterm" data-primary="quality of service (QoS) controller" id="idp18032896"></a>quality of service (QoS) controller.
The resource estimator’s job is to report to the slave how much slack is currently available in its running tasks, so that the slave can advertise the slack as additional resources.
The QoS controller’s job is to track the usage slack.
When the usage slack decreases below what has been allocated to revocable resources, the QoS controller will begin to kill revocable tasks to ensure that the cluster’s guaranteed reserved resources are <a data-type="indexterm" data-primary="usage slack" data-startref="us7" id="idp18034192"></a><a data-type="indexterm" data-primary="slack (of resources)" data-startref="s7" id="idp18035136"></a><a data-type="indexterm" data-primary="resources" data-secondary="slack of" data-startref="r7so" id="idp18036080"></a>provided.</p>

<p>In Mesos 0.23, there is only a single, fixed resource estimator, which allows a cluster administrator to have all slaves advertise fixed extra resources.
This can be useful when you know that most tasks request one or two CPUs, but typically only use 5–10% of their resources.
The fixed resource estimator can then allow every slave to have many more tasks scheduled on it than it actually has CPUs.
Only a no-op QoS controller ships with Mesos 0.23.</p>

<p>Mesosphere and Intel are also building <a href="https://github.com/mesosphere/serenity">Serenity</a>, which <a data-type="indexterm" data-primary="Mesosphere" id="idp18039472"></a><a data-type="indexterm" data-primary="Intel" id="idp18040208"></a><a data-type="indexterm" data-primary="Serenity" id="idp18040880"></a>is a sophisticated control system that repeatedly dynamically measures the usage slack on each slave, so that the cluster can utilize those resources.
Serenity also understands how to estimate the impact of noisy neighbors, how to distinguish between a task that is starting up and a task that has reached its steady state, and other practical adjustments necessary to optimize cluster utilization.</p>

<p>Oversubscription is a powerful new feature that will help large clusters squeeze 10–40% more out of their resources.
The revocable resources that oversubscription brings aren’t only useful for allocating into slack resources; they will also form the basis of preemptable <a data-type="indexterm" data-primary="oversubscription" data-startref="os7" id="idp18042768"></a>tasks.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Databases and Turnkey Infrastructure"><div class="sect1" id="idp18138384">
<h1>Databases and Turnkey Infrastructure</h1>

<p>Today, <a data-type="indexterm" data-primary="databases" id="db7"></a><a data-type="indexterm" data-primary="infrastructure improvements" id="ii7"></a>creating the complete infrastructure for an always-available distributed system is challenging.
You need to set up databases, web servers, big data filesystems, analytics tools, monitoring systems, and report generation processes.
This is a lot of work—beside the challenge of sorting through the countless technologies and solutions in each space, every tool has its own specific way that it needs to be installed and configured.
Creating a process to enable repeatable installation and configuration is often a major sticking point.
On the one hand, one must typically write a large amount of bespoke deployment code to ensure that it’s possible to reliably rebuild the entire infrastructure.
On the other hand, it’s very expensive and time-consuming to do so, and thus often that work will be deferred until the system has time to mature.
Mesos stands in a position to change the way we approach deploying distributed application infrastructures.</p>

<p>Mesos <a data-type="indexterm" data-primary="persistent disks" id="idp18048592"></a>has always been adept at running computation-oriented tasks, such as web servers and analytics frameworks.
In version 0.23, Mesos finally added support for managing disks on the cluster.
As a result, many data-oriented applications are now able to become Mesos frameworks.
For instance, <a href="https://github.com/mesosphere/cassandra-mesos">Cassandra</a>,<a data-type="indexterm" data-primary="Cassandra" id="idp18050704"></a><sup><a data-type="noteref" id="idp18051440-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18051440" class="totri-footnote">2</a></sup> <a href="https://github.com/mesosphere/hdfs">HDFS</a>,<sup><a data-type="noteref" id="idp18052864-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18052864" class="totri-footnote">3</a></sup> <a data-type="indexterm" data-primary="HDFS" id="idp18053584"></a><a data-type="indexterm" data-primary="Kafka" id="idp18054288"></a>and <a href="https://github.com/mesos/kafka">Kafka</a><sup><a data-type="noteref" id="idp18055664-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18055664" class="totri-footnote">4</a></sup> have already started seeing use on Mesos clusters.
Over the course of early 2016, as the Mesos persistent disks API sees more uptake, Mesos’s ecosystem will finally provide numerous robust choices for disk-based applications.
One of the exciting projects to watch is <a href="https://github.com/apache/incubator-cotton">Apache Cotton</a> (formerly Mysos), <a data-type="indexterm" data-primary="Cotton" id="idp18057392"></a><a data-type="indexterm" data-primary="Apache Cotton" id="idp18154304"></a>which provides powerful automation for MySQL clusters.</p>

<p>In 2016, we’re finally going to be able to simply install a Mesos cluster, and then ask the Mesos cluster to bootstrap our databases, monitoring systems, web servers, and analytics engines.
This will dramatically simplify the amount of work needed to get a scalable, high-availability, self-healing cluster up and running.
Since Mesos frameworks are running programs that can react to changing cluster conditions, they’ll be able to automatically handle rote database maintenance and other standard cluster operation tasks.
By automating these time-consuming tasks, operations staff will be able to spend more time focusing on other issues, such as application tuning and increasing <a data-type="indexterm" data-primary="databases" data-startref="db7" id="idp18155872"></a><a data-type="indexterm" data-primary="infrastructure improvements" data-startref="ii7" id="idp18156720"></a>utilization.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="IP per Container"><div class="sect1" id="idp18157952">
<h1>IP per Container</h1>

<p>Another exciting feature coming for Mesos is <a data-type="indexterm" data-primary="IP per container system" id="ippcs7"></a>IP per container.
The problem we’d like to solve has two cases:</p>
<ol>
<li>
<p>We’d like to use plain DNS names to have our browser automatically find tasks on our Mesos cluster (e.g., <em>mytask.mesos.mycompany.com</em>).</p>
</li>
<li>
<p>We’d like to more easily port applications that were built to run on an entire machine to Mesos (e.g., Cassandra, Riak, and other databases).</p>
</li>

</ol>

<p>Mesos already has a <a data-type="indexterm" data-primary="DNS names" id="idp18163504"></a><a data-type="indexterm" data-primary="Mesos-DNS" id="idp18164112"></a>DNS solution, called <a href="https://github.com/mesosphere/mesos-dns">Mesos-DNS</a>.
Mesos-DNS reads all the task metadata from the masters, and, for tasks that specify service discovery information or have alphanumeric-only names, Mesos-DNS will generate DNS records so that those tasks can be found through standard mechanisms.
Alas, there remains a difficult problem: when a task needs to listen on some ports, most Mesos frameworks will dynamically allocate those ports based on what’s available on the slave.
As a result, even if you know the DNS name of the host, the browser will only try ports 80 (HTTP) and 443 (HTTPS).
Thus, the browser won’t be able to actually connect to the running application.
Today, Mesos-DNS solves this by also serving <code>SRV</code> records, which include the port number that the service is running on.
Unfortunately, browsers don’t support <code>SRV</code> records, although you can use Nginx as a stopgap.<sup><a data-type="noteref" id="idp18167056-marker" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18167056" class="totri-footnote">5</a></sup></p>

<p>The IP per container system solves this problem by allocating each executor its own specific IP address.
This way, the DNS entry for the task points to the executor’s IP address, and then the task can bind to whatever ports it wants on its private IP address.
The way this works is that each executor’s container gets its own Linux network namespace.
This creates a separate network stack per container, so that the host can route traffic to the appropriate container.
In addition, each network stack can have quality of service controls applied to it, so that each container can be assigned guaranteed network bandwidth.
This feature will allow Mesos to manage IP addresses as first-class resources, like CPU, memory, and disk are <a data-type="indexterm" data-primary="IP per container system" data-startref="ippcs7" id="idp18169568"></a>today.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idp18170672">
<h1>Summary</h1>

<p>There are a lot of new and exciting features and plans in the Mesos ecosystem.
Mesos has been built from the ground up to provide the strong isolation guarantees necessary to build out <a data-type="indexterm" data-primary="multitenancy" id="idp18172128"></a>multitenant systems, and we’ve been starting to see that with systems like <a data-type="indexterm" data-primary="Myriad" data-seealso="Cotton" id="idp18172864"></a><a data-type="indexterm" data-primary="eBay Myriad" data-seealso="Cotton" id="idp18173712"></a><a data-type="indexterm" data-primary="Cook" id="idp18174560"></a><a data-type="indexterm" data-primary="Two Sigma Cook" id="idp18175168"></a>Myriad and Cook, as well as features like the network isolator.</p>

<p>Alongside the growing use in multitenant applications, Mesos is developing a sophisticated <a data-type="indexterm" data-primary="oversubscription" id="idp18176400"></a>oversubscription feature that will enable the same type of high cluster utilization that Google has been able to achieve.
This oversubscription feature as designed is easy to get started with (if you want fixed oversubscription), and advanced dynamically adaptive oversubscription is well underway.</p>

<p>Finally, <a data-type="indexterm" data-primary="persistent disks" id="idp18177840"></a>persistent disks and IP per container are the last features needed to allow Mesos to offer the complete infrastructure management system that other products like OpenStack were built to serve.
Mesos clusters can manage all of an organization’s infrastructure, including analytics, databases, and services.
Having an IP address per container will make it much easier to port legacy applications that require specific port ranges, and to easily expose Mesos applications to end users without building complex routing and proxying layers.</p>

<p>Mesos is taking over the data center, bringing lightweight containerization, orchestration, and simple, centralized management to everyone with its open source ecosystem.</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idp17976224"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp17976224-marker" class="totri-footnote">1</a></sup> The Mesos oversubscription feature is a solution to low actual utilizations, based on Google’s <a href="http://bit.ly/googleheracles">Heracles</a> system.</p><p data-type="footnote" id="idp18051440"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18051440-marker" class="totri-footnote">2</a></sup> Cassandra is a high-performance NoSQL database, popular for its extremely high scalability.</p><p data-type="footnote" id="idp18052864"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18052864-marker" class="totri-footnote">3</a></sup> HDFS, the Hadoop Filesystem, is one of the most popular big data filesystems.</p><p data-type="footnote" id="idp18055664"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18055664-marker" class="totri-footnote">4</a></sup> Kafka is a high-performance, replicated queue that enables big data publish/subscribe workloads to scale.</p><p data-type="footnote" id="idp18167056"><sup><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18167056-marker" class="totri-footnote">5</a></sup> Nginx can be configured to route incoming domain names based on <code>SRV</code> records with <a href="https://github.com/vlipco/srv-router">SRV Router</a>.</p></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch06.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">6. Advanced Topics in Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ix01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Index</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ch07.html" data-for-analytics="9781491926543:ch07.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#">Reset</a>
</div>
</div></body></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/ix01.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="ix01.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom gr__safaribooksonline_com" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/ix01.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="ix01.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>Index - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ix01.html"><meta name="description" content="Index A acceptOffers, Framework Dynamic Reservations API-Framework Dynamic Reservations API ACL rules, Bamboo actor model, Libprocess and the Actor Model-Libprocess and the Actor Model advisory messages, Rewriting the ... "><meta property="og:title" content="Index"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="Index"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ix01.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content="Index A acceptOffers, Framework Dynamic Reservations API-Framework Dynamic Reservations API ACL rules, Bamboo actor model, Libprocess and the Actor Model-Libprocess and the Actor Model advisory messages, Rewriting the ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ix01.html" data-for-analytics="9781491926543:ix01.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ix01.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ix01.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ix01.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20Index&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/ix01.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch07.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">7. The Future of Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/colophon01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">About the Author</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="index" epub:type="index"><div class="index" id="idp18180208"><h1>Index</h1><div data-type="index"><div data-type="indexdiv"><h3>A</h3><ul><li><span data-type="index-term">acceptOffers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#ao6">Framework Dynamic Reservations API</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17568288">Framework Dynamic Reservations API</a></li><li><span data-type="index-term">ACL rules</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9535664">Bamboo</a></li><li><span data-type="index-term">actor model</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#am6">Libprocess and the Actor Model</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17220864">Libprocess and the Actor Model</a></li><li><span data-type="index-term">advisory messages</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15112096">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">agent, Mesos</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp14752">The Slaves</a></li><li><span data-type="index-term">allocation slack</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#as7">Oversubscription</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp17990976">Oversubscription</a></li><li><span data-type="index-term">Amazon Elastic Load Balancer</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9801360">Singularity</a></li><li><span data-type="index-term">Amazon S3 storage</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16258352">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Ansible</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3477712">Mesos as a Deployment System</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16529264">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Apache Cotton</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7799760">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18154304">Databases and Turnkey Infrastructure</a></li><li><span data-type="index-term">Apache Curator</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12855600">Adding High Availability</a></li><li><span data-type="index-term">Aurora</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9804800">Aurora</a></li></ul></div><div data-type="indexdiv"><h3>B</h3><ul><li><span data-type="index-term">Bamboo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#b3">Bamboo</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9545408">Bamboo</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9571120">HAProxy for microservices</a></li><li><span data-type="index-term">Basho</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7802672">Not Managed by Mesos</a></li><li><span data-type="index-term">Berkeley AMP lab</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3497376">Introduction to Mesos</a></li><li><span data-type="index-term">black hole hosts</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14203200">Hardening Your Scheduler</a></li><li><span data-type="index-term">blacklists</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14154512">Hardening Your Scheduler</a></li></ul></div><div data-type="indexdiv"><h3>C</h3><ul><li><span data-type="index-term">callbacks, ignoring</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#cb5i">Rewriting the CommandExecutor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15106384">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">canary tasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14881632">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17182896">Canary tasks</a></li><li><span data-type="index-term">CAP theorem</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17225408">The Consistency Model</a></li><li><span data-type="index-term">Cassandra</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7801216">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18050704">Databases and Turnkey Infrastructure</a></li><li><span data-type="index-term">central controllers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp465552">Frameworks</a></li><li><span data-type="index-term">centralized load balancing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9559360">HAProxy for microservices</a></li><li><span data-type="index-term">Cgroups</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp27504">The Slaves</a></li><li><span data-type="index-term">Chaos</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7869440">Setting Up Marathon</a></li><li><span data-type="index-term">checkpointing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14591568">Checkpointing</a></li><li><span data-type="index-term">Chef</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3478448">Mesos as a Deployment System</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16527888">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Chronos</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ch3">Running Mesos Frameworks on Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9789120">Chronos on Marathon: Summary</a><ul><li><span data-type="index-term">alternatives to</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9792624">Alternatives to Marathon + Chronos</a></li><li><span data-type="index-term">deferred start</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9624592">What Is Chronos?</a></li><li><span data-type="index-term">dependency tracking</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9620112">What Is Chronos?</a></li><li><span data-type="index-term">dependent jobs feature</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9774944">Chronos Operational Concerns</a></li><li><span data-type="index-term">interval scheduling</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9616736">What Is Chronos?</a></li><li><span data-type="index-term">key features for scheduling</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ch3kffs">What Is Chronos?</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9632912">What Is Chronos?</a></li><li><span data-type="index-term">operational concerns</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9772592">Chronos Operational Concerns</a></li><li><span data-type="index-term">running on Marathon</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ch3rom">Running Chronos on Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9768224">Running Chronos on Marathon</a></li><li><span data-type="index-term">securing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ch3s">Setting Up Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7892688">Setting Up Marathon</a></li><li><span data-type="index-term">worker scalability</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9628064">What Is Chronos?</a></li></ul></li><li><span data-type="index-term">clusters, highly available</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm297664">The Masters</a></li><li><span data-type="index-term">cmd</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7955088">Using Marathon</a></li><li><span data-type="index-term">CommandExecutor</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7214576">CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7814240">Summary</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9832864">The Scheduler</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10366080">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14401920">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">CommandInfo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10367344">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14597056">CommandInfo</a></li><li><span data-type="index-term">configuration management systems</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16526464">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">consistency model</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#cm6">The Consistency Model</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17297232">Reconciliation During Failover</a></li><li><span data-type="index-term">constraints, placement</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#cp3">Using Placement Constraints</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8990976">Using Placement Constraints</a></li><li><span data-type="index-term">containerizers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp405104">How to Use Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp25936">The Slaves</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17170192">Multiple Tasks</a><ul><li><span data-type="index-term">Docker</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#cont6">Containerizers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17330032">Using Docker</a></li><li><span data-type="index-term">Linux</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18000976">Multitenant Workloads</a></li></ul></li><li><span data-type="index-term">Cook</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18130160">Multitenant Workloads</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18174560">Summary</a></li><li><span data-type="index-term">Cotton</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7798784">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18057392">Databases and Turnkey Infrastructure</a><ul><li>(<span data-gentext="see">see also</span> Myriad)</li></ul></li><li><span data-type="index-term">Curator</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12856208">Adding High Availability</a></li><li><span data-type="index-term">curl command</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp6996288">Dynamic reservations</a></li><li><span data-type="index-term">custom executors</span> (<span data-gentext="see">see</span> executors)</li></ul></div><div data-type="indexdiv"><h3>D</h3><ul><li><span data-type="index-term">data stores</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13350288">Distributed Communication</a></li><li><span data-type="index-term">database hosting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7797200">Not Managed by Mesos</a></li><li><span data-type="index-term">databases</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#db7">Databases and Turnkey Infrastructure</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18155872">Databases and Turnkey Infrastructure</a></li><li><span data-type="index-term">deferred start</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9625600">What Is Chronos?</a></li><li><span data-type="index-term">dependency tracking</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9621120">What Is Chronos?</a></li><li><span data-type="index-term">deployment systems</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#ds1">Mesos as a Deployment System</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3364112">Mesos as a Deployment System</a></li><li><span data-type="index-term">discriminated unions</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7783152">Understanding mesos.proto</a></li><li><span data-type="index-term">distributed communication</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#dc4">Distributed Communication</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14091088">Distributed Communication</a></li><li><span data-type="index-term">distributed systems</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3330896">The Slaves</a></li><li><span data-type="index-term">DNS discovery</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9556256">HAProxy for microservices</a></li><li><span data-type="index-term">DNS names</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18163504">IP per Container</a></li><li><span data-type="index-term">Docker</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14250896">Running Pickled Tasks</a><ul><li><span data-type="index-term">advanced configuration</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17325952">Using Docker</a></li><li><span data-type="index-term">containerizers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#d6c">Containerizers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17331120">Using Docker</a></li><li><span data-type="index-term">for executor deployment</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16244624">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Marathon and</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#dawm3">Running Dockerized Applications</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9260416">Mounting host volumes</a></li><li><span data-type="index-term">mounting host volumes</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#d3mhv">Mounting host volumes</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9261504">Mounting host volumes</a></li></ul></li><li><span data-type="index-term">doFirstFit</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#dff4">Matching Tasks to Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12154224">Matching Tasks to Offers</a></li><li><span data-type="index-term">driver.stop()</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14879120">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">dynamic reservations API</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#drapi6">Framework Dynamic Reservations API</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17901696">Framework Dynamic Reservations API</a></li><li><span data-type="index-term">dynamic slave reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#dr2">Dynamic reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7232112">Tasks and Executors</a></li></ul></div><div data-type="indexdiv"><h3>E</h3><ul><li><span data-type="index-term">eBay Myriad</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18005296">Multitenant Workloads</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18173712">Summary</a><ul><li>(<span data-gentext="see">see also</span> Cotton)</li></ul></li><li><span data-type="index-term">Elastic Load Balancer</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9802000">Singularity</a></li><li><span data-type="index-term">event bus</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9507072">The Event Bus</a></li><li><span data-type="index-term">executor-master communication</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3332352">The Slaves</a></li><li><span data-type="index-term">executorLost</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10774176">Useless Remote BASH</a></li><li><span data-type="index-term">executors</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#e2">Frameworks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm4404224">Frameworks</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7812848">Summary</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5">Building a Mesos Executor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17201056">Summary</a><ul><li>(<span data-gentext="see">see also</span> CommandExecutor)</li><li><span data-type="index-term">adding heartbeats</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5ah">Adding Heartbeats</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17127632">Adding Heartbeats</a></li><li><span data-type="index-term">advanced features</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5af">Advanced Executor Features</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17195056">When should we use them?</a></li><li><span data-type="index-term">augmented logging</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14390000">Augmented Logging</a></li><li><span data-type="index-term">babysitting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14377280">Better Babysitting</a></li><li><span data-type="index-term">canary tasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17183504">Canary tasks</a></li><li><span data-type="index-term">custom-built, reasons for</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5rfcb">Building a Work Queue’s Worker</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14398752">Augmented Logging</a></li><li><span data-type="index-term">deployment solutions</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5ds">Bootstrapping Executor Installation</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16551568">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">with expensive states</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17173664">Executors with expensive state</a></li><li><span data-type="index-term">heartbeating</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14381808">Better Babysitting</a></li><li><span data-type="index-term">multistage initialization</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17177296">Multistage initialization</a></li><li><span data-type="index-term">progress reporting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5pr">Progress Reporting</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17150272">Progress Reporting</a></li><li><span data-type="index-term">reimplementing the CommandExecutor</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5rtce">Rewriting the CommandExecutor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16388176">Rewriting the CommandExecutor</a><ul><li><span data-type="index-term">ensuring a single task</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15171760">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">ignoring callbacks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5rtceicb">Rewriting the CommandExecutor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15125712">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">implementing killTask</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15981360">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">implementing launchTask</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5rtceilt">Rewriting the CommandExecutor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15821792">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">imports and class declaration</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14405904">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">main method</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14835984">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">makeTask updating</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5rtceilt2">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">starting a process</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15322720">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">status update helper</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15128384">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">waiting for process to finish</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15824112">Rewriting the CommandExecutor</a></li></ul></li><li><span data-type="index-term">remote logging</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17153472">Adding Remote Logging</a></li><li><span data-type="index-term">resizing containers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17170800">Multiple Tasks</a></li><li><span data-type="index-term">responsibilities</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14481040">The Executor</a></li><li><span data-type="index-term">running multiple tasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5rmt">Multiple Tasks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17193968">When should we use them?</a></li><li><span data-type="index-term">scalability issues</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#ex5si">Bootstrapping Executor Installation</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16552656">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">sharing resources</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14257984">Sharing Resources</a></li><li><span data-type="index-term">versus tasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#e2vt">Tasks and Executors</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7205248">CommandExecutor</a></li><li><span data-type="index-term">versus work queue scheduler</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14239760">Building a Work Queue’s Worker</a></li></ul></li><li><span data-type="index-term">executor_ids</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17166064">Multiple Tasks</a></li><li><span data-type="index-term">existing application porting</span> (<span data-gentext="see">see</span> Marathon)</li></ul></div><div data-type="indexdiv"><h3>F</h3><ul><li><span data-type="index-term">fail-stop versus fail-recover models</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17242144">How Is Slave Failure Handled?</a></li><li><span data-type="index-term">failures</span><ul><li><span data-type="index-term">masters</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#f6m">How Is Master Failure Handled? (Or, the Registry)</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17266720">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">reconciliation during</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#f6rd">Reconciliation During Failover</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17298080">Reconciliation During Failover</a></li><li><span data-type="index-term">slaves</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#f6s">How Is Slave Failure Handled?</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17246464">How Is Master Failure Handled? (Or, the Registry)</a></li></ul></li><li><span data-type="index-term">Fenzo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14195424">Consolidating Offers</a></li><li><span data-type="index-term">fetcher cache</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16252048">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Finagle</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9565728">HAProxy for microservices</a></li><li><span data-type="index-term">first fit</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#ff4">Matching Tasks to Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12155200">Matching Tasks to Offers</a></li><li><span data-type="index-term">forced failover</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14147904">Forced Failover</a></li><li><span data-type="index-term">fragmentation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14209008">Consolidating Offers</a></li><li><span data-type="index-term">framework design</span><ul><li><span data-type="index-term">minimal code for task launch</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#fd4mcftl">Useless Remote BASH</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10781552">Useless Remote BASH</a></li><li><span data-type="index-term">names</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10027792">Useless Remote BASH</a></li><li><span data-type="index-term">scheduler-only</span> (<span data-gentext="see">see</span> schedulers)</li></ul></li><li><span data-type="index-term">framework messages</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#fm5">Rewriting the CommandExecutor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15117888">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16560848">Adding Heartbeats</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16983616">Adding Heartbeats</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17143440">Progress Reporting</a></li><li><span data-type="index-term">Framework UI</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14160000">Framework UI</a></li><li><span data-type="index-term">FrameworkID</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10445312">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#fid4">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13217040">Adding High Availability</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13673280">Adding Reconciliation</a></li><li><span data-type="index-term">FrameWorkInfo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9973568">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13018144">Adding High Availability</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14161296">Framework UI</a></li><li><span data-type="index-term">frameworkMessage</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16985120">Adding Heartbeats</a></li><li><span data-type="index-term">frameworks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp458448">Summary</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#fw2">Frameworks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm4400880">Frameworks</a><ul><li><span data-type="index-term">monitoring</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7805184">Not Managed by Mesos</a></li><li><span data-type="index-term">resources</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm586048">The Masters</a></li></ul></li></ul></div><div data-type="indexdiv"><h3>G</h3><ul><li><span data-type="index-term">garbage collector (GC)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#gc2">Resources</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3223232">Resources</a></li><li><span data-type="index-term">general purpose graphics processing unit (GPGPU) applications</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14372960">Sharing Resources</a></li><li><span data-type="index-term">Google</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3357728">Introduction to Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9565056">HAProxy for microservices</a></li><li><span data-type="index-term">Google Protocol Buffers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#gpb2">Understanding mesos.proto</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7789696">Understanding mesos.proto</a></li></ul></div><div data-type="indexdiv"><h3>H</h3><ul><li><span data-type="index-term">Hadoop</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3351840">Introduction to Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3309616">Mesos as an Execution Platform</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18006768">Multitenant Workloads</a></li><li><span data-type="index-term">HAProxy</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#hap3">Setting Up HAProxy with Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9580448">HAProxy for microservices</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9800016">Singularity</a><ul><li><span data-type="index-term">ACL rules</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9536368">Bamboo</a></li><li><span data-type="index-term">Bamboo, setting up with</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#hap3msuw">Bamboo</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9546384">Bamboo</a></li><li><span data-type="index-term">for microservices</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#hap3fm">HAProxy for microservices</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9582608">HAProxy for microservices</a></li></ul></li><li><span data-type="index-term">haproxy-marathon-bridge script</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9527312">Setting Up HAProxy with Marathon</a></li><li><span data-type="index-term">HDFS</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3311072">Mesos as an Execution Platform</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18053584">Databases and Turnkey Infrastructure</a></li><li><span data-type="index-term">HDFS storage</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16257552">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">health checks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#hc3">Health Checks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9463936">Application Versioning and Rolling Upgrades</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9807696">Aurora</a></li><li><span data-type="index-term">heartbeats/heartbeating</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14381104">Better Babysitting</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15113088">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#hh5">Adding Heartbeats</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17126784">Adding Heartbeats</a></li><li><span data-type="index-term">HeartbeatTask</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16977872">Adding Heartbeats</a></li><li><span data-type="index-term">Heroku/PaaS</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3306752">Mesos as an Execution Platform</a></li><li><span data-type="index-term">high availability</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#ha4">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13707008">Adding High Availability</a></li><li><span data-type="index-term">host</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8344832">Using Marathon</a></li><li><span data-type="index-term">host information reporting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3393632">The Slaves</a></li><li><span data-type="index-term">host volumes, mounting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#hvm3">Mounting host volumes</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9262592">Mounting host volumes</a></li><li><span data-type="index-term">HTTP Basic Authentication  (HBA)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7870176">Setting Up Marathon</a></li><li><span data-type="index-term">HTTP health checks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9344032">HTTP checks</a></li><li><span data-type="index-term">Hubspot</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9797008">Singularity</a></li></ul></div><div data-type="indexdiv"><h3>I</h3><ul><li><span data-type="index-term">id</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8010288">Using Marathon</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8348400">Using Marathon</a></li><li><span data-type="index-term">in-app discovery</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9563488">HAProxy for microservices</a></li><li><span data-type="index-term">infrastructure improvements</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#ii7">Databases and Turnkey Infrastructure</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18156720">Databases and Turnkey Infrastructure</a></li><li><span data-type="index-term">initialization, multistage</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17178752">Multistage initialization</a></li><li><span data-type="index-term">instances</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8006864">Using Marathon</a></li><li><span data-type="index-term">Intel</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18040208">Oversubscription</a></li><li><span data-type="index-term">interval scheduling</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9617744">What Is Chronos?</a></li><li><span data-type="index-term">IP per container system</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#ippcs7">IP per Container</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18169568">IP per Container</a></li></ul></div><div data-type="indexdiv"><h3>J</h3><ul><li><span data-type="index-term">Java keystore</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7877920">Setting Up Marathon</a></li><li><span data-type="index-term">Java Virtual Machine (JVM)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14250224">Running Pickled Tasks</a></li><li><span data-type="index-term">job data, loading</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#jdl4">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13739040">Adding High Availability</a></li><li><span data-type="index-term">job implementation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#ji4">Implementing a Basic Job Processor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp11290912">Implementing a Basic Job Processor</a></li><li><span data-type="index-term">job processor scheduler</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9859888">Job Processor Scheduler</a></li><li><span data-type="index-term">job serialization</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#jobser4">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13383456">Adding High Availability</a></li><li><span data-type="index-term">job states</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#js4">Bridging the Semantic Gap Between Offers and Jobs</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12845952">Adding High Availability</a></li><li><span data-type="index-term">jobs command</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3496000">Introduction to Mesos</a></li><li><span data-type="index-term">jobs, automatically self-destructing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16657952">Adding Heartbeats</a></li><li><span data-type="index-term">JSON</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9269488">Health Checks</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9642544">Running Chronos on Marathon</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp11656656">Implementing a Basic Job Processor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14794288">Rewriting the CommandExecutor</a></li></ul></div><div data-type="indexdiv"><h3>K</h3><ul><li><span data-type="index-term">Kafka</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7801824">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18054288">Databases and Turnkey Infrastructure</a></li><li><span data-type="index-term">keystore (Java)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7877184">Setting Up Marathon</a></li><li><span data-type="index-term">killTask</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15980688">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17124448">Adding Heartbeats</a></li><li><span data-type="index-term">knapsack problem</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12156464">Matching Tasks to Offers</a></li></ul></div><div data-type="indexdiv"><h3>L</h3><ul><li><span data-type="index-term">launchTasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10105696">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15502880">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#lt6">The New Offer API</a></li><li><span data-type="index-term">leader election</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#le4">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13014736">Adding High Availability</a></li><li><span data-type="index-term">LeaderLatch</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#ll4">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13013888">Adding High Availability</a></li><li><span data-type="index-term">LeaderSelector</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13012640">Adding High Availability</a></li><li><span data-type="index-term">legacy applications, porting</span> (<span data-gentext="see">see</span> Marathon)</li><li><span data-type="index-term">libprocess</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#lp6">Libprocess and the Actor Model</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17220016">Libprocess and the Actor Model</a></li><li><span data-type="index-term">Linux containers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18000272">Multitenant Workloads</a></li><li><span data-type="index-term">logging, augmented</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14391392">Augmented Logging</a></li><li><span data-type="index-term">Lost state</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17259664">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">Luigi</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9780144">Chronos Operational Concerns</a></li></ul></div><div data-type="indexdiv"><h3>M</h3><ul><li><span data-type="index-term">make</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9778512">Chronos Operational Concerns</a></li><li><span data-type="index-term">makeTask</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16209872">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">Marathon</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3307616">Mesos as an Execution Platform</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3">Porting an Existing Application to Mesos</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9817440">Summary</a><ul><li><span data-type="index-term">alternatives to</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9791616">Alternatives to Marathon + Chronos</a></li><li><span data-type="index-term">application versioning and rolling upgrades</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3uavaru">Application Versioning and Rolling Upgrades</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9501200">Application Versioning and Rolling Upgrades</a></li><li><span data-type="index-term">command-line options</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7839936">Setting Up Marathon</a></li><li><span data-type="index-term">event bus</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9507808">The Event Bus</a></li><li><span data-type="index-term">HAProxy setup</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3uhaps">Setting Up HAProxy with Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9579232">HAProxy for microservices</a></li><li><span data-type="index-term">health checks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3uhc">Health Checks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9462816">Application Versioning and Rolling Upgrades</a></li><li><span data-type="index-term">placement constraints</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3upc">Using Placement Constraints</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8988976">Using Placement Constraints</a></li><li><span data-type="index-term">placement operators</span><ul><li><span data-type="index-term">CLUSTER</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8796864">Using Placement Constraints</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9253616">Mounting host volumes</a></li><li><span data-type="index-term">GROUP_BY</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8648368">Using Placement Constraints</a></li><li><span data-type="index-term">LIKE</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8695920">Using Placement Constraints</a></li><li><span data-type="index-term">UNIQUE</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8683952">Using Placement Constraints</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9255984">Mounting host volumes</a></li><li><span data-type="index-term">UNLIKE</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8881024">Using Placement Constraints</a></li></ul></li><li><span data-type="index-term">REST API changes</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8355296">Using Marathon</a></li><li><span data-type="index-term">running Chronos on</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3rco">Running Chronos on Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9769376">Running Chronos on Marathon</a></li><li><span data-type="index-term">running Dockerized applications</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3urda">Running Dockerized Applications</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9259328">Mounting host volumes</a></li><li><span data-type="index-term">running Mesos frameworks on</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3rmfo">Running Mesos Frameworks on Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9787632">Chronos on Marathon: Summary</a><ul><li>(<span data-gentext="see">see also</span> Chronos)</li></ul></li><li><span data-type="index-term">scaling</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8637360">Scaling Your Application</a></li><li><span data-type="index-term">securing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3s">Setting Up Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7891408">Setting Up Marathon</a></li><li><span data-type="index-term">setting up</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3su">Setting Up Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7896640">Using Marathon</a></li><li><span data-type="index-term">specifying ports</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8467280">Using Marathon</a></li><li><span data-type="index-term">using</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#m3u">Using Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9581392">HAProxy for microservices</a></li></ul></li><li><span data-type="index-term">master UI</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm301120">The Masters</a></li><li><span data-type="index-term">master-executor communication</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3333088">The Slaves</a></li><li><span data-type="index-term">MasterInfo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10449040">Useless Remote BASH</a></li><li><span data-type="index-term">masters</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#masters2">Masters and Slaves</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp10928">The Masters</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7811312">Summary</a><ul><li><span data-type="index-term">and task metadata</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm590736">The Masters</a></li><li><span data-type="index-term">failure of</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#m6fo">How Is Master Failure Handled? (Or, the Registry)</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17265632">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">for high availability</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#masters2fha">The Masters</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm293360">The Masters</a></li><li><span data-type="index-term">responsibilities of</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#masters2ro">The Masters</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm292112">The Masters</a></li></ul></li><li><span data-type="index-term">Mesos</span><ul><li><span data-type="index-term">as a deployment system</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#m1aads">Mesos as a Deployment System</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3362864">Mesos as a Deployment System</a></li><li><span data-type="index-term">as a DevOps tool</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp408768">How to Use Mesos</a></li><li><span data-type="index-term">as an execution platform</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3366608">Mesos as an Execution Platform</a></li><li><span data-type="index-term">benefits and uses</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp456592">Summary</a></li><li><span data-type="index-term">evolution of</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#m1eo">Introduction to Mesos</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3385360">Introduction to Mesos</a></li><li><span data-type="index-term">internal architecture</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#m6ia">Libprocess and the Actor Model</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17221712">Libprocess and the Actor Model</a></li><li><span data-type="index-term">technical overview</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3386608">Introduction to Mesos</a></li><li><span data-type="index-term">using</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp403936">How to Use Mesos</a></li></ul></li><li><span data-type="index-term">Mesos-DNS</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18164112">IP per Container</a></li><li><span data-type="index-term">mesos.proto</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#mp2">Understanding mesos.proto</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7788848">Understanding mesos.proto</a></li><li><span data-type="index-term">Mesosphere</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7800608">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7827200">Moving a Web Application to Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18039472">Oversubscription</a><ul><li>(<span data-gentext="see">see also</span> Marathon)</li></ul></li><li><span data-type="index-term">MESOS_SLAVE_PID</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14875168">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">microservices</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ms3">HAProxy for microservices</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9583824">HAProxy for microservices</a></li><li><span data-type="index-term">Monit</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17238608">How Is Slave Failure Handled?</a></li><li><span data-type="index-term">MPI</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3354944">Introduction to Mesos</a></li><li><span data-type="index-term">multiple tasks, running</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#mtr5">Multiple Tasks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17193120">When should we use them?</a></li><li><span data-type="index-term">multistage initialization</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17178144">Multistage initialization</a></li><li><span data-type="index-term">multitenancy</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#m7">Multitenant Workloads</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18136528">Multitenant Workloads</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18172128">Summary</a></li><li><span data-type="index-term">Myriad</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18004560">Multitenant Workloads</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18172864">Summary</a><ul><li>(<span data-gentext="see">see also</span> Cotton)</li></ul></li></ul></div><div data-type="indexdiv"><h3>N</h3><ul><li><span data-type="index-term">Netflix Fenzo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14196016">Consolidating Offers</a></li><li><span data-type="index-term">Nginx</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9524144">Setting Up HAProxy with Marathon</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9800688">Singularity</a></li><li><span data-type="index-term">nonstrict mode</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17263536">How Is Master Failure Handled? (Or, the Registry)</a></li></ul></div><div data-type="indexdiv"><h3>O</h3><ul><li><span data-type="index-term">offer consolidation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#co4">Consolidating Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14198368">Consolidating Offers</a></li><li><span data-type="index-term">offers</span><ul><li><span data-type="index-term">assigning tasks to</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#o4att">Matching Tasks to Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12842160">Bridging the Semantic Gap Between Offers and Jobs</a></li><li><span data-type="index-term">resourceOffers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#o4ro">Implementing a Basic Job Processor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10822400">Implementing a Basic Job Processor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14214384">Consolidating Offers</a></li><li><span data-type="index-term">revokable</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp17993840">Oversubscription</a></li></ul></li><li><span data-type="index-term">oversubscription</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#os7">Oversubscription</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18042768">Oversubscription</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18176400">Summary</a></li></ul></div><div data-type="indexdiv"><h3>P</h3><ul><li><span data-type="index-term">pending state</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9842528">Pool of Servers Scheduler</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9866784">Job Processor Scheduler</a></li><li><span data-type="index-term">persistent disks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18048592">Databases and Turnkey Infrastructure</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18177840">Summary</a></li><li><span data-type="index-term">persistent volumes API</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17591072">Persistent Volumes for Databases</a></li><li><span data-type="index-term">pickled tasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#pt5">Running Pickled Tasks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14254240">Running Pickled Tasks</a></li><li><span data-type="index-term">placement constraints</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#pc3">Using Placement Constraints</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8990064">Using Placement Constraints</a></li><li><span data-type="index-term">pool of servers scheduler</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9834400">The Scheduler</a></li><li><span data-type="index-term">port allocation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#pa4">Allocating Ports</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14757520">Allocating Ports</a></li><li><span data-type="index-term">porting existing applications</span> (<span data-gentext="see">see</span> Marathon)</li><li><span data-type="index-term">POSIX shared filesystems</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16532528">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">principals</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7004608">Dynamic reservations</a></li><li><span data-type="index-term">process environment</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14351600">Configuring the process’s environment</a></li><li><span data-type="index-term">process launching</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14265920">Launching a process</a></li><li><span data-type="index-term">ProcessBuilder</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14798368">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">progress reporting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#pr5">Progress Reporting</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17149424">Progress Reporting</a></li><li><span data-type="index-term">progress updates</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15116224">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">protobufs</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#p2">Understanding mesos.proto</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7790544">Understanding mesos.proto</a><ul><li><span data-type="index-term">tagged union</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7781792">Understanding mesos.proto</a></li></ul></li><li><span data-type="index-term">proxies</span><ul><li><span data-type="index-term">HAProxy</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#p3hap">Setting Up HAProxy with Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9577984">HAProxy for microservices</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9799008">Singularity</a></li><li><span data-type="index-term">Nginx</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9523136">Setting Up HAProxy with Marathon</a></li></ul></li><li><span data-type="index-term">Puppet</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16528592">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Python  SimpleHTTPServer</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7899776">Using Marathon</a></li></ul></div><div data-type="indexdiv"><h3>Q</h3><ul><li><span data-type="index-term">quality of service (QoS) controller</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18032896">Oversubscription</a></li></ul></div><div data-type="indexdiv"><h3>R</h3><ul><li><span data-type="index-term">reconcileTasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17279600">Reconciliation During Failover</a></li><li><span data-type="index-term">reconciliation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#r4">Adding Reconciliation</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13522432">Adding Reconciliation</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#rec6">Reconciliation During Failover</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17296384">Reconciliation During Failover</a></li><li><span data-type="index-term">redirection</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14131776">Distributed Communication</a></li><li><span data-type="index-term">registry, strict/nonstrict modes</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17262320">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">remote logging</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17152864">Adding Remote Logging</a></li><li><span data-type="index-term">reprovisioning</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3356928">Introduction to Mesos</a></li><li><span data-type="index-term">Reregister</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17254192">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18133024">Multitenant Workloads</a><ul><li><span data-type="index-term">dynamic</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#r6d">Framework Dynamic Reservations API</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17567072">Framework Dynamic Reservations API</a></li><li><span data-type="index-term">static</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#r2s">Static reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm1057760">Static reservations</a></li></ul></li><li><span data-type="index-term">resource estimator</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18032064">Oversubscription</a></li><li><span data-type="index-term">resource reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18132320">Multitenant Workloads</a></li><li><span data-type="index-term">resourceOffers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10453872">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10779232">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#ro4">Implementing a Basic Job Processor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp11288752">Implementing a Basic Job Processor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14213648">Consolidating Offers</a></li><li><span data-type="index-term">resources</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#res2">Resources</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3458208">Configuring Custom Resources</a><ul><li><span data-type="index-term">cpus</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm283968">Resources</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7958592">Using Marathon</a></li><li><span data-type="index-term">custom resource configuration</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3435968">Configuring Custom Resources</a></li><li><span data-type="index-term">definition</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp37664">Resources</a></li><li><span data-type="index-term">disk</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp42240">Resources</a></li><li><span data-type="index-term">mem (memory)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm279344">Resources</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8003408">Using Marathon</a></li><li><span data-type="index-term">optimization</span> (<span data-gentext="see">see</span> oversubscription)</li><li><span data-type="index-term">ports</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp43248">Resources</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3218688">Resources</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8013632">Using Marathon</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8345568">Using Marathon</a></li><li><span data-type="index-term">ranges</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm288896">Resources</a></li><li><span data-type="index-term">sets</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm287952">Resources</a></li><li><span data-type="index-term">sharing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14258992">Sharing Resources</a><ul><li>(<span data-gentext="see">see also</span> multitenancy)</li></ul></li><li><span data-type="index-term">slack of</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#r7so">Oversubscription</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18036080">Oversubscription</a></li></ul></li><li><span data-type="index-term">revokable offers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp17993136">Oversubscription</a></li><li><span data-type="index-term">Riak</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7803280">Not Managed by Mesos</a></li><li><span data-type="index-term">roles</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#r2">Roles</a><ul><li><span data-type="index-term">default role</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#r2dr">Static reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7230928">Tasks and Executors</a></li><li><span data-type="index-term">dynamic slave reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#r2dr1">Dynamic reservations</a></li><li><span data-type="index-term">securing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp345520">Roles</a></li><li><span data-type="index-term">static slave reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#r2sr">Static reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm1059952">Static reservations</a></li></ul></li><li><span data-type="index-term">rolling restarts</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3404000">The Slaves</a></li><li><span data-type="index-term">rolling upgrades</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ru3">Application Versioning and Rolling Upgrades</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9502544">Application Versioning and Rolling Upgrades</a></li><li><span data-type="index-term">Runnable</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14834096">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">running state</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9845008">Pool of Servers Scheduler</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9867488">Job Processor Scheduler</a></li></ul></div><div data-type="indexdiv"><h3>S</h3><ul><li><span data-type="index-term">Satellite</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14156480">Hardening Your Scheduler</a></li><li><span data-type="index-term">scalability</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9629072">What Is Chronos?</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17145552">Progress Reporting</a></li><li><span data-type="index-term">scaling</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8638208">Scaling Your Application</a></li><li><span data-type="index-term">schedulers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#s2">Frameworks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm4403280">Frameworks</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4">The Scheduler</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14471936">Summary</a><ul><li><span data-type="index-term">adding high availability</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4aha">Adding High Availability</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13705792">Adding High Availability</a></li><li><span data-type="index-term">adding reconciliation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4ar">Adding Reconciliation</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13521296">Adding Reconciliation</a></li><li><span data-type="index-term">advanced techniques</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4at">Advanced Scheduler Techniques</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14464112">Summary</a></li><li><span data-type="index-term">allocating ports</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4atap">Allocating Ports</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14756272">Allocating Ports</a></li><li><span data-type="index-term">callbacks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10378944">Useless Remote BASH</a></li><li><span data-type="index-term">checkpointing</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14760848">Checkpointing</a></li><li><span data-type="index-term">consolidated offers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4atco">Consolidating Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14197152">Consolidating Offers</a></li><li><span data-type="index-term">defined</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14479664">The Executor</a></li><li><span data-type="index-term">distributed communication</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4atdc">Distributed Communication</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14089872">Distributed Communication</a></li><li><span data-type="index-term">forced failover</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14093552">Forced Failover</a></li><li><span data-type="index-term">Framework UI</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14158992">Framework UI</a></li><li><span data-type="index-term">hardening</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14200880">Hardening Your Scheduler</a></li><li><span data-type="index-term">job implementation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4ji">Implementing a Basic Job Processor</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp11289696">Implementing a Basic Job Processor</a></li><li><span data-type="index-term">job processor design</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9858880">Job Processor Scheduler</a></li><li><span data-type="index-term">matching tasks to offers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#s4mtto">Matching Tasks to Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12840704">Bridging the Semantic Gap Between Offers and Jobs</a></li><li><span data-type="index-term">pool of servers design</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9835072">The Scheduler</a></li><li><span data-type="index-term">reconciliation and</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#s6ra">Reconciliation During Failover</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17295296">Reconciliation During Failover</a></li><li><span data-type="index-term">responsibilities</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9825616">The Scheduler</a></li><li><span data-type="index-term">SchedulerDriver</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10034448">Useless Remote BASH</a></li><li><span data-type="index-term">work queue design</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9849200">Work Queue Scheduler</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14238752">Building a Work Queue’s Worker</a></li></ul></li><li><span data-type="index-term">securing Marathon and Chronos</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#smc3">Setting Up Marathon</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7893904">Setting Up Marathon</a></li><li><span data-type="index-term">sed command</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8556656">Using Marathon</a></li><li><span data-type="index-term">sendFrameworkMessage</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15109520">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">Serenity</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18040880">Oversubscription</a></li><li><span data-type="index-term">server states</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9841824">Pool of Servers Scheduler</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9865952">Job Processor Scheduler</a></li><li><span data-type="index-term">service discovery</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#sd3">HAProxy for microservices</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9604064">HAProxy for microservices</a></li><li><span data-type="index-term">shared database design</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp14110656">Distributed Communication</a></li><li><span data-type="index-term">shared filesystems</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16533232">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">SimpleHTTPServer</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7900448">Using Marathon</a></li><li><span data-type="index-term">Singularity</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9796144">Singularity</a></li><li><span data-type="index-term">slack (of resources)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#s7">Oversubscription</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18035136">Oversubscription</a></li><li><span data-type="index-term">slave ID</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17278864">Reconciliation During Failover</a></li><li><span data-type="index-term">slave reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17334240">The New Offer API</a><ul><li><span data-type="index-term">dynamic</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#sr2d">Dynamic reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7236304">Tasks and Executors</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17342928">Framework Dynamic Reservations API</a><ul><li>(<span data-gentext="see">see also</span> dynamic reservations API)</li></ul></li><li><span data-type="index-term">static</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#sr2s">Static reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm1061200">Static reservations</a></li></ul></li><li><span data-type="index-term">slave UI</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3325984">The Slaves</a></li><li><span data-type="index-term">slaves</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm4398240">Masters and Slaves</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7810704">Summary</a><ul><li><span data-type="index-term">attribute configuration</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3461248">Configuring Slave Attributes</a></li><li><span data-type="index-term">Cgroups</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp28128">The Slaves</a></li><li><span data-type="index-term">container management</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3320336">The Slaves</a></li><li><span data-type="index-term">custom resource configuration</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3434896">Configuring Custom Resources</a></li><li><span data-type="index-term">executor-master communication</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3329792">The Slaves</a></li><li><span data-type="index-term">garbage collector (GC)</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#slaves2gc">Resources</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3221952">Resources</a></li><li><span data-type="index-term">host information reporting</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3392640">The Slaves</a></li><li><span data-type="index-term">lifecycle and failure of</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#s6lafo">How Is Slave Failure Handled?</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17247552">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">master failures and</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#s6amf">How Is Master Failure Handled? (Or, the Registry)</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17267808">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">registration</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17252368">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">responsibilities of</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#slaves2ro">The Slaves</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp34320">The Slaves</a></li><li><span data-type="index-term">and rolling restarts</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3404736">The Slaves</a></li><li><span data-type="index-term">status updates</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3399568">The Slaves</a></li></ul></li><li><span data-type="index-term">stagedAt</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8351232">Using Marathon</a></li><li><span data-type="index-term">staging state</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9844272">Pool of Servers Scheduler</a></li><li><span data-type="index-term">startedAt</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8351968">Using Marathon</a></li><li><span data-type="index-term">static slave reservations</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#sr2">Static reservations</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm1058720">Static reservations</a></li><li><span data-type="index-term">status updates</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3401520">The Slaves</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10450768">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15127040">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17146800">Progress Reporting</a></li><li><span data-type="index-term">stderr</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14394768">Augmented Logging</a></li><li><span data-type="index-term">stdout</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14394032">Augmented Logging</a></li><li><span data-type="index-term">Storm</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3351008">Introduction to Mesos</a></li><li><span data-type="index-term">strict mode</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17262928">How Is Master Failure Handled? (Or, the Registry)</a></li><li><span data-type="index-term">Stubby</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9566400">HAProxy for microservices</a></li><li><span data-type="index-term">SupervisorD</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3480848">Mesos as a Deployment System</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17238000">How Is Slave Failure Handled?</a></li><li><span data-type="index-term">syslog</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14397888">Augmented Logging</a></li><li><span data-type="index-term">SystemD</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3481584">Mesos as a Deployment System</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17239216">How Is Slave Failure Handled?</a></li></ul></div><div data-type="indexdiv"><h3>T</h3><ul><li><span data-type="index-term">tagged unions</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7781184">Understanding mesos.proto</a></li><li><span data-type="index-term">task metadata</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm589728">The Masters</a></li><li><span data-type="index-term">task reconciliation</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#tr6">Reconciliation During Failover</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17294448">Reconciliation During Failover</a></li><li><span data-type="index-term">TaskID</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10110576">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15336176">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">TaskInfo</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10089648">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10121408">Useless Remote BASH</a></li><li><span data-type="index-term">tasks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm4405232">Frameworks</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp8342032">Using Marathon</a><ul><li><span data-type="index-term">canary</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14882304">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17184352">Canary tasks</a></li><li><span data-type="index-term">matching to offers</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#t4mto">Matching Tasks to Offers</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12839248">Bridging the Semantic Gap Between Offers and Jobs</a></li><li><span data-type="index-term">pickled</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#t5p">Running Pickled Tasks</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14255184">Running Pickled Tasks</a></li><li><span data-type="index-term">sharing work</span> (<span data-gentext="see">see</span> resources, sharing)</li><li><span data-type="index-term">status updates</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3400576">The Slaves</a></li><li><span data-type="index-term">statuses</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12808560">Bridging the Semantic Gap Between Offers and Jobs</a></li><li><span data-type="index-term">versus executors</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#t2ve">Tasks and Executors</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7208704">CommandExecutor</a></li></ul></li><li><span data-type="index-term">TaskStatus</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15170416">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp17138496">Progress Reporting</a></li><li><span data-type="index-term">TASK_FINISHED</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp14880560">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">TASK_LOST</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp10777776">Useless Remote BASH</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17281376">Reconciliation During Failover</a></li><li><span data-type="index-term">TCP health checks</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9411280">TCP checks</a></li><li><span data-type="index-term">Thermos</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9806480">Aurora</a></li><li><span data-type="index-term">thundering herd problem</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp16259744">Bootstrapping Executor Installation</a></li><li><span data-type="index-term">Twitter</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3383744">Introduction to Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7798176">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9564352">HAProxy for microservices</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9805536">Aurora</a></li><li><span data-type="index-term">Two Sigma Cook</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18131024">Multitenant Workloads</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18175168">Summary</a></li></ul></div><div data-type="indexdiv"><h3>U</h3><ul><li><span data-type="index-term">UI, master</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idm300384">The Masters</a></li><li><span data-type="index-term">UI, slave</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp3326720">The Slaves</a></li><li><span data-type="index-term">updates</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15115616">Rewriting the CommandExecutor</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch05.html#idp15127648">Rewriting the CommandExecutor</a></li><li><span data-type="index-term">upgrades</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#ug3">Application Versioning and Rolling Upgrades</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9504432">Application Versioning and Rolling Upgrades</a></li><li><span data-type="index-term">usage slack</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#us7">Oversubscription</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18034192">Oversubscription</a></li><li><span data-type="index-term">username/password authentication</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp7870912">Setting Up Marathon</a></li></ul></div><div data-type="indexdiv"><h3>V</h3><ul><li><span data-type="index-term">versioning</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#v3">Application Versioning and Rolling Upgrades</a>-<a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9503488">Application Versioning and Rolling Upgrades</a></li><li><span data-type="index-term">volume</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch06.html#idp17740192">Persistent Volumes for Databases</a></li></ul></div><div data-type="indexdiv"><h3>W</h3><ul><li><span data-type="index-term">work queue scheduler</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp9850208">Work Queue Scheduler</a></li></ul></div><div data-type="indexdiv"><h3>Y</h3><ul><li><span data-type="index-term">Yahoo!</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch01.html#idp3382800">Introduction to Mesos</a></li><li><span data-type="index-term">YARN</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch07.html#idp18005968">Multitenant Workloads</a></li></ul></div><div data-type="indexdiv"><h3>Z</h3><ul><li><span data-type="index-term">ZooKeeper</span>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7794176">Not Managed by Mesos</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch02.html#idp7815504">Summary</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9541408">Bamboo</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch03.html#idp9640480">Running Chronos on Marathon</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp12853376">Adding High Availability</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13215024">Adding High Availability</a>, <a data-type="index:locator" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ch04.html#idp13420016">Distributed Communication</a></li></ul></div></div></div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch07.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">7. The Future of Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/colophon01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">About the Author</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/ix01.html" data-for-analytics="9781491926543:ix01.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/ix01.html#">Reset</a>
</div>
</div></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html><!--[if IE]><![endif]--><!DOCTYPE html><!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage"" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/building-applications-on/9781491926543/preface01.html"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="859452"
  data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36"
  data-username="dchen267"
  data-account-type="B2B"
  
  data-activated-trial-date="04/25/2016"


  data-archive="9781491926543"
  data-publishers="O&#39;Reilly Media, Inc."



  data-htmlfile-name="preface01.html"
  data-epub-title="Building Applications on Mesos" data-debug=0 data-testing=0><![endif]--><!--[if gt IE 8]><!--><html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/building-applications-on/9781491926543/preface01.html" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="859452" data-user-uuid="4d373bec-fada-4717-9823-769db3ed3a36" data-username="dchen267" data-account-type="B2B" data-activated-trial-date="04/25/2016" data-archive="9781491926543" data-publishers="O'Reilly Media, Inc." data-htmlfile-name="preface01.html" data-epub-title="Building Applications on Mesos" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781491926543"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"><title>Preface - Building Applications on Mesos</title><link rel="stylesheet" href="https://www.safaribooksonline.com/static/CACHE/css/e4b0fef39b55.css" type="text/css"><link rel="stylesheet" type="text/css" href="https://www.safaribooksonline.com/static/css/annotator.min.fd58f69f4908.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"><style type="text/css" title="ibis-book">
    @charset "utf-8";#sbo-rt-content html,#sbo-rt-content div,#sbo-rt-content div,#sbo-rt-content span,#sbo-rt-content applet,#sbo-rt-content object,#sbo-rt-content iframe,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5,#sbo-rt-content h6,#sbo-rt-content p,#sbo-rt-content blockquote,#sbo-rt-content pre,#sbo-rt-content a,#sbo-rt-content abbr,#sbo-rt-content acronym,#sbo-rt-content address,#sbo-rt-content big,#sbo-rt-content cite,#sbo-rt-content code,#sbo-rt-content del,#sbo-rt-content dfn,#sbo-rt-content em,#sbo-rt-content font,#sbo-rt-content img,#sbo-rt-content ins,#sbo-rt-content kbd,#sbo-rt-content q,#sbo-rt-content s,#sbo-rt-content samp,#sbo-rt-content small,#sbo-rt-content strike,#sbo-rt-content strong,#sbo-rt-content sub,#sbo-rt-content sup,#sbo-rt-content tt,#sbo-rt-content var,#sbo-rt-content b,#sbo-rt-content u,#sbo-rt-content i,#sbo-rt-content center,#sbo-rt-content dl,#sbo-rt-content dt,#sbo-rt-content dd,#sbo-rt-content ol,#sbo-rt-content ul,#sbo-rt-content li,#sbo-rt-content fieldset,#sbo-rt-content form,#sbo-rt-content label,#sbo-rt-content legend,#sbo-rt-content table,#sbo-rt-content caption,#sbo-rt-content tdiv,#sbo-rt-content tfoot,#sbo-rt-content thead,#sbo-rt-content tr,#sbo-rt-content th,#sbo-rt-content td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}@page{margin:5px !important}#sbo-rt-content p{margin:8px 0 0;line-height:125%;text-align:left}#sbo-rt-content em{font-style:italic;font-family:inherit}#sbo-rt-content em.replaceable{font-style:italic}#sbo-rt-content em strong,#sbo-rt-content strong em{font-weight:bold;font-style:italic;font-family:inherit}#sbo-rt-content strong.userinput{font-weight:bold;font-style:normal}#sbo-rt-content span.bolditalic{font-weight:bold;font-style:italic}#sbo-rt-content strong,#sbo-rt-content span.bold{font-weight:bold}#sbo-rt-content a.ulink,#sbo-rt-content a.xref,#sbo-rt-content a.email,#sbo-rt-content a.link,#sbo-rt-content a{text-decoration:none;color:#8e0012}#sbo-rt-content sup{font-size:x-small;vertical-align:super}#sbo-rt-content sub{font-size:smaller;vertical-align:sub}#sbo-rt-content span.lineannotation{font-style:italic;color:#A62A2A;font-family:serif,"DejaVuSerif"}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content span.strikethrough{text-decoration:line-through}#sbo-rt-content span.smallcaps{font-variant:small-caps}#sbo-rt-content span.cursor{background:#000;color:#FFF}#sbo-rt-content span.smaller{font-size:75%}#sbo-rt-content .boxedtext,#sbo-rt-content .keycap{border-style:solid;border-width:1px;border-color:#000;padding:1px}#sbo-rt-content span.gray50{color:#7F7F7F;}#sbo-rt-content .gray-background,#sbo-rt-content .reverse-video{background:#2E2E2E;color:#FFF}#sbo-rt-content .light-gray-background{background:#A0A0A0}#sbo-rt-content .preserve-whitespace{white-space:pre-wrap}#sbo-rt-content h1,#sbo-rt-content div.toc-title,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content h4,#sbo-rt-content h5{-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none;font-weight:bold;text-align:left;page-break-after:avoid !important;font-family:sans-serif,"DejaVuSans"}#sbo-rt-content div.toc-title{font-size:1.5em;margin-top:20px !important;margin-bottom:30px !important}#sbo-rt-content section[data-type="sect1"] h1{font-size:1.3em;color:#8e0012;margin:40px 0 8px 0}#sbo-rt-content section[data-type="sect2"] h2{font-size:1.1em;margin:30px 0 8px 0 !important}#sbo-rt-content section[data-type="sect3"] h3{font-size:1em;color:#555;margin:20px 0 8px 0 !important}#sbo-rt-content section[data-type="sect4"] h4{font-size:1em;font-weight:normal;font-style:italic;margin:15px 0 6px 0 !important}#sbo-rt-content section[data-type="chapter"]>div>h1,#sbo-rt-content section[data-type="preface"]>div>h1,#sbo-rt-content section[data-type="appendix"]>div>h1,#sbo-rt-content section[data-type="glossary"]>div>h1,#sbo-rt-content section[data-type="bibliography"]>div>h1,#sbo-rt-content section[data-type="index"]>div>h1{font-size:2em;line-height:1;margin-bottom:50px;color:#000;padding-bottom:10px;border-bottom:1px solid #000}#sbo-rt-content div[data-type="part"] h1{font-size:2em;text-align:center;margin-top:0 !important;margin-bottom:50px;padding:50px 0 10px 0;border-bottom:1px solid #000}#sbo-rt-content img.width-ninety{width:90%}#sbo-rt-content img{max-width:95%;margin:0 auto;padding:0}#sbo-rt-content div.figure{background-color:transparent;text-align:center;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;padding:15px 5px 15px 5px !important;margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content figure{margin:15px 0 15px 0 !important;page-break-inside:avoid}#sbo-rt-content div.figure h6{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding-top:10px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.informalfigure{text-align:center;padding:5px 0 !important}#sbo-rt-content div.sidebar{margin:15px 0 10px 0 !important;-webkit-border-radius:5px;border-radius:5px;border:1px solid #DCDCDC;background-color:#F7F7F7;font-size:90%;padding:15px !important;page-break-inside:avoid}#sbo-rt-content aside[data-type="sidebar"]{margin:15px 0 10px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar-title,#sbo-rt-content aside[data-type="sidebar"] h5{font-weight:bold;font-size:1em;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px 0 !important;page-break-inside:avoid}#sbo-rt-content div.sidebar div.figure p.title,#sbo-rt-content aside[data-type="sidebar"] figcaption,#sbo-rt-content div.sidebar div.informalfigure div.caption{font-size:90%;text-align:center;font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";color:#000;padding:5px !important;page-break-before:avoid;page-break-after:avoid}#sbo-rt-content div.sidebar ol,#sbo-rt-content aside[data-type="sidebar"] ul{margin-left:15px}#sbo-rt-content div.sidebar div.tip,#sbo-rt-content div.sidebar div.note,#sbo-rt-content div.sidebar div.warning,#sbo-rt-content div.sidebar div.caution,#sbo-rt-content div.sidebar div.important{margin:20px auto 20px auto !important;font-size:90%;width:85%}#sbo-rt-content div.sidebar div.figure,#sbo-rt-content aside[data-type="sidebar"] figure{border:none}#sbo-rt-content pre{white-space:pre-wrap;font-family:"Ubuntu Mono",monospace;margin:25px 0 25px 20px;font-size:85%;display:block;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content div.note pre.programlisting,#sbo-rt-content div.tip pre.programlisting,#sbo-rt-content div.warning pre.programlisting,#sbo-rt-content div.caution pre.programlisting,#sbo-rt-content div.important pre.programlisting{margin-bottom:0}#sbo-rt-content code{font-family:"Ubuntu Mono",monospace;-webkit-hyphens:none;hyphens:none;adobe-hyphenate:none}#sbo-rt-content code strong em,#sbo-rt-content code em strong,#sbo-rt-content pre em strong,#sbo-rt-content pre strong em,#sbo-rt-content strong code em code,#sbo-rt-content em code strong code,#sbo-rt-content span.bolditalic code{font-weight:bold;font-style:italic;font-family:"Ubuntu Mono BoldItal",monospace}#sbo-rt-content code em,#sbo-rt-content em code,#sbo-rt-content pre em,#sbo-rt-content em.replaceable{font-family:"Ubuntu Mono Ital",monospace;font-style:italic}#sbo-rt-content code strong,#sbo-rt-content strong code,#sbo-rt-content pre strong,#sbo-rt-content strong.userinput{font-family:"Ubuntu Mono Bold",monospace;font-weight:bold}#sbo-rt-content div[data-type="example"]{margin:10px 0 15px 0 !important}#sbo-rt-content div[data-type="example"] h1,#sbo-rt-content div[data-type="example"] h2,#sbo-rt-content div[data-type="example"] h3,#sbo-rt-content div[data-type="example"] h4,#sbo-rt-content div[data-type="example"] h5,#sbo-rt-content div[data-type="example"] h6{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:10px 0 5px 0 !important;border-bottom:1px solid #000}#sbo-rt-content li pre.example{padding:10px 0 !important}#sbo-rt-content div[data-type="example"] pre[data-type="programlisting"],#sbo-rt-content div[data-type="example"] pre[data-type="screen"]{margin:0}#sbo-rt-content span.gray{color:#4C4C4C}#sbo-rt-content section[data-type="titlepage"]>div>h1{font-size:3em;font-family:sans-serif,"DejaVuSans";font-weight:bold;margin:50px 0 10px 0 !important;line-height:1;text-align:center}#sbo-rt-content section[data-type="titlepage"]>div>h2[data-type="author"]{font-size:2em;font-family:sans-serif,"DejaVuSans";font-weight:bold;color:#8e0012;margin:50px 0 !important;text-align:center}#sbo-rt-content div.book div.titlepage div.publishername{margin-top:60%;margin-bottom:20px;text-align:center;font-size:1.25em}#sbo-rt-content div.book div.titlepage div.locations p{margin:0;text-align:center}#sbo-rt-content div.book div.titlepage div.locations p.cities{font-size:80%;text-align:center;margin-top:5px}#sbo-rt-content section.preface[title="Dedication"]>div.titlepage h2.title{text-align:center;text-transform:uppercase;font-size:1.5em;margin-top:50px;margin-bottom:50px}#sbo-rt-content section.preface[title="Dedication"] p{font-style:italic;text-align:center}#sbo-rt-content div.colophon h1.title{font-size:1.3em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon h2.subtitle{margin:0 !important;color:#000;font-family:serif,"DejaVuSerif";font-size:1em;font-weight:normal}#sbo-rt-content div.colophon div.author h3.author{font-size:1.1em;font-family:serif,"DejaVuSerif";margin:10px 0 0 !important;font-weight:normal}#sbo-rt-content div.colophon div.editor h4,#sbo-rt-content div.colophon div.editor h3.editor{color:#000;font-size:.8em;margin:15px 0 0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.editor h3.editor{font-size:.8em;margin:0 !important;font-family:serif,"DejaVuSerif";font-weight:normal}#sbo-rt-content div.colophon div.publisher{margin-top:10px}#sbo-rt-content div.colophon div.publisher p,#sbo-rt-content div.colophon div.publisher span.publishername{margin:0;font-size:.8em}#sbo-rt-content div.legalnotice p,#sbo-rt-content div.timestamp p{font-size:.8em}#sbo-rt-content div.timestamp p{margin-top:10pt}#sbo-rt-content div.colophon[title="About the Author"] h1.title,#sbo-rt-content div.colophon[title="Colophon"] h1.title{font-size:1.5em;margin:0 !important;font-family:sans-serif,"DejaVuSans";font-weight:bold}#sbo-rt-content section.chapter div.titlepage div.author{margin:10px 0 10px 0}#sbo-rt-content section.chapter div.titlepage div.author div.affiliation{font-style:italic}#sbo-rt-content div.attribution{margin:5px 0 0 50px !important}#sbo-rt-content h3.author span.orgname{display:none}#sbo-rt-content div.epigraph{margin:10px 0 10px 20px !important;page-break-inside:avoid;font-size:90%}#sbo-rt-content div.epigraph p{font-style:italic}#sbo-rt-content blockquote,#sbo-rt-content div.blockquote{margin:10px !important;page-break-inside:avoid;font-size:95%}#sbo-rt-content blockquote p,#sbo-rt-content div.blockquote p{font-family:serif,"DejaVuSerif";font-style:italic}#sbo-rt-content blockquote div.attribution{margin:5px 0 0 30px !important;text-align:right;width:80%}#sbo-rt-content blockquote div.attribution p{font-style:normal}#sbo-rt-content p.right{text-align:right;margin:0}#sbo-rt-content div.footnote{font-size:90%}#sbo-rt-content div.refnamediv h2,#sbo-rt-content div.refnamediv h3,#sbo-rt-content div.refsynopsisdiv h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refentry div.refsect1 h2{font-size:1.1em;color:#000;margin-top:15px !important;margin-bottom:0 !important}#sbo-rt-content div.refsect2 h3{font-size:1em;color:#000;margin-top:10px !important;margin-bottom:0 !important}#sbo-rt-content div.refnamediv p{margin-left:15px !important}#sbo-rt-content dt{padding-top:10px !important;padding-bottom:0 !important}#sbo-rt-content dt span.term{font-weight:bold;font-style:italic}#sbo-rt-content dt span.term code.literal{font-style:normal;font-weight:normal}#sbo-rt-content dd{margin-left:1.5em !important}#sbo-rt-content dd,#sbo-rt-content li{text-align:left}#sbo-rt-content ol{list-style-type:decimal;margin-top:8px !important;margin-bottom:8px !important;margin-left:20px !important;padding-left:25px !important}#sbo-rt-content ol ol{list-style-type:lower-alpha}#sbo-rt-content ol ol ol{list-style-type:lower-roman}#sbo-rt-content ul{list-style-type:square;margin-top:8px !important;margin-bottom:8px !important;margin-left:5px !important;padding-left:20px !important}#sbo-rt-content ul ul{list-style-type:none;padding-left:0 !important;margin-left:0 !important}#sbo-rt-content ol li,#sbo-rt-content ul li,#sbo-rt-content dd{margin-bottom:.25em}#sbo-rt-content ul ul li p:before{content:"— "}#sbo-rt-content ul ul ul li p:before{content:""}#sbo-rt-content ul ul ul{list-style-type:square;margin-left:20px !important;padding-left:30px !important}#sbo-rt-content div.orderedlistalpha{list-style-type:upper-alpha}#sbo-rt-content table.simplelist{margin-left:20px !important;margin-bottom:10px}#sbo-rt-content table.simplelist td{border:none;font-size:90%}#sbo-rt-content table.simplelist tr{border-bottom:none}#sbo-rt-content table.simplelist tr:nth-of-type(even){background-color:transparent}#sbo-rt-content dl.calloutlist p:first-child{margin-top:-25px !important}#sbo-rt-content dl.calloutlist dd{padding-left:0;margin-top:-25px}#sbo-rt-content dl.calloutlist img{padding:0}#sbo-rt-content a.co img{padding:0}#sbo-rt-content div.toc ol{margin-top:8px !important;margin-bottom:8px !important;margin-left:0 !important;padding-left:0 !important}#sbo-rt-content div.toc ol ol{margin-left:30px !important;padding-left:0 !important}#sbo-rt-content div.toc ol li{list-style-type:none}#sbo-rt-content div.toc a{color:#8e0012}#sbo-rt-content div.toc ol a{font-size:1em;font-weight:bold}#sbo-rt-content div.toc ol>li>ol a{font-weight:bold;font-size:1em}#sbo-rt-content div.toc ol>li>ol>li>ol a{text-decoration:none;font-weight:normal;font-size:1em}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"],#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{margin:30px !important;-webkit-border-radius:5px;border-radius:5px;font-size:90%;padding:10px 8px 20px 8px !important;page-break-inside:avoid}#sbo-rt-content div.tip,#sbo-rt-content div[data-type="tip"],#sbo-rt-content div.note,#sbo-rt-content div[data-type="note"]{border:1px solid #BEBEBE;background-color:transparent}#sbo-rt-content div.warning,#sbo-rt-content div[data-type="warning"],#sbo-rt-content div[data-type="caution"],#sbo-rt-content div[data-type="important"]{border:1px solid #BC8F8F}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div[data-type="tip"] h1,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6,#sbo-rt-content div[data-type="note"] h1,#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="warning"] h1,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="caution"] h1,#sbo-rt-content div[data-type="important"] h1{font-weight:bold;font-size:110%;font-family:sans-serif,"DejaVuSans";text-transform:uppercase;letter-spacing:1px;text-align:center;margin:4px 0 6px !important}#sbo-rt-content div.tip h3,#sbo-rt-content div[data-type="tip"] h6,#sbo-rt-content div.note h3,#sbo-rt-content div[data-type="note"] h6{color:#737373}#sbo-rt-content div.warning h3,#sbo-rt-content div[data-type="warning"] h6,#sbo-rt-content div[data-type="caution"] h6,#sbo-rt-content div[data-type="important"] h6{color:#C67171}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note,#sbo-rt-content div.safarienabled{background-color:transparent;margin:8px 0 0 !important;border:0 solid #BEBEBE;-webkit-border-radius:0;border-radius:0;font-size:100%;padding:0 !important;page-break-inside:avoid}#sbo-rt-content div.sect1[title="Safari® Books Online"] div.note h3{display:none}#sbo-rt-content div.table,#sbo-rt-content table{margin:15px auto 30px auto !important;max-width:95%;border-collapse:collapse;border-spacing:0}#sbo-rt-content div.table,#sbo-rt-content div.informaltable{page-break-inside:avoid}#sbo-rt-content tr,#sbo-rt-content tr td{border-bottom:1px solid #c3c3c3}#sbo-rt-content thead td,#sbo-rt-content thead th{border-bottom:#9d9d9d 1px solid !important;border-top:#9d9d9d 1px solid !important}#sbo-rt-content tr:nth-of-type(even){background-color:#f1f6fc}#sbo-rt-content thead{font-family:sans-serif,"DejaVuSans";color:#000;font-weight:bold}#sbo-rt-content td,#sbo-rt-content th{padding:.3em;text-align:left;vertical-align:baseline;font-size:80%}#sbo-rt-content div.informaltable table{margin:10px auto !important}#sbo-rt-content div.informaltable table tr{border-bottom:none}#sbo-rt-content div.informaltable table tr:nth-of-type(even){background-color:transparent}#sbo-rt-content div.informaltable td,#sbo-rt-content div.informaltable th{border:#9d9d9d 1px solid}#sbo-rt-content div.table-title,#sbo-rt-content table caption{font-weight:normal;font-style:italic;font-family:serif,"DejaVuSerif";margin:10px 0 10px 0 !important;text-align:center;padding:0;page-break-after:avoid}#sbo-rt-content table code{font-size:smaller}#sbo-rt-content div.equation{margin:10px 0 15px 0 !important}#sbo-rt-content div.equation-title{font-style:italic;font-weight:normal;font-family:serif,"DejaVuSerif";margin:20px 0 10px 0 !important;page-break-after:avoid}#sbo-rt-content div.equation-contents{margin-left:20px}#sbo-rt-content span.inlinemediaobject{height:.85em;display:inline-block;margin-bottom:.2em}#sbo-rt-content span.inlinemediaobject img{margin:0;height:.85em}#sbo-rt-content div.informalequation{margin:20px 0 20px 20px;width:75%}#sbo-rt-content div.informalequation img{width:75%}#sbo-rt-content div.index{font-weight:bold;text-indent:0}#sbo-rt-content div.index li{line-height:140%}#sbo-rt-content div.index a.indexterm{color:#8e0012}#sbo-rt-content div.index ul{list-style-type:none;padding-left:0;margin-left:0}#sbo-rt-content div.index ul li{padding-left:0;margin-left:0}#sbo-rt-content div.index ul li ul li{margin-left:20px}#sbo-rt-content code.boolean,#sbo-rt-content .navy{color:rgb(0,0,128);}#sbo-rt-content code.character,#sbo-rt-content .olive{color:rgb(128,128,0);}#sbo-rt-content code.comment,#sbo-rt-content .blue{color:rgb(0,0,255);}#sbo-rt-content code.conditional,#sbo-rt-content .limegreen{color:rgb(50,205,50);}#sbo-rt-content code.constant,#sbo-rt-content .darkorange{color:rgb(255,140,0);}#sbo-rt-content code.debug,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.define,#sbo-rt-content .darkgoldenrod,#sbo-rt-content .gold{color:rgb(184,134,11);}#sbo-rt-content code.delimiter,#sbo-rt-content .dimgray{color:rgb(105,105,105);}#sbo-rt-content code.error,#sbo-rt-content .red{color:rgb(255,0,0);}#sbo-rt-content code.exception,#sbo-rt-content .salmon{color:rgb(250,128,11);}#sbo-rt-content code.float,#sbo-rt-content .steelblue{color:rgb(70,130,180);}#sbo-rt-content pre code.function,#sbo-rt-content .green{color:rgb(0,128,0);}#sbo-rt-content code.identifier,#sbo-rt-content .royalblue{color:rgb(65,105,225);}#sbo-rt-content code.ignore,#sbo-rt-content .gray{color:rgb(128,128,128);}#sbo-rt-content code.include,#sbo-rt-content .purple{color:rgb(128,0,128);}#sbo-rt-content code.keyword,#sbo-rt-content .sienna{color:rgb(160,82,45);}#sbo-rt-content code.label,#sbo-rt-content .deeppink{color:rgb(255,20,147);}#sbo-rt-content code.macro,#sbo-rt-content .orangered{color:rgb(255,69,0);}#sbo-rt-content code.number,#sbo-rt-content .brown{color:rgb(165,42,42);}#sbo-rt-content code.operator,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.preCondit,#sbo-rt-content .teal{color:rgb(0,128,128);}#sbo-rt-content code.preProc,#sbo-rt-content .fuschia{color:rgb(255,0,255);}#sbo-rt-content code.repeat,#sbo-rt-content .indigo{color:rgb(75,0,130);}#sbo-rt-content code.special,#sbo-rt-content .saddlebrown{color:rgb(139,69,19);}#sbo-rt-content code.specialchar,#sbo-rt-content .magenta{color:rgb(255,0,255);}#sbo-rt-content code.specialcomment,#sbo-rt-content .seagreen{color:rgb(46,139,87);}#sbo-rt-content code.statement,#sbo-rt-content .forestgreen{color:rgb(34,139,34);}#sbo-rt-content code.storageclass,#sbo-rt-content .plum{color:rgb(221,160,221);}#sbo-rt-content code.string,#sbo-rt-content .darkred{color:rgb(139,0,0);}#sbo-rt-content code.structure,#sbo-rt-content .chocolate{color:rgb(210,106,30);}#sbo-rt-content code.tag,#sbo-rt-content .darkcyan{color:rgb(0,139,139);}#sbo-rt-content code.todo,#sbo-rt-content .black{color:#000;}#sbo-rt-content code.type,#sbo-rt-content .mediumslateblue{color:rgb(123,104,238);}#sbo-rt-content code.typedef,#sbo-rt-content .darkgreen{color:rgb(0,100,0);}#sbo-rt-content code.underlined{text-decoration:underline;}#sbo-rt-content pre code.hll{background-color:#ffc}#sbo-rt-content pre code.c{color:#09F;font-style:italic}#sbo-rt-content pre code.err{color:#A00}#sbo-rt-content pre code.k{color:#069;font-weight:bold}#sbo-rt-content pre code.o{color:#555}#sbo-rt-content pre code.cm{color:#35586C;font-style:italic}#sbo-rt-content pre code.cp{color:#099}#sbo-rt-content pre code.c1{color:#35586C;font-style:italic}#sbo-rt-content pre code.cs{color:#35586C;font-weight:bold;font-style:italic}#sbo-rt-content pre code.gd{background-color:#FCC}#sbo-rt-content pre code.ge{font-style:italic}#sbo-rt-content pre code.gr{color:#F00}#sbo-rt-content pre code.gh{color:#030;font-weight:bold}#sbo-rt-content pre code.gi{background-color:#CFC}#sbo-rt-content pre code.go{color:#000}#sbo-rt-content pre code.gp{color:#009;font-weight:bold}#sbo-rt-content pre code.gs{font-weight:bold}#sbo-rt-content pre code.gu{color:#030;font-weight:bold}#sbo-rt-content pre code.gt{color:#9C6}#sbo-rt-content pre code.kc{color:#069;font-weight:bold}#sbo-rt-content pre code.kd{color:#069;font-weight:bold}#sbo-rt-content pre code.kn{color:#069;font-weight:bold}#sbo-rt-content pre code.kp{color:#069}#sbo-rt-content pre code.kr{color:#069;font-weight:bold}#sbo-rt-content pre code.kt{color:#078;font-weight:bold}#sbo-rt-content pre code.m{color:#F60}#sbo-rt-content pre code.s{color:#C30}#sbo-rt-content pre code.na{color:#309}#sbo-rt-content pre code.nb{color:#366}#sbo-rt-content pre code.nc{color:#0A8;font-weight:bold}#sbo-rt-content pre code.no{color:#360}#sbo-rt-content pre code.nd{color:#99F}#sbo-rt-content pre code.ni{color:#999;font-weight:bold}#sbo-rt-content pre code.ne{color:#C00;font-weight:bold}#sbo-rt-content pre code.nf{color:#C0F}#sbo-rt-content pre code.nl{color:#99F}#sbo-rt-content pre code.nn{color:#0CF;font-weight:bold}#sbo-rt-content pre code.nt{color:#309;font-weight:bold}#sbo-rt-content pre code.nv{color:#033}#sbo-rt-content pre code.ow{color:#000;font-weight:bold}#sbo-rt-content pre code.w{color:#bbb}#sbo-rt-content pre code.mf{color:#F60}#sbo-rt-content pre code.mh{color:#F60}#sbo-rt-content pre code.mi{color:#F60}#sbo-rt-content pre code.mo{color:#F60}#sbo-rt-content pre code.sb{color:#C30}#sbo-rt-content pre code.sc{color:#C30}#sbo-rt-content pre code.sd{color:#C30;font-style:italic}#sbo-rt-content pre code.s2{color:#C30}#sbo-rt-content pre code.se{color:#C30;font-weight:bold}#sbo-rt-content pre code.sh{color:#C30}#sbo-rt-content pre code.si{color:#A00}#sbo-rt-content pre code.sx{color:#C30}#sbo-rt-content pre code.sr{color:#3AA}#sbo-rt-content pre code.s1{color:#C30}#sbo-rt-content pre code.ss{color:#A60}#sbo-rt-content pre code.bp{color:#366}#sbo-rt-content pre code.vc{color:#033}#sbo-rt-content pre code.vg{color:#033}#sbo-rt-content pre code.vi{color:#033}#sbo-rt-content pre code.il{color:#F60}#sbo-rt-content pre code.g{color:#050}#sbo-rt-content pre code.l{color:#C60}#sbo-rt-content pre code.l{color:#F90}#sbo-rt-content pre code.n{color:#008}#sbo-rt-content pre code.nx{color:#008}#sbo-rt-content pre code.py{color:#96F}#sbo-rt-content pre code.p{color:#000}#sbo-rt-content pre code.x{color:#F06}#sbo-rt-content div.blockquote_sampler_toc{width:95%;margin:5px 5px 5px 10px !important}#sbo-rt-content div{font-family:serif,"DejaVuSerif";text-align:left}
    </style><link rel="canonical" href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/preface01.html"><meta name="description" content=" Preface Conventions Used in This Book The following typographical conventions are used in this book: Italic Indicates new terms, URLs, email addresses, filenames, and file extensions. Constant width Used for ... "><meta property="og:title" content="Preface"><meta itemprop="isPartOf" content="/library/view/building-applications-on/9781491926543/"><meta itemprop="name" content="Preface"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/preface01.html"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781491926543/"><meta property="og:description" itemprop="description" content=" Preface Conventions Used in This Book The following typographical conventions are used in this book: Italic Indicates new terms, URLs, email addresses, filenames, and file extensions. Constant width Used for ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="O'Reilly Media, Inc."><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781491926529"><meta property="og:book:author" itemprop="author" content="David Greenberg"><meta property="og:book:tag" itemprop="about" content="Databases"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: <%= font_size %> !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: <%= font_family %> !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: <%= column_width %>% !important; margin: 0 auto !important; }"></style><!--[if lt IE 9]><script src="/static/js/src/respond.min.cf5c9b7980e5.js"></script><![endif]--><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts library" data-gr-c-s-loaded="true">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        




<a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#container" class="skip">Skip to content</a><header class="topbar t-topbar" style="display:None"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z" fill="currentColor"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z" fill="currentColor"></path></g></svg><span>Queue</span></a></li><li class="search"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z" fill="currentColor"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z" fill="currentColor"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z" fill="currentColor"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z" fill="currentColor"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" version="1.1" fill="#4A3C31"><desc>offers icon</desc><path d="M10.8 43.7L0 39 0 10.2 13.6 4.6 23.3 8.7 11.5 13.5C11 13.6 10.8 13.9 10.8 14.3L10.8 43.7 10.8 43.7Z"></path><polygon points="12.3 44.4 25 50 38 44.3 38 14.7 25.2 9.4 12.3 14.7 12.3 44.4"></polygon><path d="M36.6 4.7L50 10.2 50 39 39.5 43.6 39.5 14.3C39.5 13.8 39.2 13.6 38.8 13.5L27 8.7 36.6 4.7 36.6 4.7Z"></path><polygon points="34.8 4 25 0 15.4 3.9 25.2 7.9 34.8 4"></polygon></svg><span>Offers</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-conferences/" class="l2 nav-icn"><span>Conferences</span></a></li><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletter</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/003o000000t5q9fAAA/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z" fill="currentColor"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l1 no-icon">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z" fill="currentColor"></path></g></svg><span>Settings</span></a></li><li><a href="https://community.safaribooksonline.com/" class="l2">Feedback</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Building Applications on Mesos
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/preface01.html" data-for-analytics="9781491926543:preface01.html"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/preface01.html&amp;text=Building%20Applications%20on%20Mesos&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/preface01.html"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/preface01.html"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20Preface&amp;body=https://www.safaribooksonline.com/library/view/building-applications-on/9781491926543/preface01.html%0D%0Afrom%20Building%20Applications%20on%20Mesos%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
      
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/copyright-page01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Building Applications on Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">1. Introduction to Mesos</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section data-type="preface" epub:type="preface" data-pdf-bookmark="Preface"><div class="preface" id="idp3349488">
<h1>Preface</h1>







<section data-type="sect1" data-pdf-bookmark="Conventions Used in This Book"><div class="sect1" id="idp3291872">
<h1>Conventions Used in This Book</h1>

<p>The following typographical conventions are used in this book:</p>
<dl>
<dt><em>Italic</em></dt>
<dd>
<p>Indicates new terms, URLs, email addresses, filenames, and file extensions.</p>
</dd>
<dt><code>Constant width</code></dt>
<dd>
<p>Used for program listings, as well as within paragraphs to refer to program elements such as variable or function names, databases, data types, environment variables, statements, and keywords.</p>
</dd>
<dt><em><code>Constant width italic</code></em></dt>
<dd>
<p>Shows text that should be replaced with user-supplied values or by values determined by context.</p>
</dd>
</dl>
<div data-type="tip"><h6>Tip</h6>
<p>This element signifies a tip or suggestion.</p>
</div>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>This element signifies a general note.</p>
</div>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>This element indicates a warning or caution.</p>
</div>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Safari® Books Online"><div class="sect1" id="idm265328">
<h1>Safari® Books Online</h1>
<div data-type="note" epub:type="note" class="safarienabled"><h6>Note</h6>
<p><a href="http://safaribooksonline.com/" class="orm:hideurl:ital"><em class="hyperlink">Safari Books Online</em></a> is an on-demand digital library that delivers expert <a href="https://www.safaribooksonline.com/explore/" class="orm:hideurl">content</a> in both book and video form from the world’s leading authors in technology and business.</p>
</div>

<p>Technology professionals, software developers, web designers, and business and creative professionals use Safari Books Online as their primary resource for research, problem solving, learning, and certification training.</p>
<p>Safari Books Online offers a range of <a href="https://www.safaribooksonline.com/pricing/" class="orm:hideurl">plans and pricing</a> for <a href="https://www.safaribooksonline.com/enterprise/" class="orm:hideurl">enterprise</a>, <a href="https://www.safaribooksonline.com/government/" class="orm:hideurl">government</a>, <a href="https://www.safaribooksonline.com/academic-public-library/" class="orm:hideurl">education</a>, and individuals.</p>

<p>Members have access to thousands of books, training videos, and prepublication manuscripts in one fully searchable database from publishers like O’Reilly Media, Prentice Hall Professional, Addison-Wesley Professional, Microsoft Press, Sams, Que, Peachpit Press, Focal Press, Cisco Press, John Wiley &amp; Sons, Syngress, Morgan Kaufmann, IBM Redbooks, Packt, Adobe Press, FT Press, Apress, Manning, New Riders, McGraw-Hill, Jones &amp; Bartlett, Course Technology, and hundreds <a href="https://www.safaribooksonline.com/our-library/" class="orm:hideurl">more</a>. For more information about Safari Books Online, please visit us <a href="https://www.safaribooksonline.com/" class="orm:hideurl">online</a>.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="How to Contact Us"><div class="sect1" id="idp3339328">
<h1>How to Contact Us</h1>

<p>Please address comments and questions concerning this book to the publisher:</p>
<ul class="simplelist">
  <li>O’Reilly Media, Inc.</li>
  <li>1005 Gravenstein Highway North</li>
  <li>Sebastopol, CA 95472</li>
  <li>800-998-9938 (in the United States or Canada)</li>
  <li>707-829-0515 (international or local)</li>
  <li>707-829-0104 (fax)</li>
</ul>

<p>We have a web page for this book, where we list errata, examples, and any additional information. You can access this page at <a href="http://bit.ly/building-applications-on-mesos"><em class="hyperlink">http://bit.ly/building-applications-on-mesos</em></a>.</p>
<!--TODO Don't forget to update the link above.-->

<p>To comment or ask technical questions about this book, send email to <a class="email" href="mailto:bookquestions@oreilly.com"><em>bookquestions@oreilly.com</em></a>.</p>

<p>For more information about our books, courses, conferences, and news, see our website at <a href="http://www.oreilly.com/"><em class="hyperlink">http://www.oreilly.com</em></a>.</p>

<p>Find us on Facebook: <a href="http://facebook.com/oreilly"><em class="hyperlink">http://facebook.com/oreilly</em></a></p>

<p>Follow us on Twitter: <a href="http://twitter.com/oreillymedia"><em class="hyperlink">http://twitter.com/oreillymedia</em></a></p>

<p>Watch us on YouTube: <a href="http://www.youtube.com/oreillymedia"><em class="hyperlink">http://www.youtube.com/oreillymedia</em></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Acknowledgments"><div class="sect1" id="idp3339984">
<h1>Acknowledgments</h1>

<p>This book took a huge amount of work, and it wouldn’t have been possible without the help and support of many people.</p>

<p>First, I’d like to thank Brian Foster and the team at O’Reilly. They did so much to make this book a reality.</p>

<p>I’d also like to thank Two Sigma, my employer, for giving me the time and support to write this book.</p>

<p>The quality of the book was improved immeasurably thanks to the feedback and reviews I received from Matt Adereth, Adam Bordelon, Niklas Nielsen, and David Palaitis.</p>

<p>Finally, I’d like to thank my wife, Aysylu Greenberg, for her love and support throughout the writing process.</p>
</div></section>







</div></section><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#">
			
				Add Note
			
		</a></li>
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/copyright-page01.html" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Building Applications on Mesos</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="/safari-books-archive/site/library/view/building-applications-on/9781491926543/ch01.html" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">1. Introduction to Mesos</div>
        </a>
    
  
  </div>


      
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781491926543/chapter/preface01.html" data-for-analytics="9781491926543:preface01.html">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    



        
      </div>
      



  <footer class="pagefoot t-pagefoot">
    <a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" class="icon-up"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://community.safaribooksonline.com/">Feedback</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright">© 2016 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>




    

    
    
  

<div class="annotator-notice"></div><div class="font-flyout"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com//library/view/building-applications-on/9781491926543/preface01.html#">Reset</a>
</div>
</div></body></html>